(this["webpackJsonpdropbox-demo-tape-web"]=this["webpackJsonpdropbox-demo-tape-web"]||[]).push([[0],{81:function(n,e,t){n.exports=t(97)},86:function(n,e,t){},97:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(11),o=t.n(i),c=(t(86),t(20)),u=t(2),l=t(76),s=t(124),d=t(75),f=t.n(d),p=t(9),m=t.n(p),v=t(13),h=t(4),g=t(8),b=t(34),y=t(25);var x=function(n,e){var t=Object(r.useState)((function(){try{var t=window.localStorage.getItem(n);return t?JSON.parse(t):e}catch(r){return console.log(r),e}})),a=Object(h.a)(t,2),i=a[0],o=a[1];return[i,function(e){try{var t=e instanceof Function?e(i):e;o(t),window.localStorage.setItem(n,JSON.stringify(t))}catch(r){console.log(r)}}]},j=Object(r.createContext)();function E(n){var e=n.children,t=n.initialState,i=void 0===t?{}:t,o=x("ddt",i),c=Object(h.a)(o,2),u=c[0],l=c[1],s=Object(r.useState)(u),d=Object(h.a)(s,2),f=d[0],p=d[1];Object(r.useEffect)((function(){l(f)}),[f]);var m={getValue:function(n){return f[n]},setValue:function(n,e){p((function(t){return Object(g.a)({},t,Object(y.a)({},n,e))}))},resetCache:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p((function(){return Object(g.a)({},i,{},n)}))},state:f};return a.a.createElement(j.Provider,{value:m},e)}function O(){var n=Object(r.useContext)(j);if(void 0===n)throw new Error("useCache must be used within a CacheProvider");return n}var k=t(49);var w=function(n){var e=Object.create(null);return"string"!==typeof n?e:(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=t.shift(),a=t.length>0?t.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===e[r]?e[r]=a:Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]})),e):e},S=r.createContext();function C(n){var e=n.authUrl,t=n.children,a=O(),i=r.useState(a.getValue("currentUser")),o=Object(h.a)(i,2),c=o[0],u=o[1],l=r.useState(null),s=Object(h.a)(l,2),d=s[0],f=s[1],p=r.useState(a.getValue("accessToken")),g=Object(h.a)(p,2),b=g[0],y=g[1],x=r.useState(null),j=Object(h.a)(x,2),E=j[0],C=j[1],I=r.useState(null),P=Object(h.a)(I,2),z=P[0],D=P[1];r.useEffect((function(){var n=new k.Dropbox({accessToken:b,clientId:"ie394xarjsfdxr0"});D(n);var t=n.getAuthenticationUrl(e);t?C(t):f("Invalid Dropbox Id")}),[]),r.useEffect((function(){function n(){return(n=Object(v.a)(m.a.mark((function n(){var e;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.usersGetCurrentAccount();case 2:e=n.sent,u(e),a.setValue("currentUser",e);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}b&&!c&&z&&function(){n.apply(this,arguments)}()}),[b,z]);var A={accessToken:b,authHref:E,currentUser:c,dbx:z,error:d,isAuthenticated:null===z||void 0===z?void 0:z.accessToken,onLogout:function(){y(""),u(null),D(null),a.resetCache({clientId:"ie394xarjsfdxr0"})},parseAcessToken:function(n){var e=w(window.location.hash).access_token;D(new k.Dropbox({accessToken:e,clientId:"ie394xarjsfdxr0"})),a.setValue("accessToken",e),y(e)}};return r.createElement(S.Provider,{value:A},t)}function I(){var n=r.useContext(S);if(void 0===n)throw new Error("useCache must be used within a DropboxContext");return n}var P=function(){var n=O(),e=I(),t=e.dbx,a=e.isAuthenticated,i=Object(r.useState)(!1),o=Object(h.a)(i,2),c=o[0],u=o[1],l=Object(r.useState)(n.getValue("users")||{}),s=Object(h.a)(l,2),d=s[0],f=s[1];function p(){return(p=Object(v.a)(m.a.mark((function n(e){var r,i,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((r=e.filter((function(n){return!d[n]}))).length>0&&t&&a)){n.next=16;break}return u(!0),n.prev=3,n.next=6,t.usersGetAccountBatch({account_ids:r});case 6:return i=n.sent,b(o=i.reduce((function(n,e){return Object(g.a)({},n,Object(y.a)({},e.account_id,e))}),d)),u(!1),n.abrupt("return",o);case 13:n.prev=13,n.t0=n.catch(3),console.error(n.t0);case 16:return n.abrupt("return",d);case 17:case"end":return n.stop()}}),n,null,[[3,13]])})))).apply(this,arguments)}function b(e){f(e),n.setValue("users",e)}return{data:d,isLoading:c,fetchUsers:function(n){return p.apply(this,arguments)}}};function z(n){return n.meta.id}function D(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.substring(0,n.lastIndexOf("."))}function A(n,e,t,r){return n.map((function(n){return t(n)===e?r:n}))}function T(n,e,t){return _.apply(this,arguments)}function _(){return(_=Object(v.a)(m.a.mark((function n(e,t,r){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.filesUpload({autorename:!1,contents:JSON.stringify(t),mode:{".tag":"overwrite"},mute:!0,path:r});case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function L(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.split(".").pop()}function M(n){var e;return null===n||void 0===n?void 0:null===(e=n.sharing_info)||void 0===e?void 0:e.modified_by}function F(n){return Object(b.a)(new Set(n.map(M))).filter(Boolean)}function B(n){return["mp3","m4a","ovw","wav"].includes(L(n))}function U(n){return"folder"===n[".tag"]}function H(n){return U(n)||function(n){return"file"===n[".tag"]}(n)&&B(n.name)}function R(n){return Object(g.a)({},n,{isAudioFile:B(n.name),isFolder:"folder"===n[".tag"],isPlaylist:(e=n.name,"mix"===L(e)),path:n.path_display,type:n[".tag"],user:M(n)});var e}function N(n){return V.apply(this,arguments)}function V(){return(V=Object(v.a)(m.a.mark((function n(e){var t,r,a,i,o,c,u,l=arguments;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"",r=l.length>2?l[2]:void 0,n.next=4,e.filesListFolder({path:t});case 4:return a=n.sent,i=a.cursor,o=a.entries,c=a.hasMore,u={cursor:i,data:o.filter(r?H:U).map(R),hasMore:c,path:t},n.abrupt("return",u);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var J=function(n){var e=n.forceRefresh,t=O(),a=I(),i=a.dbx,o=a.isAuthenticated,c=Object(r.useState)(!1),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(t.getValue("playlists")||[]),f=Object(h.a)(d,2),p=f[0],y=f[1],x=P().fetchUsers;function j(){return(j=Object(v.a)(m.a.mark((function n(e,t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T(i,t,e);case 2:return r=n.sent,S({data:t,meta:r},!0),n.abrupt("return",r.id);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function E(){return(E=Object(v.a)(m.a.mark((function n(e){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0),n.next=3,i.filesDelete({path:e.meta.path_lower});case 3:r=p.filter((function(n){return n.meta.id!==e.meta.id})),y(r),t.setValue("playlists",r),s(!1);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(m.a.mark((function n(e){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return S(e),n.next=3,T(i,e.data,e.meta.path_lower);case 3:t=n.sent,S(Object(g.a)({},e,{meta:t}));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=n.sort((function(n,e){return n.data.title.localeCompare(e.data.title)}));y(e),t.setValue("playlists",e)}function S(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e?[].concat(Object(b.a)(p),[n]):A(p,z(n),z,n);w(t)}return Object(r.useEffect)((function(){if(o&&i&&!l&&(e||0===p.length)){var n=function(){var n=Object(v.a)(m.a.mark((function n(){var e,t,r,a,o,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.filesSearch({path:"",query:".mix"});case 2:return e=n.sent,t=e.matches,n.next=6,Promise.all(t.map((function(n){return i.filesDownload({path:n.metadata.path_display})})));case 6:return r=n.sent,n.next=9,Promise.all(r.map((function(n){return new Promise((function(e){var t=new FileReader;t.addEventListener("loadend",(function(t){var r=t.srcElement.result,a=JSON.parse(r);e({data:a,meta:n})})),t.readAsText(n.fileBlob)}))})));case 9:return a=n.sent,o=F(r),n.next=13,x(o);case 13:c=n.sent,w((a||[]).map((function(n){return Object(g.a)({},n,{meta:Object(g.a)({},n.meta,{user:c[M(n.meta)]})})}))),s(!1);case 17:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();s(!0),n()}}),[i,o]),{data:p,isLoading:l,onCreatePlaylist:function(n,e){return j.apply(this,arguments)},onDeletePlaylist:function(n){return E.apply(this,arguments)},onSavePlaylist:function(n){return k.apply(this,arguments)}}};var K=function(n){var e=n.playlistId,t=I(),a=t.dbx,i=t.isAuthenticated,o=J({dbx:a,isAuthenticated:i}),c=o.data,u=o.isLoading,l=o.onDeletePlaylist,s=o.onSavePlaylist,d=P().fetchUsers,f=Object(r.useState)({}),p=Object(h.a)(f,2),g=p[0],b=p[1],y=c.find((function(n){return n.meta.id===e}));function x(){return(x=Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!y){n.next=2;break}return n.abrupt("return",l(y));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var n;function e(){return(e=Object(v.a)(m.a.mark((function n(e){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(e);case 2:t=n.sent,b(t);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}if(null===y||void 0===y?void 0:null===(n=y.data)||void 0===n?void 0:n.tracks){var t=F(y.data.tracks);t.length>0&&function(n){e.apply(this,arguments)}(t)}}),[y]),{data:y,isLoading:u,onDelete:function(){return x.apply(this,arguments)},onSave:function(n){s(n)},users:g}},W=Object(r.createContext)(),G="loading",$="paused",q="playing",Q="stopped",X={duration:0,isMuted:!1,playlistId:null,position:0,trackId:null,state:Q,volume:1};function Y(n,e){switch(e.type){case"duration":return Object(g.a)({},n,{},e.payload);case"loaded":return"loading"===n.state?Object(g.a)({},n,{position:0,state:q}):n;case"mute":return Object(g.a)({},n,{isMuted:!0});case"pause":return n.state===q?Object(g.a)({},n,{state:$}):n;case"play":return Object(g.a)({},n,{},e.payload,{state:G});case"position":return Object(g.a)({},n,{},e.payload);case"resume":return Object(g.a)({},n,{state:q});case"stop":return Object(g.a)({},n,{position:0,state:Q});case"tick":return Object(g.a)({},n,{position:n.position+1e3});case"unmute":return Object(g.a)({},n,{isMuted:!1});case"volume":return Object(g.a)({},n,{},e.payload,{isMuted:0===e.payload.volume});default:throw new Error}}function Z(n){var e=n.children,t=n.initialState,i=void 0===t?{}:t,o=Object(r.useReducer)(Y,Object(g.a)({},X,{},i)),c=Object(h.a)(o,2),u=c[0],l=u.duration,s=u.isMuted,d=u.playlistId,f=u.position,p=u.state,b=u.trackId,y=u.volume,x=c[1],j=Object(r.useRef)(),E=I().dbx,O=K({playlistId:d}),k=Object(r.useMemo)((function(){var n,e,t=b?null===O||void 0===O?void 0:null===(n=O.data)||void 0===n?void 0:n.data.tracks.findIndex((function(n){return n.id===b})):(null===O||void 0===O?void 0:null===(e=O.data)||void 0===e?void 0:e.data)?0:-1,r=t>=0?O.data.data.tracks[t]:null;return{hasNext:!!r&&t<O.data.data.tracks.length-1,hasPrevious:!!r&&t>0,track:r,trackIndex:t}}),[b,d]),w=k.hasNext,S=k.hasPrevious,C=k.track,P=k.trackIndex;function z(){w&&x({type:"play",payload:{playlistId:d,trackId:O.data.data.tracks[P+1].id}})}function A(){S&&x({type:"play",payload:{playlistId:d,trackId:O.data.data.tracks[P-1].id}})}function T(){p!==$&&x({type:"pause"})}function _(n){var e=n.playlistId,t=n.trackId;x({type:"play",payload:{playlistId:e,trackId:t}})}function L(n){C&&(j.current.currentTime=n/1e3,x({type:"position",payload:{position:n}}))}function M(){p!==Q&&x({type:"stop"})}if(Object(r.useEffect)((function(){function n(){return(n=Object(v.a)(m.a.mark((function n(){var e,t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=j.current){n.next=3;break}return n.abrupt("return");case 3:if(!C||p!==G){n.next=12;break}return n.next=6,E.filesGetTemporaryLink({path:C.path_lower});case 6:t=n.sent,e.setAttribute("src",t.link),e.play(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing"),n.next=13;break;case 12:C&&p===q?(e.play(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing")):p===$?(e.pause(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="paused")):p===Q&&(e.pause(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="none"),e.currentTime=0);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[p,b,d]),Object(r.useEffect)((function(){if("playing"===p){var n=setInterval((function(){x({type:"tick"})}),1e3);return function(){return clearInterval(n)}}})),"mediaSession"in navigator)try{var F,B,U,H,R,N;navigator.mediaSession.metadata=new MediaMetadata({title:D(null===C||void 0===C?void 0:C.name),artist:(null===O||void 0===O?void 0:null===(F=O.data)||void 0===F?void 0:null===(B=F.data)||void 0===B?void 0:B.author)||(null===O||void 0===O?void 0:null===(U=O.data)||void 0===U?void 0:null===(H=U.data)||void 0===H?void 0:H.title),album:null===O||void 0===O?void 0:null===(R=O.data)||void 0===R?void 0:null===(N=R.data)||void 0===N?void 0:N.title,artwork:[{src:"android-icon-96x96.png",sizes:"96x96",type:"image/png"},{src:"android-icon-144x144.png",sizes:"144x144",type:"image/png"},{src:"android-icon-180x180.png",sizes:"180x180",type:"image/png"}]}),navigator.mediaSession.setActionHandler("play",_),navigator.mediaSession.setActionHandler("pause",T),navigator.mediaSession.setActionHandler("seekbackward",L),navigator.mediaSession.setActionHandler("seekforward",L),navigator.mediaSession.setActionHandler("previoustrack",A),navigator.mediaSession.setActionHandler("nexttrack",z)}catch(J){}var V={duration:l,hasNext:w,hasPrevious:S,isMuted:s,onMute:function(){x({type:"mute"});var n=j.current;n&&(n.muted=!0)},onNext:z,onPause:T,onPlay:_,onPrevious:A,onResume:function(){p===$&&x({type:"resume"})},onSeek:L,onStop:M,onUnmute:function(){x({type:"unmute"});var n=j.current;n&&(n.muted=!1)},onVolumeChange:function(n){x({type:"volume",payload:{volume:n}});var e=j.current;e&&(e.volume=n,e.muted=0===n)},playlist:O,position:f,state:p,track:C,volume:y};return a.a.createElement(W.Provider,{value:V},e,(C||p!==Q)&&a.a.createElement("audio",{onDurationChange:function(n){var e=j.current;e&&x({type:"duration",payload:{duration:1e3*e.duration}})},onEnded:function(n){w?z():M()},onPlay:function(n){x({type:"loaded"})},onProgress:function(n){var e=j.current;e&&x({type:"position",payload:{position:1e3*e.currentTime}})},ref:j}))}function nn(){var n=Object(r.useContext)(W);if(void 0===n)throw new Error("useAudio must be used within a AudioProvider");return n}var en="/dropbox-demo-tape-web";function tn(n){return"".concat(en).concat(n)}var rn=t(3);function an(){var n=Object(rn.a)(["\n      font-size: 14px;\n      font-weight: 400;\n    "]);return an=function(){return n},n}function on(){var n=Object(rn.a)(["\n      font-size: 16px;\n    "]);return on=function(){return n},n}var cn={background:"#242A31",backgroundLight:"#2D323C",disabled:"#656565",error:"#E7777F",inherit:"inherit",primary:"#D2D2D2",secondary:"#b3b3b3",success:"#A1CA7E",transparent:"transparent",white:"#FFFFFF"},un={color:Object(g.a)({},cn,{highlight:"#5EB1BF",bgHighlight:cn.primary+"11"}),typography:{base:Object(u.b)(on()),sub:Object(u.b)(an())},space:{small:5,medium:10,large:20},transition:"all 250ms ease-in"};function ln(){var n=Object(rn.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ",";\n\n  :hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return ln=function(){return n},n}var sn=u.c.a(ln(),(function(n){return n.theme.color.background}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.white}),(function(n){return n.theme.transition}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.background}),(function(n){return n.disabled?"\n  color: ".concat(n.theme.color.disabled,";\n  cursor: unset;\n  border-color: ").concat(n.theme.color.disabled,";\n\n  :hover {\n    background-color: ").concat(n.theme.color.background,";\n    color: ").concat(n.theme.color.disabled,";\n  }\n"):""}));var dn=function(n){return a.a.createElement(sn,Object.assign({as:n.to?c.a:void 0},n))};function fn(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n"]);return fn=function(){return n},n}var pn=u.c.div(fn());var mn=function(){var n=I(),e=n.authHref,t=n.isAuthenticated,i=n.parseAcessToken;return!t&&window.location.hash.includes("access_token")&&i(),t?a.a.createElement(c.b,{noThrow:!0,to:en}):a.a.createElement(pn,null,a.a.createElement("h1",null,"Welcome"),a.a.createElement(r.Fragment,null,a.a.createElement(dn,{href:e},"Authenticate With Dropbox")))};function vn(){var n=Object(rn.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ",";\n\n  :hover,\n  :focus {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return vn=function(){return n},n}var hn=u.c.button(vn(),(function(n){return n.theme.color.background}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.white}),(function(n){return n.theme.transition}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.background}),(function(n){return n.disabled?"\n    color: ".concat(n.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(n.theme.color.disabled,";\n\n    :hover, :focus {\n      background-color: ").concat(n.theme.color.background,";\n      color: ").concat(n.theme.color.disabled,";\n    }\n  "):""})),gn=t(59),bn=t.n(gn);function yn(){var n=Object(rn.a)(["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return yn=function(){return n},n}var xn=u.c.button(yn(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.highlight})),jn=function(n){var e=n.name,t=void 0===e?"Home":e,r=n.onClick,i=n.path;return a.a.createElement(xn,{onClick:function(){return r(i)}},t)};function En(){var n=Object(rn.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n"]);return En=function(){return n},n}var On=u.c.div(En());var kn=function(n){var e=n.onClick,t=(n.onSort,n.path),i=(void 0===t?"":t).split("/").map((function(n,t,i){var o=i.slice(0,t+1).join("/");return a.a.createElement(r.Fragment,{key:t},0!==t&&a.a.createElement("span",null,"/"),a.a.createElement(jn,{name:n||"Home",onClick:e,path:o}))}));return a.a.createElement(On,null,a.a.createElement(bn.a,null)," ",i)},wn=t(77),Sn=t(62),Cn=t.n(Sn),In=t(60),Pn=t.n(In),zn=t(61),Dn=t.n(zn);function An(){var n=Object(rn.a)(["\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return An=function(){return n},n}function Tn(){var n=Object(rn.a)(["\n  ","\n"]);return Tn=function(){return n},n}function _n(){var n=Object(rn.a)(["\n  ","\n"]);return _n=function(){return n},n}function Ln(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n"]);return Ln=function(){return n},n}var Mn=u.c.div(Ln()),Fn=u.c.span(_n(),(function(n){return n.theme.typography.base})),Bn=u.c.span(Tn(),(function(n){return n.theme.typography.sub})),Un=u.c.button(An(),(function(n){return n.theme.color[n.isSelected?"bgHighlight":"background"]}),(function(n){return n.theme.color.bgHighlight}),(function(n){return n.theme.color[n.isSelected?"highlight":"inherit"]}),(function(n){return n.theme.space.medium}),(function(n){return n.theme.space.large}),(function(n){return n.theme.color.primary}));var Hn=function(n){var e,t,r=n.entry,i=n.onClick,o=n.isSelected,c=void 0!==o&&o,u=c?Pn.a:r.isFolder?Dn.a:Cn.a;return a.a.createElement(Un,{isSelected:c,onClick:function(){return i(r)}},a.a.createElement(Mn,null,a.a.createElement(u,null),a.a.createElement(Fn,null,r.name),"file"===r.type&&a.a.createElement(Bn,null,Object(wn.a)(new Date(r.server_modified))," ago"),"file"===r.type&&a.a.createElement(Bn,null,null===(e=r.user)||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.display_name)))};function Rn(){var n=Object(rn.a)(["\n  liststyletype: none;\n  margin: 0;\n  marginblockend: 0;\n  marginblockstart: 0;\n  padding: 0;\n  paddinginlinestart: 0;\n  webkitmarginafter: 0;\n  webkitmarginbefore: 0;\n  webkitpaddingstart: 0;\n  ","\n"]);return Rn=function(){return n},n}function Nn(){var n=Object(rn.a)(["\n  ","\n  color: ",";\n  font-size: 18px;\n  padding: 20px;\n"]);return Nn=function(){return n},n}var Vn=function(n,e){return e},Jn=u.c.div(Nn(),(function(n){return n.theme.typography.base}),(function(n){return n.theme.color.secondary})),Kn=u.c.ul(Rn(),(function(n){return(e=n.gap)?"\n        display: grid;\n        grid-gap: ".concat(e,"px;\n      "):"";var e}));function Wn(n){var e=n.emptyMessage,t=n.isLoading,r=n.itemRenderer,i=n.items,o=n.gap,c=n.getKey,u=void 0===c?Vn:c;if(!t&&0===i.length&&e)return a.a.createElement(Jn,null,e);var l=i.map((function(n,e){return a.a.createElement("li",{key:u(n,e)},r(n,e))}));return a.a.createElement(Kn,{gap:o},l)}Wn.defaultProps={getKey:Vn};var Gn=Wn,$n=t(123);function qn(){var n=Object(rn.a)(["\n  height: ",";\n  width: ",";\n"]);return qn=function(){return n},n}var Qn=u.c.div(qn(),(function(n){return n.height}),(function(n){return n.width}));function Xn(){var n=Object(rn.a)(["\n  margin-bottom: -4px;\n"]);return Xn=function(){return n},n}var Yn=u.c.div(Xn());var Zn=function(n){var e=n.isLoading;return a.a.createElement(Yn,null,e?a.a.createElement($n.a,null):a.a.createElement(Qn,{height:"4px"}))},ne=t(64),ee=t.n(ne),te=t(63),re=t.n(te);function ae(){var n=Object(rn.a)(["\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return ae=function(){return n},n}var ie=u.c.button(ae(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.highlight}));var oe=function(n){var e=n.children,t=n.onClick,r=n.sortDir,i="asc"===r?re.a:"desc"===r?ee.a:null;return a.a.createElement(ie,{onClick:t},a.a.createElement("span",null,e),i&&a.a.createElement(i,null))};var ce=function(n){var e=n.folder,t=void 0===e?"":e,a=n.showFiles,i=void 0!==a&&a,o=n.sortBy,c=void 0===o?"":o,u=n.sortDir,l=void 0===u?"":u,s=I().dbx,d=Object(r.useState)({}),f=Object(h.a)(d,2),p=f[0],b=f[1],x=Object(r.useState)(!1),j=Object(h.a)(x,2),E=j[0],O=j[1],k=P().fetchUsers;Object(r.useEffect)((function(){function n(){return(n=Object(v.a)(m.a.mark((function n(){var e,r,a,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return O(!0),n.next=3,N(s,t,i);case 3:return e=n.sent,r=F(e.data),n.next=7,k(r);case 7:a=n.sent,o=Object(g.a)({},e,{data:e.data.map((function(n){return Object(g.a)({},n,{user:a[M(n)]})}))}),b(Object(y.a)({},t,o)),O(!1);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}s&&function(){n.apply(this,arguments)}()}),[s,t]);var w=p[t]||{},S=w.cursor,C=w.data,z=void 0===C?[]:C,D=w.hasMore,A=z;return c&&l&&("name"===c?A=z.sort(function(n){var e="asc"===n?-1:1;return function(n,t){return(n.type===t.type||"folder"!==n.type&&"folder"!==t.type?n.name.localeCompare(t.name):"folder"===t.type?1:-1)*e}}(l)):"modified"===c?A=z.sort(function(n){var e="asc"===n?-1:1;return function(n,t){return(n.type===t.type||"folder"!==n.type&&"folder"!==t.type?new Date(t.server_modified)-new Date(n.server_modified):"folder"===t.type?1:-1)*e}}(l)):"modifiedBy"===c&&(A=z.sort(function(n){var e="asc"===n?-1:1;return function(n,t){var r,a,i,o;return(n.type===t.type||"folder"!==n.type&&"folder"!==t.type?null===(r=n.user)||void 0===r?void 0:null===(a=r.name)||void 0===a?void 0:a.display_name.localeCompare(null===(i=t.user)||void 0===i?void 0:null===(o=i.name)||void 0===o?void 0:o.display_name):"folder"===t.type?1:-1)*e}}(l)))),{cursor:S,files:A,folder:t,hasMore:D,isLoading:E}};function ue(){var n=Object(rn.a)(["\n  display: grid;\n"]);return ue=function(){return n},n}function le(){var n=Object(rn.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n"]);return le=function(){return n},n}var se=u.c.div(le()),de=u.c.div(ue());var fe=function(n){var e=n.onPathChange,t=n.onSelectionChange,i=n.selectedEntries,o=void 0===i?[]:i,c=n.showFiles,u=void 0!==c&&c,l=Object(r.useState)(""),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(""),m=Object(h.a)(p,2),v=m[0],g=m[1],y=Object(r.useState)(""),x=Object(h.a)(y,2),j=x[0],E=x[1],O=ce({folder:d,showFiles:u,sortBy:v,sortDir:j}),k=O.files,w=O.isLoading;function S(n){"folder"===n.type?(f(n.path),e&&e(n.path)):u&&(o.some((function(e){return e.id===n.id}))?t(o.filter((function(e){return e.id!==n.id}))):t([].concat(Object(b.a)(o),[n])))}function C(n){n!==v?(g(n),E("desc")):"desc"===j?E("asc"):(E(""),g(""))}return a.a.createElement(de,null,a.a.createElement(kn,{onClick:f,path:d}),a.a.createElement(Qn,{height:"10px"}),a.a.createElement(se,null,a.a.createElement("span",null),a.a.createElement(oe,{onClick:function(){return C("name")},sortDir:"name"===v?j:null},"Name"),a.a.createElement(oe,{onClick:function(){return C("modified")},sortDir:"modified"===v?j:null},"Modified"),a.a.createElement(oe,{onClick:function(){return C("modifiedBy")},sortDir:"modifiedBy"===v?j:null},"Modified By")),a.a.createElement(Zn,{isLoading:w}),a.a.createElement(Gn,{emptyMessage:"There are no files here",isLoading:w,items:k,itemRenderer:function(n){return a.a.createElement(Hn,{entry:n,isSelected:o.some((function(e){return e.path_lower===n.path_lower})),onClick:S})}}))},pe=t(46);function me(){var n=Object(rn.a)(["\n  color: ",";\n  position: relative;\n\n  :focus-within {\n    color: ",";\n  }\n\n  ","\n"]);return me=function(){return n},n}function ve(){var n=Object(rn.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return ve=function(){return n},n}function he(){var n=Object(rn.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n"]);return he=function(){return n},n}function ge(){var n=Object(rn.a)(["\n  ","\n  font-size: 14px;\n  font-weight: 700;\n"]);return ge=function(){return n},n}function be(){var n=Object(rn.a)(["\n  border-color: ",";\n  color: ",";\n"]);return be=function(){return n},n}var ye=Object(u.b)(be(),(function(n){return n.theme.color.error}),(function(n){return n.theme.color.error})),xe=u.c.span(ge(),ye),je=u.c.input(he(),(function(n){return n.theme.color.background}),(function(n){return n.theme.color.primary})),Ee=u.c.div(ve(),(function(n){return n.theme.color.background})),Oe=u.c.label(me(),(function(n){return n.theme.color.secondary}),(function(n){return n.theme.color.white}),(function(n){return n.hasError?ye:""}));var ke=function(n){var e=n.error,t=n.hasError,r=n.onChange,i=n.title,o=n.value,c=Object(pe.a)(n,["error","hasError","onChange","title","value"]);return a.a.createElement(Oe,{hasError:t},a.a.createElement(je,Object.assign({},c,{hasError:t,onChange:function(n){return r(n.target.value)},type:"text",value:o})),a.a.createElement(Ee,null,i),e&&a.a.createElement(xe,null,e))};function we(){var n=Object(rn.a)(["\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n"]);return we=function(){return n},n}function Se(){var n=Object(rn.a)([""]);return Se=function(){return n},n}function Ce(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n"]);return Ce=function(){return n},n}function Ie(){var n=Object(rn.a)(["\n  border: 1px solid ",";\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n"]);return Ie=function(){return n},n}function Pe(){var n=Object(rn.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return Pe=function(){return n},n}function ze(){var n=Object(rn.a)(["\n  overflow-y: scroll;\n  height: 470px;\n"]);return ze=function(){return n},n}var De=u.c.div(ze()),Ae=u.c.div(Pe(),(function(n){return n.theme.color.background})),Te=u.c.div(Ie(),(function(n){return n.theme.color.primary})),_e=u.c.div(Ce()),Le=u.c.h2(Se()),Me=u.c.form(we());var Fe=function(n){var e=n.navigate,t=Object(r.useState)(""),i=Object(h.a)(t,2),o=i[0],c=i[1],u=Object(r.useState)(""),l=Object(h.a)(u,2),s=l[0],d=l[1],f=Object(r.useState)("/"),p=Object(h.a)(f,2),g=p[0],b=p[1],y=J({}).onCreatePlaylist,x=!!o&&!!s&&!!g;function j(){return(j=Object(v.a)(m.a.mark((function n(t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,y("".concat(g,"/").concat(s,".mix"),{artist:o,title:s,tracks:[]});case 3:return r=n.sent,e(tn("/playlist/".concat(r))),n.abrupt("return",!1);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return a.a.createElement(Me,{onSubmit:x?function(n){return j.apply(this,arguments)}:void 0},a.a.createElement(_e,null,a.a.createElement(Le,null,"Add Playlist"),a.a.createElement(hn,{disabled:!x,type:"submit"},"Save"),a.a.createElement(dn,{to:en},"Cancel")),a.a.createElement(ke,{onChange:d,title:"Title",value:s}),a.a.createElement(ke,{onChange:c,title:"Artist",value:o}),a.a.createElement(Te,null,a.a.createElement(De,null,a.a.createElement(fe,{onPathChange:b})),a.a.createElement(Ae,null,"Location")))},Be=t(44);function Ue(){var n=Object(rn.a)(["\n  color: ",";\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n  }\n"]);return Ue=function(){return n},n}var He=Object(u.c)(c.a)(Ue(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.highlight})),Re="(min-width: 660px) and (max-width: 1023px)",Ne="(min-width: 1024px)";var Ve=function(){return function(n,e,t){var a=n.map((function(n){return window.matchMedia(n)})),i=function(){var n=a.findIndex((function(n){return n.matches}));return"undefined"!==typeof e[n]?e[n]:t},o=Object(r.useState)(i),c=Object(h.a)(o,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var n=function(){return l(i)};return a.forEach((function(e){return e.addListener(n)})),function(){return a.forEach((function(e){return e.removeListener(n)}))}}),[]),u}([Re,Ne],["medium","large"],"small")};function Je(){var n=Object(rn.a)(["\n  display: grid;\n"]);return Je=function(){return n},n}function Ke(){var n=Object(rn.a)(["\n  ","\n  align-items: center;\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return Ke=function(){return n},n}function We(){var n=Object(rn.a)(["\n  ","\n  color: ",";\n"]);return We=function(){return n},n}function Ge(){var n=Object(rn.a)(["\n  ","\n  text-align: right;\n"]);return Ge=function(){return n},n}function $e(){var n=Object(rn.a)(["\n  color: ",";\n"]);return $e=function(){return n},n}function qe(){var n=Object(rn.a)([""]);return qe=function(){return n},n}function Qe(){var n=Object(rn.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n"]);return Qe=function(){return n},n}var Xe=u.c.div(Qe()),Ye=u.c.h2(qe()),Ze=u.c.div($e(),(function(n){return n.theme.color.disabled})),nt=u.c.span(Ge(),(function(n){return n.theme.typography.sub})),et=u.c.span(We(),(function(n){return n.theme.typography.sub}),(function(n){return n.theme.color.secondary})),tt=u.c.div(Ke(),(function(n){return n.theme.typography.base}),(function(n){return n.theme.color[n.isPlaying?"bgHighlight":"background"]}),(function(n){return n.theme.color.bgHighlight}),(function(n){return n.theme.color[n.isPlaying?"highlight":"inherit"]}),(function(n){return n.theme.space.medium}),(function(n){return n.theme.space.large}),(function(n){return n.theme.color.primary})),rt=u.c.div(Je());var at=function(){var n=J({forceRefresh:!0}),e=Ve();return a.a.createElement("div",null,a.a.createElement(Xe,null,a.a.createElement(dn,{to:"new"},"Add")),a.a.createElement(Zn,{isLoading:n.isLoading}),a.a.createElement(Gn,{getKey:function(n){return n.meta.id},items:n.data,itemRenderer:function(n){var t,r,i=null===(t=n.meta.user)||void 0===t?void 0:null===(r=t.name)||void 0===r?void 0:r.display_name;return a.a.createElement(He,{to:"playlist/".concat(n.meta.id)},a.a.createElement(tt,null,a.a.createElement(rt,null,a.a.createElement(Ye,null,n.data.title),a.a.createElement(et,null,n.data.artist||n.meta.path_display)),"small"!==e&&a.a.createElement(nt,null,"Updated"," ",Object(Be.a)(new Date(n.meta.server_modified),new Date),a.a.createElement(Ze,null,Boolean(i)?"by ":"",i))))}}))};var it=function(){return a.a.createElement(at,null)},ot=t(65),ct=t.n(ot),ut=t(125),lt=t(126);function st(){var n=Object(rn.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  height: ","px;\n  overflow: hidden;\n  position: relative;\n  width: ","px;\n"]);return st=function(){return n},n}function dt(){var n=Object(rn.a)(["\n  font-size: 16px;\n"]);return dt=function(){return n},n}function ft(){var n=Object(rn.a)([""]);return ft=function(){return n},n}var pt=u.c.img(ft()),mt=u.c.span(dt()),vt=u.c.div(st(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.background}),(function(n){return n.size}),(function(n){return n.size}));var ht=function(n){var e=n.initials,t=n.name,i=n.size,o=void 0===i?36:i,c=n.url,u=Object(r.useState)(!1),l=Object(h.a)(u,2),s=l[0],d=l[1];return Object(r.useEffect)((function(){c&&s&&d(!1)}),[c]),a.a.createElement(vt,{size:o},c&&!s?a.a.createElement(pt,{alt:t||e,height:o,onError:function(){return d(!0)},src:c,width:o}):a.a.createElement(mt,null,e))};function gt(){var n=Object(rn.a)(["\n  align-items: center;\n  background-color: ",";\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n"]);return gt=function(){return n},n}function bt(){var n=Object(rn.a)(["\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n"]);return bt=function(){return n},n}function yt(){var n=Object(rn.a)(["\n  padding-left: 10px;\n"]);return yt=function(){return n},n}function xt(){var n=Object(rn.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n"]);return xt=function(){return n},n}var jt=u.c.div(xt()),Et=u.c.h1(yt()),Ot=u.c.button(bt()),kt=u.c.div(gt(),(function(n){return n.theme.color.backgroundLight}));var wt=function(n){n.location;var e=Object(r.useState)(null),t=Object(h.a)(e,2),i=t[0],o=t[1],c=I(),u=c.currentUser,l=c.onLogout;return a.a.createElement(kt,null,a.a.createElement(He,{to:en},a.a.createElement(jt,null,a.a.createElement(ct.a,{fontSize:"large"}),a.a.createElement(Et,null,"Demo Tape"))),a.a.createElement("span",null),u&&a.a.createElement(r.Fragment,null,a.a.createElement(Ot,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(n){o(n.currentTarget)}},a.a.createElement(ht,{initials:null===u||void 0===u?void 0:u.name.abbreviated_name,name:null===u||void 0===u?void 0:u.name.display_name,url:null===u||void 0===u?void 0:u.profile_photo_url})),a.a.createElement(ut.a,{elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},id:"user-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){o(null)}},a.a.createElement(lt.a,{onClick:function(){l()}},"Logout"))))},St=t(68),Ct=t.n(St),It=t(43),Pt=t.n(It),zt=t(70),Dt=t.n(zt),At=t(69),Tt=t.n(At);function _t(){var n=Object(rn.a)(["\n  background-color: ",";\n  border: ",";\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  transition: ",";\n  width: ","px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ",";\n  }\n\n  ","\n"]);return _t=function(){return n},n}var Lt=u.c.button(_t(),(function(n){return n.theme.color.background}),(function(n){return n.hideBorder?"none":"1px solid white"}),(function(n){return n.size||30}),(function(n){return n.theme.transition}),(function(n){return n.size||30}),(function(n){return n.theme.color.background}),(function(n){return n.disabled?"\n    color: ".concat(n.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(n.theme.color.transparent,";\n\n    :hover, :focus {\n      background-color: ").concat(n.theme.color.background,";\n      color: ").concat(n.theme.color.disabled,";\n    }\n  "):""}));function Mt(n){var e=n/1e3,t=Math.floor(e%60);return Ft(Math.floor(e/60))+":"+Ft(t)}function Ft(n){var e=n.toString();return n<10?"0"+e:e}function Bt(){var n=Object(rn.a)(["\n  align-items: center;\n  color: ",";\n  display: grid;\n  grid-template-columns: 80px 1fr 80px;\n  grid-gap: 5px;\n"]);return Bt=function(){return n},n}function Ut(){var n=Object(rn.a)(["\n  text-align: right;\n"]);return Ut=function(){return n},n}var Ht=u.c.span(Ut()),Rt=u.c.div(Bt(),(function(n){return n.theme.color[n.isDisabled?"disabled":"primary"]}));var Nt=function(){var n=nn(),e=Object(r.useState)(0),t=Object(h.a)(e,2),i=t[0],o=t[1],c=Object(r.useState)(!1),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useRef)(),f=l?i:n.position;return a.a.createElement(Rt,{isDisabled:!n.track},a.a.createElement(Ht,null,Mt(f)),a.a.createElement("input",{type:"range",disabled:!n.track,min:0,max:n.duration,onChange:function(n){o(d.current.value)},onMouseDown:function(n){s(!0)},onMouseUp:function(e){!function(e){s(!1);var t=parseInt(d.current.value);isNaN(t)||n.onSeek(t)}()},ref:d,value:f}),a.a.createElement("span",null,Mt(n.duration)))};function Vt(){var n=Object(rn.a)(["\n  display: grid;\n  grid-gap: 2px;\n"]);return Vt=function(){return n},n}function Jt(){var n=Object(rn.a)(["\n  ","\n  font-weight: 500;\n"]);return Jt=function(){return n},n}function Kt(){var n=Object(rn.a)(["\n  ","\n  color: ",";\n"]);return Kt=function(){return n},n}var Wt=u.c.div(Kt(),(function(n){return n.theme.typography.sub}),(function(n){return n.theme.color.disabled})),Gt=u.c.div(Jt(),(function(n){return n.theme.typography.base})),$t=u.c.div(Vt());var qt=function(n){var e,t,r,i,o=n.playlist,c=n.track;return a.a.createElement($t,null,a.a.createElement(Gt,null,D(null===c||void 0===c?void 0:c.name)),a.a.createElement(Wt,null,(null===o||void 0===o?void 0:null===(e=o.data)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.author)||(null===o||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.title)))},Qt=t(66),Xt=t.n(Qt),Yt=t(67),Zt=t.n(Yt);function nr(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 20px 1fr;\n  padding: 0 10px;\n"]);return nr=function(){return n},n}function er(){var n=Object(rn.a)(["\n  width: 100%;\n"]);return er=function(){return n},n}function tr(){var n=Object(rn.a)(["\n  cursor: pointer;\n\n  :hover {\n    color: ",";\n  }\n"]);return tr=function(){return n},n}var rr=u.c.div(tr(),(function(n){return n.theme.color.highlight})),ar=u.c.input(er()),ir=u.c.div(nr());var or=function(){var n=nn(),e=n.isMuted,t=n.onMute,r=n.onUnmute,i=n.onVolumeChange,o=n.volume,c=0===o||e?Xt.a:Zt.a;return a.a.createElement(ir,null,a.a.createElement(rr,{as:c,fontSize:"small",onClick:e?r:t}),a.a.createElement(ar,{max:1,min:0,onChange:function(n){return i(n.currentTarget.value)},step:.01,type:"range",value:e?0:o}))};function cr(){var n=Object(rn.a)(["\n  align-items: center;\n  background-color: ",";\n  bottom: 0;\n  display: grid;\n  grid-template-columns: ",";\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n"]);return cr=function(){return n},n}function ur(){var n=Object(rn.a)(["\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n"]);return ur=function(){return n},n}function lr(){var n=Object(rn.a)(["\n  display: flex;\n  justify-content: center;\n"]);return lr=function(){return n},n}function sr(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n"]);return sr=function(){return n},n}var dr=u.c.div(sr()),fr=u.c.div(lr()),pr=u.c.div(ur()),mr=u.c.div(cr(),(function(n){return n.theme.color.backgroundLight}),(function(n){return n.isSmall?"60px 1fr":"minmax(200px, 0.5fr) 1fr 150px"}));var vr=function(){var n=nn(),e=Ve(),t=!!n.track,r=n.state===q,i=n.state===G,o="small"===e;if(o&&!t)return null;var c=r?a.a.createElement(Lt,{"aria-label":"Pause",onClick:n.onPause,size:40},a.a.createElement(Ct.a,null)):a.a.createElement(Lt,{"aria-label":"Play",disabled:i||!t,onClick:function(){return n.onResume()},size:40},a.a.createElement(Pt.a,null));return a.a.createElement(mr,{isSmall:o},o&&c,a.a.createElement(qt,{playlist:n.playlist,track:n.track}),!o&&a.a.createElement(fr,null,a.a.createElement(pr,null,a.a.createElement(dr,null,a.a.createElement(Lt,{"aria-label":"Previous",disabled:!n.hasPrevious,hideBorder:!0,onClick:n.onPrevious},a.a.createElement(Tt.a,{fontSize:"small"})),c,a.a.createElement(Lt,{"aria-label":"Next",disabled:!n.hasNext,hideBorder:!0,onClick:n.onNext},a.a.createElement(Dt.a,{fontSize:"small"}))),a.a.createElement(Nt,null))),!o&&a.a.createElement(or,null))};function hr(){var n=Object(rn.a)(["\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n"]);return hr=function(){return n},n}function gr(){var n=Object(rn.a)(["\n  background-color: ",";\n  overflow-y: scroll;\n  padding-bottom: 113px;\n"]);return gr=function(){return n},n}var br=u.c.main(gr(),(function(n){return n.theme.color.background})),yr=u.c.div(hr());var xr=function(n){var e=n.children,t=n.location;return I().isAuthenticated||t.pathname.includes("/auth")?a.a.createElement(yr,null,a.a.createElement(wt,{location:t}),a.a.createElement(br,null,e),a.a.createElement(vr,null)):a.a.createElement(c.b,{noThrow:!0,to:"auth"})};var jr=function(n){var e=n.message,t=n.onClick,i=Object(pe.a)(n,["message","onClick"]),o=Object(r.useState)(!1),c=Object(h.a)(o,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){l(!1)}),2e3);return function(){clearTimeout(n)}}),[u]),u?a.a.createElement(hn,{onBlur:function(){return l(!1)},onClick:t},e||"Are you sure?"):a.a.createElement(hn,Object.assign({onClick:function(){l(!0)}},i))};function Er(){var n=Object(rn.a)(["\n  color: ",";\n"]);return Er=function(){return n},n}function Or(){var n=Object(rn.a)(["\n  display: grid;\n"]);return Or=function(){return n},n}function kr(){var n=Object(rn.a)(["\n  ","\n  color: ",";\n"]);return kr=function(){return n},n}var wr=u.c.div(kr(),(function(n){return n.theme.typography.sub}),(function(n){return n.theme.color.disabled})),Sr=u.c.div(Or()),Cr=u.c.span(Er(),(function(n){return n.theme.color.primary}));var Ir=function(n){var e=n.playlist;return a.a.createElement(Sr,null,a.a.createElement("h1",null,e.data.title),e.data.artist&&a.a.createElement(wr,null,"By ",a.a.createElement(Cr,null,e.data.artist)))},Pr=t(47),zr=t(74),Dr=t.n(zr),Ar=t(71),Tr=t.n(Ar),_r=t(72),Lr=t.n(_r);function Mr(){var n=Object(rn.a)(["\n","\nbackground-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n  \n  :hover {\n    background-color: ","11;\n    \n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n"]);return Mr=function(){return n},n}function Fr(){var n=Object(rn.a)(["\n  color: ",";\n"]);return Fr=function(){return n},n}function Br(){var n=Object(rn.a)(["\n  color: ",";\n  display: grid;\n  font-size: 11px;\n  line-height: 15px;\n  text-align: right;\n"]);return Br=function(){return n},n}function Ur(){var n=Object(rn.a)(["\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 30px;\n  width: 30px;\n"]);return Ur=function(){return n},n}function Hr(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  line-height: 30px;\n  grid-gap: 5px;\n  grid-template-columns: ","px 20px 1fr ",";\n  padding: ","px;\n"]);return Hr=function(){return n},n}var Rr=u.c.div(Hr(),(function(n){return"small"===n.size?35:40}),(function(n){return"small"===n.size||n.isEditable?"":"auto"}),(function(n){return"small"===n.size?"".concat(n.theme.space.medium,"px ").concat(n.theme.space.small):n.theme.space.medium})),Nr=u.c.span(Ur(),(function(n){return n.isPlaying?"white":"transparent"})),Vr=u.c.span(Br(),(function(n){return n.theme.color.secondary})),Jr=u.c.span(Fr(),(function(n){return n.theme.color.disabled})),Kr=u.c.button(Mr(),(function(n){return n.theme.typography.base}),(function(n){return n.theme.color[n.isPlaying?"bgHighlight":"background"]}),(function(n){return n.theme.color.bgHighlight}),(function(n){return n.theme.color[n.isPlaying?"highlight":"inherit"]}),(function(n){return n.theme.color.primary}));var Wr=function(n){var e=n.index,t=n.isEditable,r=n.isPlaying,i=n.onClick,o=n.onDelete,c=n.track,u=n.user,l=Ve();return a.a.createElement(Kr,{isPlaying:r,onClick:t?void 0:function(){return i(c)}},a.a.createElement(Rr,{isEditable:t,size:l},t?a.a.createElement(Lt,{onClick:function(){return o(c)}},a.a.createElement(Tr.a,{fontSize:"small"})):a.a.createElement(Nr,{id:"play",isPlaying:r},r?a.a.createElement(Lr.a,{fontSize:"small"}):a.a.createElement(Pt.a,{fontSize:"small"})),a.a.createElement("span",null,e,"."),a.a.createElement("span",null,D(c.name)),"small"!==l&&!t&&a.a.createElement(Vr,null,a.a.createElement("span",null,"Updated"," ",Object(Be.a)(new Date(c.server_modified),new Date)),u&&a.a.createElement(Jr,null,"by ",u.name.display_name))))};function Gr(){var n=Object(rn.a)(["\n  position: relative;\n"]);return Gr=function(){return n},n}function $r(){var n=Object(rn.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n"]);return $r=function(){return n},n}var qr=u.c.div($r(),(function(n){return n.theme.color.primary})),Qr=u.c.div(Gr());var Xr=a.a.memo((function(n){var e=n.onTrackClick,t=n.onTrackDelete,r=n.playingId,i=n.tracks;return a.a.createElement(Gn,{getKey:function(n){return n.id},items:i,itemRenderer:function(n,i){return a.a.createElement(Pr.b,{draggableId:n.id,index:i},(function(o){return a.a.createElement(Qr,Object.assign({ref:o.innerRef},o.draggableProps),a.a.createElement(Wr,{index:i+1,isEditable:!0,isPlaying:r===n.id,onClick:e,onDelete:t,track:n}),a.a.createElement(qr,o.dragHandleProps,a.a.createElement(Dr.a,null)))}))}})}),(function(n,e){return n.playingId===e.playingId&&n.tracks.map((function(n){return n.id})).join()===e.tracks.map((function(n){return n.id})).join()}));var Yr=function(n){var e=n.isEditing,t=n.onTrackChange,r=n.onTrackClick,i=(n.onTrackDelete,n.playingId),o=n.tracks,c=n.users;function u(n){t(o.filter((function(e){return e.id!==n.id})))}return e?a.a.createElement(Pr.a,{onDragEnd:function(n){if(n.destination&&n.destination.index!==n.source.index){var e=function(n,e,t){var r=Array.from(n),a=r.splice(e,1),i=Object(h.a)(a,1)[0];return r.splice(t,0,i),r}(o,n.source.index,n.destination.index);t(e)}}},a.a.createElement(Pr.c,{droppableId:"tracks"},(function(n){return a.a.createElement("div",Object.assign({ref:n.innerRef},n.droppableProps),a.a.createElement(Xr,{onTrackClick:r,onTrackDelete:u,playingId:i,tracks:o}),n.placeholder)}))):a.a.createElement(Gn,{getKey:function(n){return n.id},items:o,itemRenderer:function(n,e){return a.a.createElement(Wr,{index:e+1,isPlaying:i===n.id,onClick:r,track:n,user:c[M(n)]})}})};function Zr(){var n=Object(rn.a)(["\n  display: grid;\n  grid-gap: 20px;\n"]);return Zr=function(){return n},n}function na(){var n=Object(rn.a)(["\n  align-items: ",";\n  display: grid;\n  grid-gap: ","px;\n  grid-template-columns: ",";\n  padding: 20px;\n"]);return na=function(){return n},n}function ea(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: ",";\n  padding: 20px;\n"]);return ea=function(){return n},n}function ta(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return ta=function(){return n},n}var ra=u.c.div(ta()),aa=u.c.div(ea(),(function(n){return"small"===n.size?"space-between":"flex-start"})),ia=u.c.div(na(),(function(n){return n.isEditing?"flex-start":"center"}),(function(n){return n.isEditing?40:20}),(function(n){return"small"===n.size?"1fr":"1fr auto"})),oa=u.c.div(Zr());var ca=function(n){var e,t=n.navigate,i=n.playlistId,o=K({playlistId:i}),c=o.data,u=o.isLoading,l=o.onDelete,s=o.onSave,d=o.users,f=Object(r.useState)(!1),p=Object(h.a)(f,2),b=p[0],y=p[1],x=Object(r.useState)(!1),j=Object(h.a)(x,2),E=j[0],O=j[1],k=Object(r.useState)(c),w=Object(h.a)(k,2),S=w[0],C=w[1],I=nn(),P=Ve();function z(){return(z=Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(S);case 2:t(en);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function D(){E?(b&&s(S),y(!1),O(!1)):(O(!0),C(c))}return a.a.createElement("div",null,E?a.a.createElement(ia,{isEditing:E,size:P},a.a.createElement(oa,null,a.a.createElement(ke,{onChange:function(n){C(Object(g.a)({},S,{data:Object(g.a)({},S.data,{title:n})})),y(!0)},title:"Title",value:S.data.title}),a.a.createElement(ke,{onChange:function(n){C(Object(g.a)({},S,{data:Object(g.a)({},S.data,{artist:n})})),y(!0)},title:"Artist",value:S.data.artist||""})),a.a.createElement(ra,null,a.a.createElement(r.Fragment,null,a.a.createElement(hn,{disabled:!b,onClick:D},"Save"),a.a.createElement(hn,{onClick:function(){y(!1),O(!1),C(c)}},"Cancel")))):a.a.createElement(ia,{isEditing:E,size:P},a.a.createElement(Ir,{playlist:S}),a.a.createElement(ra,null,a.a.createElement(hn,{onClick:D},"Edit"),a.a.createElement(jr,{message:"Really Delete?",onClick:function(){return z.apply(this,arguments)}},"Delete"))),E&&a.a.createElement(aa,{size:P},a.a.createElement("h2",null,"Tracks"),a.a.createElement(dn,{to:"tracks"},"Add Tracks")),a.a.createElement(Zn,{isLoading:u}),a.a.createElement(Yr,{isEditing:E,onTrackChange:function(n){C(Object(g.a)({},S,{data:Object(g.a)({},S.data,{tracks:n})})),y(!0)},onTrackClick:function(n){I.onPlay({playlistId:i,trackId:n.id})},playingId:null===(e=I.track)||void 0===e?void 0:e.id,tracks:S.data.tracks,users:d}))};function ua(){var n=Object(rn.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ",";\n  padding: 20px;\n"]);return ua=function(){return n},n}function la(){var n=Object(rn.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return la=function(){return n},n}var sa=u.c.div(la()),da=u.c.div(ua(),(function(n){return"small"===n.size?"1fr":"1fr auto"}));var fa=function(n){var e=n.playlistId,t=K({playlistId:e}),i=t.data,o=t.isLoading,u=t.onSave,l=Object(r.useState)([]),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(!1),m=Object(h.a)(p,2),v=m[0],b=m[1],y=Object(c.d)(),x=Ve(),j=tn("/playlist/".concat(e));return Object(r.useEffect)((function(){var n;f((null===i||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.tracks)||[])}),[o,i]),a.a.createElement("div",null,a.a.createElement(da,{size:x},a.a.createElement(Ir,{playlist:i}),a.a.createElement(sa,null,a.a.createElement(hn,{disabled:!v,onClick:function(){u(Object(g.a)({},i,{data:Object(g.a)({},i.data,{tracks:d})})),y(j)}},"Save"),a.a.createElement(dn,{to:j},"Cancel"))),a.a.createElement(fe,{onSelectionChange:function(n){f(n),v||b(!0)},selectedEntries:d,showFiles:!0}))},pa=Object(l.a)({palette:{primary:f.a}});function ma(){var n=window.location.href.replace("/auth","").replace(/\/$/,"");return"".concat(n,"/auth")}var va=function(){return a.a.createElement(s.a,{theme:pa},a.a.createElement(u.a,{theme:un},a.a.createElement(E,null,a.a.createElement(C,{authUrl:ma()},a.a.createElement(Z,null,a.a.createElement(c.c,{basepath:en},a.a.createElement(xr,{path:"/"},a.a.createElement(mn,{path:"auth"}),a.a.createElement(Fe,{path:"new"}),a.a.createElement(ca,{path:"playlist/:playlistId"}),a.a.createElement(fa,{path:"playlist/:playlistId/tracks"}),a.a.createElement(it,{path:"/"}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(va,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[81,1,2]]]);
//# sourceMappingURL=main.ec6343ff.chunk.js.map