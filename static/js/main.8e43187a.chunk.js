(this["webpackJsonpdropbox-demo-tape-web"]=this["webpackJsonpdropbox-demo-tape-web"]||[]).push([[0],{81:function(e,n,t){e.exports=t(97)},86:function(e,n,t){},97:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(12),o=t.n(i),c=(t(86),t(19)),u=t(2),l=t(76),s=t(124),d=t(75),f=t.n(d),p=t(7),m=t.n(p),v=t(11),g=t(4),h=t(8),b=t(34),y=t(22);var x=function(e,n){var t=Object(r.useState)((function(){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):n}catch(r){return console.log(r),n}})),a=Object(g.a)(t,2),i=a[0],o=a[1];return[i,function(n){try{var t=n instanceof Function?n(i):n;o(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(r){console.log(r)}}]},j=Object(r.createContext)();function E(e){var n=e.children,t=e.initialState,i=void 0===t?{}:t,o=x("ddt",i),c=Object(g.a)(o,2),u=c[0],l=c[1],s=Object(r.useState)(u),d=Object(g.a)(s,2),f=d[0],p=d[1];Object(r.useEffect)((function(){l(f)}),[f]);var m={getValue:function(e){return f[e]},setValue:function(e,n){p((function(t){return Object(h.a)({},t,Object(y.a)({},e,n))}))},resetCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p((function(){return Object(h.a)({},i,{},e)}))},state:f};return a.a.createElement(j.Provider,{value:m},n)}function O(){var e=Object(r.useContext)(j);if(void 0===e)throw new Error("useCache must be used within a CacheProvider");return e}var k=t(49);var w=function(e){var n=Object.create(null);return"string"!==typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),a=t.length>0?t.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===n[r]?n[r]=a:Array.isArray(n[r])?n[r].push(a):n[r]=[n[r],a]})),n):n},S=r.createContext();function C(e){var n=e.authUrl,t=e.children,a=O(),i=r.useState(a.getValue("currentUser")),o=Object(g.a)(i,2),c=o[0],u=o[1],l=r.useState(null),s=Object(g.a)(l,2),d=s[0],f=s[1],p=r.useState(a.getValue("accessToken")),h=Object(g.a)(p,2),b=h[0],y=h[1],x=r.useState(null),j=Object(g.a)(x,2),E=j[0],C=j[1],I=r.useState(null),P=Object(g.a)(I,2),z=P[0],D=P[1];r.useEffect((function(){var e=new k.Dropbox({accessToken:b,clientId:"ie394xarjsfdxr0"});D(e);var t=e.getAuthenticationUrl(n);t?C(t):f("Invalid Dropbox Id")}),[]),r.useEffect((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.usersGetCurrentAccount();case 2:n=e.sent,u(n),a.setValue("currentUser",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b&&!c&&z&&function(){e.apply(this,arguments)}()}),[b,z]);var T={accessToken:b,authHref:E,currentUser:c,dbx:z,error:d,isAuthenticated:null===z||void 0===z?void 0:z.accessToken,onLogout:function(){y(""),u(null),D(null),a.resetCache({clientId:"ie394xarjsfdxr0"})},parseAcessToken:function(e){var n=w(window.location.hash).access_token;D(new k.Dropbox({accessToken:n,clientId:"ie394xarjsfdxr0"})),a.setValue("accessToken",n),y(n)}};return r.createElement(S.Provider,{value:T},t)}function I(){var e=r.useContext(S);if(void 0===e)throw new Error("useCache must be used within a DropboxContext");return e}var P=function(){var e=O(),n=I(),t=n.dbx,a=n.isAuthenticated,i=Object(r.useState)(!1),o=Object(g.a)(i,2),c=o[0],u=o[1],l=Object(r.useState)(e.getValue("users")||{}),s=Object(g.a)(l,2),d=s[0],f=s[1];function p(){return(p=Object(v.a)(m.a.mark((function e(n){var r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=n.filter((function(e){return!d[e]}))).length>0&&t&&a)){e.next=16;break}return u(!0),e.prev=3,e.next=6,t.usersGetAccountBatch({account_ids:r});case 6:return i=e.sent,b(o=i.reduce((function(e,n){return Object(h.a)({},e,Object(y.a)({},n.account_id,n))}),d)),u(!1),e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:return e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function b(n){f(n),e.setValue("users",n)}return{data:d,isLoading:c,fetchUsers:function(e){return p.apply(this,arguments)}}};function z(e){return e.meta.id}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.substring(0,e.lastIndexOf("."))}function T(e,n,t,r){return e.map((function(e){return t(e)===n?r:e}))}function A(e,n,t){return L.apply(this,arguments)}function L(){return(L=Object(v.a)(m.a.mark((function e(n,t,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filesUpload({autorename:!1,contents:JSON.stringify(t),mode:{".tag":"overwrite"},mute:!0,path:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(".").pop()}function M(e){var n;return null===e||void 0===e?void 0:null===(n=e.sharing_info)||void 0===n?void 0:n.modified_by}function F(e){return Object(b.a)(new Set(e.map(M))).filter(Boolean)}function H(e){return["mp3","m4a","ovw","wav"].includes(_(e))}function B(e){return"file"===e[".tag"]}function R(e){return"folder"===e[".tag"]}function U(e){return R(e)||B(e)&&H(e.name)}function N(e){return R(e)||B(e)&&(n=e.name,["png","jpg","jpeg"].includes(_(n)));var n}function V(e){return Object(h.a)({},e,{isAudioFile:H(e.name),isFolder:"folder"===e[".tag"],isPlaylist:(n=e.name,"mix"===_(n)),path:e.path_display,type:e[".tag"],user:M(e)});var n}function J(e){return K.apply(this,arguments)}function K(){return(K=Object(v.a)(m.a.mark((function e(n){var t,r,a,i,o,c,u,l,s,d=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:"",r=d.length>2?d[2]:void 0,a=d.length>3?d[3]:void 0,e.next=5,n.filesListFolder({path:t});case 5:return i=e.sent,o=i.cursor,c=i.entries,u=i.hasMore,l=r?U:a?N:R,s={cursor:o,data:c.filter(l).map(V),hasMore:u,path:t},e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(e){var n=e.forceRefresh,t=O(),a=I(),i=a.dbx,o=a.isAuthenticated,c=Object(r.useState)(!1),u=Object(g.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(t.getValue("playlists")||[]),f=Object(g.a)(d,2),p=f[0],y=f[1],x=P().fetchUsers;function j(){return(j=Object(v.a)(m.a.mark((function e(n,t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(i,t,n);case 2:return r=e.sent,S({data:t,meta:r},!0),e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(v.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,i.filesDelete({path:n.meta.path_lower});case 3:r=p.filter((function(e){return e.meta.id!==n.meta.id})),y(r),t.setValue("playlists",r),s(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(n),e.next=3,A(i,n.data,n.meta.path_lower);case 3:t=e.sent,S(Object(h.a)({},n,{meta:t}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.sort((function(e,n){return e.data.title.localeCompare(n.data.title)}));y(n),t.setValue("playlists",n)}function S(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?[].concat(Object(b.a)(p),[e]):T(p,z(e),z,e);w(t)}return Object(r.useEffect)((function(){if(o&&i&&!l&&(n||0===p.length)){var e=function(){var e=Object(v.a)(m.a.mark((function e(){var n,t,r,a,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.filesSearch({path:"",query:".mix"});case 2:return n=e.sent,t=n.matches,e.next=6,Promise.all(t.map((function(e){return i.filesDownload({path:e.metadata.path_display})})));case 6:return r=e.sent,e.next=9,Promise.all(r.map((function(e){return new Promise((function(n){var t=new FileReader;t.addEventListener("loadend",(function(t){var r=t.srcElement.result,a=JSON.parse(r);n({data:a,meta:e})})),t.readAsText(e.fileBlob)}))})));case 9:return a=e.sent,o=F(r),e.next=13,x(o);case 13:c=e.sent,w((a||[]).map((function(e){return Object(h.a)({},e,{meta:Object(h.a)({},e.meta,{user:c[M(e.meta)]})})}))),s(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s(!0),e()}}),[i,o]),{data:p,isLoading:l,onCreatePlaylist:function(e,n){return j.apply(this,arguments)},onDeletePlaylist:function(e){return E.apply(this,arguments)},onSavePlaylist:function(e){return k.apply(this,arguments)}}};var W=function(e){var n=e.playlistId,t=I(),a=t.dbx,i=t.isAuthenticated,o=G({dbx:a,isAuthenticated:i}),c=o.data,u=o.isLoading,l=o.onDeletePlaylist,s=o.onSavePlaylist,d=P().fetchUsers,f=Object(r.useState)({}),p=Object(g.a)(f,2),h=p[0],b=p[1],y=c.find((function(e){return e.meta.id===n}));function x(){return(x=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",l(y));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e;function n(){return(n=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n);case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(null===y||void 0===y?void 0:null===(e=y.data)||void 0===e?void 0:e.tracks){var t=F(y.data.tracks);t.length>0&&function(e){n.apply(this,arguments)}(t)}}),[y]),{data:y,isLoading:u,onDelete:function(){return x.apply(this,arguments)},onSave:function(e){s(e)},users:h}},$="mediaSession"in navigator,q=[{src:"".concat("/dropbox-demo-tape-web","/android-icon-96x96.png"),sizes:"96x96",type:"image/png"},{src:"".concat("/dropbox-demo-tape-web","/android-icon-144x144.png"),sizes:"144x144",type:"image/png"},{src:"".concat("/dropbox-demo-tape-web","/android-icon-180x180.png"),sizes:"180x180",type:"image/png"}];var Q=function(){return{setDuration:function(e){var n=e.duration,t=e.position,r=void 0===t?0:t,a=e.playbackRate,i=void 0===a?1:a;$&&"setPositionState"in navigator.mediaSession&&window.navigator.mediaSession.setPositionState({duration:n,position:r,playbackRate:i})},setHandlers:function(e){var n=e.onNext,t=e.onPause,r=e.onPlay,a=e.onPrevious,i=e.onSeek;if($){try{navigator.mediaSession.setActionHandler("play",r)}catch(o){}try{navigator.mediaSession.setActionHandler("pause",t)}catch(o){}try{navigator.mediaSession.setActionHandler("nexttrack",n)}catch(o){}try{navigator.mediaSession.setActionHandler("previoustrack",a)}catch(o){}try{navigator.mediaSession.setActionHandler("seekbackward",(function(){return i(void 0,!1)}))}catch(o){}try{navigator.mediaSession.setActionHandler("seekforward",(function(){return i(void 0,!0)}))}catch(o){}try{navigator.mediaSession.setActionHandler("seekto",(function(e){var n=e.seekTime;return i(n)}))}catch(o){}}},setState:function(e){$&&(navigator.mediaSession.playbackState=e)},setTrack:function(e){var n=e.album,t=e.artist,r=void 0===t?"Demo Tape":t,a=e.artwork,i=void 0===a?q:a,o=e.title;$&&(navigator.mediaSession.metadata=new MediaMetadata({title:o,artist:r,album:n,artwork:i}))}}},X=Object(r.createContext)(),Y="loading",Z="paused",ee="playing",ne="stopped",te={duration:0,isMuted:!1,playlistId:null,position:0,trackId:null,state:ne,volume:1};function re(e,n){switch(n.type){case"duration":return Object(h.a)({},e,{},n.payload);case"loaded":return"loading"===e.state?Object(h.a)({},e,{position:0,state:ee}):e;case"mute":return Object(h.a)({},e,{isMuted:!0});case"pause":return e.state===ee?Object(h.a)({},e,{state:Z}):e;case"play":return Object(h.a)({},e,{},n.payload,{state:Y});case"position":return Object(h.a)({},e,{},n.payload);case"resume":return Object(h.a)({},e,{state:ee});case"stop":return Object(h.a)({},e,{position:0,state:ne});case"tick":return Object(h.a)({},e,{position:e.position+1e3});case"unmute":return Object(h.a)({},e,{isMuted:!1});case"volume":return Object(h.a)({},e,{},n.payload,{isMuted:0===n.payload.volume});default:throw new Error}}function ae(e){var n=e.children,t=e.initialState,i=void 0===t?{}:t,o=Object(r.useReducer)(re,Object(h.a)({},te,{},i)),c=Object(g.a)(o,2),u=c[0],l=u.duration,s=u.isMuted,d=u.playlistId,f=u.position,p=u.state,b=u.trackId,y=u.volume,j=c[1],E=Object(r.useRef)(),O=I().dbx,k=W({playlistId:d}),w=Q(),S=x("playlistImages"),C=Object(g.a)(S,1)[0],P=void 0===C?{}:C,z=Object(r.useMemo)((function(){var e,n,t=b?null===k||void 0===k?void 0:null===(e=k.data)||void 0===e?void 0:e.data.tracks.findIndex((function(e){return e.id===b})):(null===k||void 0===k?void 0:null===(n=k.data)||void 0===n?void 0:n.data)?0:-1,r=t>=0?k.data.data.tracks[t]:null,a=!!r&&t<k.data.data.tracks.length-1,i=!!r&&t>0;if(r){var o,c,u,l,s,d,f,p,m,v=P[null===k||void 0===k?void 0:null===(o=k.data)||void 0===o?void 0:null===(c=o.data)||void 0===c?void 0:null===(u=c.image)||void 0===u?void 0:u.id];w.setTrack({title:D(null===r||void 0===r?void 0:r.name),artist:(null===k||void 0===k?void 0:null===(l=k.data)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.artist)||(null===k||void 0===k?void 0:null===(d=k.data)||void 0===d?void 0:null===(f=d.data)||void 0===f?void 0:f.title),album:null===k||void 0===k?void 0:null===(p=k.data)||void 0===p?void 0:null===(m=p.data)||void 0===m?void 0:m.title,artwork:v?[{src:v,sizes:"50x50",type:"image/png"}]:void 0})}return{hasNext:a,hasPrevious:i,track:r,trackIndex:t}}),[b,d]),T=z.hasNext,A=z.hasPrevious,L=z.track,_=z.trackIndex;function M(){T&&j({type:"play",payload:{playlistId:d,trackId:k.data.data.tracks[_+1].id}})}function F(){A&&j({type:"play",payload:{playlistId:d,trackId:k.data.data.tracks[_-1].id}})}function H(){p!==Z&&j({type:"pause"})}function B(){p===Z&&j({type:"resume"})}function R(e,n){if(L){var t=E.current,r=e;void 0===e&&(r=f+(n?1e4:-1e4)),t.currentTime=r/1e3,w.setDuration({duration:l,position:r}),j({type:"position",payload:{position:r}})}}function U(){p!==ne&&j({type:"stop"})}Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.current){e.next=3;break}return e.abrupt("return");case 3:if(!L||p!==Y){e.next=12;break}return e.next=6,O.filesGetTemporaryLink({path:L.path_lower});case 6:t=e.sent,n.setAttribute("src",t.link),n.play(),w.setState("playing"),e.next=13;break;case 12:L&&p===ee?(n.play(),w.setState("playing")):p===Z?(n.pause(),w.setState("paused")):p===ne&&(n.pause(),w.setState("none"),n.currentTime=0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p,b,d]),Object(r.useEffect)((function(){if("playing"===p){var e=setInterval((function(){j({type:"tick"})}),1e3);return function(){return clearInterval(e)}}})),w.setHandlers({onNext:M,onPrevious:F,onPause:H,onPlay:B,onSeek:R});var N={duration:l,hasNext:T,hasPrevious:A,isMuted:s,onMute:function(){j({type:"mute"});var e=E.current;e&&(e.muted=!0)},onNext:M,onPause:H,onPlay:function(e){var n=e.playlistId,t=e.trackId;j({type:"play",payload:{playlistId:n,trackId:t}})},onPrevious:F,onResume:B,onSeek:R,onStop:U,onUnmute:function(){j({type:"unmute"});var e=E.current;e&&(e.muted=!1)},onVolumeChange:function(e){j({type:"volume",payload:{volume:e}});var n=E.current;n&&(n.volume=e,n.muted=0===e)},playlist:k,position:f,state:p,track:L,volume:y};return a.a.createElement(X.Provider,{value:N},n,(L||p!==ne)&&a.a.createElement("audio",{onDurationChange:function(e){var n=E.current;n&&(w.setDuration({duration:n.duration}),j({type:"duration",payload:{duration:1e3*n.duration}}))},onEnded:function(e){T?M():U()},onPlay:function(e){j({type:"loaded"})},onProgress:function(e){var n=E.current;n&&j({type:"position",payload:{position:1e3*n.currentTime}})},ref:E}))}function ie(){var e=Object(r.useContext)(X);if(void 0===e)throw new Error("useAudio must be used within a AudioProvider");return e}var oe="/dropbox-demo-tape-web";function ce(e){return"".concat(oe).concat(e)}var ue=t(3);function le(){var e=Object(ue.a)(["\n      font-size: 14px;\n      font-weight: 400;\n    "]);return le=function(){return e},e}function se(){var e=Object(ue.a)(["\n      font-size: 16px;\n    "]);return se=function(){return e},e}var de={background:"#242A31",backgroundLight:"#2D323C",disabled:"#656565",error:"#E7777F",inherit:"inherit",primary:"#D2D2D2",secondary:"#b3b3b3",success:"#A1CA7E",transparent:"transparent",white:"#FFFFFF"},fe={color:Object(h.a)({},de,{highlight:"#5EB1BF",bgHighlight:de.primary+"11"}),typography:{base:Object(u.b)(se()),sub:Object(u.b)(le())},space:{small:5,medium:10,large:20},transition:"all 250ms ease-in"};function pe(){var e=Object(ue.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ",";\n\n  :hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return pe=function(){return e},e}var me=u.c.a(pe(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n  color: ".concat(e.theme.color.disabled,";\n  cursor: unset;\n  border-color: ").concat(e.theme.color.disabled,";\n\n  :hover {\n    background-color: ").concat(e.theme.color.background,";\n    color: ").concat(e.theme.color.disabled,";\n  }\n"):""}));var ve=function(e){return a.a.createElement(me,Object.assign({as:e.to?c.a:void 0},e))};function ge(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n"]);return ge=function(){return e},e}var he=u.c.div(ge());var be=function(){var e=I(),n=e.authHref,t=e.isAuthenticated,i=e.parseAcessToken;return!t&&window.location.hash.includes("access_token")&&i(),t?a.a.createElement(c.b,{noThrow:!0,to:oe}):a.a.createElement(he,null,a.a.createElement("h1",null,"Welcome"),a.a.createElement(r.Fragment,null,a.a.createElement(ve,{href:n},"Authenticate With Dropbox")))};function ye(){var e=Object(ue.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ",";\n\n  :hover,\n  :focus {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return ye=function(){return e},e}var xe=u.c.button(ye(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.disabled,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""})),je=t(59),Ee=t.n(je);function Oe(){var e=Object(ue.a)(["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return Oe=function(){return e},e}var ke=u.c.button(Oe(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight})),we=function(e){var n=e.name,t=void 0===n?"Home":n,r=e.onClick,i=e.path;return a.a.createElement(ke,{onClick:function(){return r(i)}},t)};function Se(){var e=Object(ue.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n"]);return Se=function(){return e},e}var Ce=u.c.div(Se());var Ie=function(e){var n=e.onClick,t=(e.onSort,e.path),i=(void 0===t?"":t).split("/").map((function(e,t,i){var o=i.slice(0,t+1).join("/");return a.a.createElement(r.Fragment,{key:t},0!==t&&a.a.createElement("span",null,"/"),a.a.createElement(we,{name:e||"Home",onClick:n,path:o}))}));return a.a.createElement(Ce,null,a.a.createElement(Ee.a,null)," ",i)},Pe=t(77),ze=t(62),De=t.n(ze),Te=t(60),Ae=t.n(Te),Le=t(61),_e=t.n(Le);function Me(){var e=Object(ue.a)(["\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return Me=function(){return e},e}function Fe(){var e=Object(ue.a)(["\n  ","\n"]);return Fe=function(){return e},e}function He(){var e=Object(ue.a)(["\n  ","\n"]);return He=function(){return e},e}function Be(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n"]);return Be=function(){return e},e}var Re=u.c.div(Be()),Ue=u.c.span(He(),(function(e){return e.theme.typography.base})),Ne=u.c.span(Fe(),(function(e){return e.theme.typography.sub})),Ve=u.c.button(Me(),(function(e){return e.theme.color[e.isSelected?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isSelected?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary}));var Je=function(e){var n,t,r=e.entry,i=e.onClick,o=e.isSelected,c=void 0!==o&&o,u=c?Ae.a:r.isFolder?_e.a:De.a;return a.a.createElement(Ve,{isSelected:c,onClick:function(){return i(r)}},a.a.createElement(Re,null,a.a.createElement(u,null),a.a.createElement(Ue,null,r.name),"file"===r.type&&a.a.createElement(Ne,null,Object(Pe.a)(new Date(r.server_modified))," ago"),"file"===r.type&&a.a.createElement(Ne,null,null===(n=r.user)||void 0===n?void 0:null===(t=n.name)||void 0===t?void 0:t.display_name)))};function Ke(){var e=Object(ue.a)(["\n  liststyletype: none;\n  margin: 0;\n  marginblockend: 0;\n  marginblockstart: 0;\n  padding: 0;\n  paddinginlinestart: 0;\n  webkitmarginafter: 0;\n  webkitmarginbefore: 0;\n  webkitpaddingstart: 0;\n  ","\n"]);return Ke=function(){return e},e}function Ge(){var e=Object(ue.a)(["\n  ","\n  color: ",";\n  font-size: 18px;\n  padding: 20px;\n"]);return Ge=function(){return e},e}var We=function(e,n){return n},$e=u.c.div(Ge(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color.secondary})),qe=u.c.ul(Ke(),(function(e){return(n=e.gap)?"\n        display: grid;\n        grid-gap: ".concat(n,"px;\n      "):"";var n}));function Qe(e){var n=e.emptyMessage,t=e.isLoading,r=e.itemRenderer,i=e.items,o=e.gap,c=e.getKey,u=void 0===c?We:c;if(!t&&0===i.length&&n)return a.a.createElement($e,null,n);var l=i.map((function(e,n){return a.a.createElement("li",{key:u(e,n)},r(e,n))}));return a.a.createElement(qe,{gap:o},l)}Qe.defaultProps={getKey:We};var Xe=Qe,Ye=t(123);function Ze(){var e=Object(ue.a)(["\n  height: ",";\n  width: ",";\n"]);return Ze=function(){return e},e}var en=u.c.div(Ze(),(function(e){return e.height}),(function(e){return e.width}));function nn(){var e=Object(ue.a)(["\n  margin-bottom: -4px;\n"]);return nn=function(){return e},e}var tn=u.c.div(nn());var rn=function(e){var n=e.isLoading;return a.a.createElement(tn,null,n?a.a.createElement(Ye.a,null):a.a.createElement(en,{height:"4px"}))},an=t(64),on=t.n(an),cn=t(63),un=t.n(cn);function ln(){var e=Object(ue.a)(["\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return ln=function(){return e},e}var sn=u.c.button(ln(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight}));var dn=function(e){var n=e.children,t=e.onClick,r=e.sortDir,i="asc"===r?un.a:"desc"===r?on.a:null;return a.a.createElement(sn,{onClick:t},a.a.createElement("span",null,n),i&&a.a.createElement(i,null))};var fn=function(e){var n=e.folder,t=void 0===n?"":n,a=e.showFiles,i=void 0!==a&&a,o=e.showImages,c=void 0!==o&&o,u=e.sortBy,l=void 0===u?"":u,s=e.sortDir,d=void 0===s?"":s,f=I().dbx,p=Object(r.useState)({}),b=Object(g.a)(p,2),x=b[0],j=b[1],E=Object(r.useState)(!1),O=Object(g.a)(E,2),k=O[0],w=O[1],S=P().fetchUsers;Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n,r,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,J(f,t,i,c);case 3:return n=e.sent,r=F(n.data),e.next=7,S(r);case 7:a=e.sent,o=Object(h.a)({},n,{data:n.data.map((function(e){return Object(h.a)({},e,{user:a[M(e)]})}))}),j(Object(y.a)({},t,o)),w(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f&&function(){e.apply(this,arguments)}()}),[f,t]);var C=x[t]||{},z=C.cursor,D=C.data,T=void 0===D?[]:D,A=C.hasMore,L=T;return l&&d&&("name"===l?L=T.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?e.name.localeCompare(t.name):"folder"===t.type?1:-1)*n}}(d)):"modified"===l?L=T.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?new Date(t.server_modified)-new Date(e.server_modified):"folder"===t.type?1:-1)*n}}(d)):"modifiedBy"===l&&(L=T.sort(function(e){var n="asc"===e?-1:1;return function(e,t){var r,a,i,o;return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?null===(r=e.user)||void 0===r?void 0:null===(a=r.name)||void 0===a?void 0:a.display_name.localeCompare(null===(i=t.user)||void 0===i?void 0:null===(o=i.name)||void 0===o?void 0:o.display_name):"folder"===t.type?1:-1)*n}}(d)))),{cursor:z,files:L,folder:t,hasMore:A,isLoading:k}};function pn(){var e=Object(ue.a)(["\n  display: grid;\n"]);return pn=function(){return e},e}function mn(){var e=Object(ue.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n"]);return mn=function(){return e},e}var vn=u.c.div(mn()),gn=u.c.div(pn());var hn=function(e){var n=e.onPathChange,t=e.onSelectionChange,i=e.selectedEntries,o=void 0===i?[]:i,c=e.singleSelection,u=void 0!==c&&c,l=e.showFiles,s=void 0!==l&&l,d=e.showImages,f=void 0!==d&&d,p=Object(r.useState)(""),m=Object(g.a)(p,2),v=m[0],h=m[1],y=Object(r.useState)(""),x=Object(g.a)(y,2),j=x[0],E=x[1],O=Object(r.useState)(""),k=Object(g.a)(O,2),w=k[0],S=k[1],C=fn({folder:v,showFiles:s,showImages:f,sortBy:j,sortDir:w}),I=C.files,P=C.isLoading;function z(e){"folder"===e.type?(h(e.path),n&&n(e.path)):(s||f)&&(u?o.some((function(n){return n.id===e.id}))?t([null]):t([e]):o.some((function(n){return n.id===e.id}))?t(o.filter((function(n){return n.id!==e.id}))):t([].concat(Object(b.a)(o),[e])))}function D(e){e!==j?(E(e),S("desc")):"desc"===w?S("asc"):(S(""),E(""))}return a.a.createElement(gn,null,a.a.createElement(Ie,{onClick:h,path:v}),a.a.createElement(en,{height:"10px"}),a.a.createElement(vn,null,a.a.createElement("span",null),a.a.createElement(dn,{onClick:function(){return D("name")},sortDir:"name"===j?w:null},"Name"),a.a.createElement(dn,{onClick:function(){return D("modified")},sortDir:"modified"===j?w:null},"Modified"),a.a.createElement(dn,{onClick:function(){return D("modifiedBy")},sortDir:"modifiedBy"===j?w:null},"Modified By")),a.a.createElement(rn,{isLoading:P}),a.a.createElement(Xe,{emptyMessage:"There are no files here",isLoading:P,items:I,itemRenderer:function(e){return a.a.createElement(Je,{entry:e,isSelected:o.some((function(n){return n.path_lower===e.path_lower})),onClick:z})}}))},bn=t(46);function yn(){var e=Object(ue.a)(["\n  color: ",";\n  position: relative;\n\n  :focus-within {\n    color: ",";\n  }\n\n  ","\n"]);return yn=function(){return e},e}function xn(){var e=Object(ue.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return xn=function(){return e},e}function jn(){var e=Object(ue.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n"]);return jn=function(){return e},e}function En(){var e=Object(ue.a)(["\n  ","\n  font-size: 14px;\n  font-weight: 700;\n"]);return En=function(){return e},e}function On(){var e=Object(ue.a)(["\n  border-color: ",";\n  color: ",";\n"]);return On=function(){return e},e}var kn=Object(u.b)(On(),(function(e){return e.theme.color.error}),(function(e){return e.theme.color.error})),wn=u.c.span(En(),kn),Sn=u.c.input(jn(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.primary})),Cn=u.c.div(xn(),(function(e){return e.theme.color.background})),In=u.c.label(yn(),(function(e){return e.theme.color.secondary}),(function(e){return e.theme.color.white}),(function(e){return e.hasError?kn:""}));var Pn=function(e){var n=e.error,t=e.hasError,r=e.onChange,i=e.title,o=e.value,c=Object(bn.a)(e,["error","hasError","onChange","title","value"]);return a.a.createElement(In,{hasError:t},a.a.createElement(Sn,Object.assign({},c,{hasError:t,onChange:function(e){return r(e.target.value)},type:"text",value:o})),a.a.createElement(Cn,null,i),n&&a.a.createElement(wn,null,n))};function zn(){var e=Object(ue.a)(["\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n"]);return zn=function(){return e},e}function Dn(){var e=Object(ue.a)([""]);return Dn=function(){return e},e}function Tn(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n"]);return Tn=function(){return e},e}function An(){var e=Object(ue.a)(["\n  border: 1px solid ",";\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n"]);return An=function(){return e},e}function Ln(){var e=Object(ue.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return Ln=function(){return e},e}function _n(){var e=Object(ue.a)(["\n  overflow-y: scroll;\n  height: 470px;\n"]);return _n=function(){return e},e}var Mn=u.c.div(_n()),Fn=u.c.div(Ln(),(function(e){return e.theme.color.background})),Hn=u.c.div(An(),(function(e){return e.theme.color.primary})),Bn=u.c.div(Tn()),Rn=u.c.h2(Dn()),Un=u.c.form(zn());var Nn=function(e){var n=e.navigate,t=Object(r.useState)(""),i=Object(g.a)(t,2),o=i[0],c=i[1],u=Object(r.useState)(""),l=Object(g.a)(u,2),s=l[0],d=l[1],f=Object(r.useState)("/"),p=Object(g.a)(f,2),h=p[0],b=p[1],y=G({}).onCreatePlaylist,x=!!o&&!!s&&!!h;function j(){return(j=Object(v.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y("".concat(h,"/").concat(s,".mix"),{artist:o,title:s,tracks:[]});case 3:return r=e.sent,n(ce("/playlist/".concat(r))),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(Un,{onSubmit:x?function(e){return j.apply(this,arguments)}:void 0},a.a.createElement(Bn,null,a.a.createElement(Rn,null,"Add Playlist"),a.a.createElement(xe,{disabled:!x,type:"submit"},"Save"),a.a.createElement(ve,{to:oe},"Cancel")),a.a.createElement(Pn,{onChange:d,title:"Title",value:s}),a.a.createElement(Pn,{onChange:c,title:"Artist",value:o}),a.a.createElement(Hn,null,a.a.createElement(Mn,null,a.a.createElement(hn,{onPathChange:b})),a.a.createElement(Fn,null,"Location")))},Vn={none:"none",fetched:"fetched",error:"error"};var Jn=function(e){var n,t,i,o=e.playlist,c=e.size,u=void 0===c?50:c,l=Object(r.useState)(),s=Object(g.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(Vn.none),b=Object(g.a)(p,2),j=b[0],E=b[1],O=I().dbx,k=x("playlistImages"),w=Object(g.a)(k,2),S=w[0],C=void 0===S?{}:S,P=w[1],z=null===o||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:null===(t=n.image)||void 0===t?void 0:t.id;return Object(r.useEffect)((function(){if(!d||j===Vn.error){var e=C[z];j!==Vn.error&&e?f(e):function(){n.apply(this,arguments)}()}function n(){return(n=Object(v.a)(m.a.mark((function e(){var n,t,r,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===o||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.image)){e.next=7;break}return e.next=3,O.filesGetTemporaryLink({path:null===(t=o.data.image)||void 0===t?void 0:t.path_lower});case 3:i=e.sent,f(null===i||void 0===i?void 0:i.link),P(Object(h.a)({},C,Object(y.a)({},null===o||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:null===(a=r.image)||void 0===a?void 0:a.id,null===i||void 0===i?void 0:i.link))),E(Vn.fetched);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[z,j]),a.a.createElement("img",{alt:null===o||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.title,height:u,onError:function(e){d&&Vn!==Vn.fetched&&E(Vn.error)},src:d||"".concat("/dropbox-demo-tape-web","/android-icon-96x96.png"),width:u})};function Kn(){var e=Object(ue.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr;\n"]);return Kn=function(){return e},e}function Gn(){var e=Object(ue.a)(["\n  color: ",";\n"]);return Gn=function(){return e},e}function Wn(){var e=Object(ue.a)(["\n  display: grid;\n"]);return Wn=function(){return e},e}function $n(){var e=Object(ue.a)(["\n  ","\n  color: ",";\n"]);return $n=function(){return e},e}var qn=u.c.div($n(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),Qn=u.c.div(Wn()),Xn=u.c.span(Gn(),(function(e){return e.theme.color.primary})),Yn=u.c.div(Kn());var Zn=function(e){var n=e.playlist;return a.a.createElement(Yn,null,a.a.createElement(Jn,{playlist:n}),a.a.createElement(Qn,null,a.a.createElement("h1",null,n.data.title),n.data.artist&&a.a.createElement(qn,null,"By ",a.a.createElement(Xn,null,n.data.artist))))},et="(min-width: 660px) and (max-width: 1023px)",nt="(min-width: 1024px)";var tt=function(){return function(e,n,t){var a=e.map((function(e){return window.matchMedia(e)})),i=function(){var e=a.findIndex((function(e){return e.matches}));return"undefined"!==typeof n[e]?n[e]:t},o=Object(r.useState)(i),c=Object(g.a)(o,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var e=function(){return l(i)};return a.forEach((function(n){return n.addListener(e)})),function(){return a.forEach((function(n){return n.removeListener(e)}))}}),[]),u}([et,nt],["medium","large"],"small")};function rt(){var e=Object(ue.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ",";\n  padding: 20px;\n"]);return rt=function(){return e},e}function at(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return at=function(){return e},e}var it=u.c.div(at()),ot=u.c.div(rt(),(function(e){return"small"===e.size?"1fr":"1fr auto"}));var ct=function(e){var n=e.playlistId,t=W({playlistId:n}),i=t.data,o=t.isLoading,u=t.onSave,l=Object(r.useState)([]),s=Object(g.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(!1),m=Object(g.a)(p,2),v=m[0],b=m[1],y=Object(c.d)(),x=tt(),j=ce("/playlist/".concat(n));return Object(r.useEffect)((function(){var e;f(null===i||void 0===i?void 0:null===(e=i.data)||void 0===e?void 0:e.image)}),[o,i]),a.a.createElement("div",null,a.a.createElement(ot,{size:x},a.a.createElement(Zn,{playlist:i}),a.a.createElement(it,null,a.a.createElement(xe,{disabled:!v,onClick:function(){u(Object(h.a)({},i,{data:Object(h.a)({},i.data,{image:d})})),y(j)}},"Save"),a.a.createElement(ve,{to:j},"Cancel"))),a.a.createElement(hn,{onSelectionChange:function(e){var n=Object(g.a)(e,1)[0];f(n),v||b(!0)},selectedEntries:d?[d]:[],showImages:!0}))},ut=t(44);function lt(){var e=Object(ue.a)(["\n  color: ",";\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n  }\n"]);return lt=function(){return e},e}var st=Object(u.c)(c.a)(lt(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight}));function dt(){var e=Object(ue.a)(["\n  display: grid;\n"]);return dt=function(){return e},e}function ft(){var e=Object(ue.a)(["\n  ","\n  align-items: center;\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return ft=function(){return e},e}function pt(){var e=Object(ue.a)(["\n  ","\n  color: ",";\n"]);return pt=function(){return e},e}function mt(){var e=Object(ue.a)(["\n  ","\n  text-align: right;\n"]);return mt=function(){return e},e}function vt(){var e=Object(ue.a)(["\n  color: ",";\n"]);return vt=function(){return e},e}function gt(){var e=Object(ue.a)([""]);return gt=function(){return e},e}function ht(){var e=Object(ue.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n"]);return ht=function(){return e},e}var bt=u.c.div(ht()),yt=u.c.h2(gt()),xt=u.c.div(vt(),(function(e){return e.theme.color.disabled})),jt=u.c.span(mt(),(function(e){return e.theme.typography.sub})),Et=u.c.span(pt(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.secondary})),Ot=u.c.div(ft(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary})),kt=u.c.div(dt());var wt=function(){var e=G({forceRefresh:!0}),n=tt();return a.a.createElement("div",null,a.a.createElement(bt,null,a.a.createElement(ve,{to:"new"},"Add")),a.a.createElement(rn,{isLoading:e.isLoading}),a.a.createElement(Xe,{getKey:function(e){return e.meta.id},items:e.data,itemRenderer:function(e){var t,r,i=null===(t=e.meta.user)||void 0===t?void 0:null===(r=t.name)||void 0===r?void 0:r.display_name;return a.a.createElement(st,{to:"playlist/".concat(e.meta.id)},a.a.createElement(Ot,null,a.a.createElement(Jn,{playlist:e}),a.a.createElement(kt,null,a.a.createElement(yt,null,e.data.title),a.a.createElement(Et,null,e.data.artist||e.meta.path_display)),"small"!==n&&a.a.createElement(jt,null,"Updated"," ",Object(ut.a)(new Date(e.meta.server_modified),new Date),a.a.createElement(xt,null,Boolean(i)?"by ":"",i))))}}))};var St=function(){return a.a.createElement(wt,null)},Ct=t(65),It=t.n(Ct),Pt=t(125),zt=t(126);function Dt(){var e=Object(ue.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  height: ","px;\n  overflow: hidden;\n  position: relative;\n  width: ","px;\n"]);return Dt=function(){return e},e}function Tt(){var e=Object(ue.a)(["\n  font-size: 16px;\n"]);return Tt=function(){return e},e}function At(){var e=Object(ue.a)([""]);return At=function(){return e},e}var Lt=u.c.img(At()),_t=u.c.span(Tt()),Mt=u.c.div(Dt(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.background}),(function(e){return e.size}),(function(e){return e.size}));var Ft=function(e){var n=e.initials,t=e.name,i=e.size,o=void 0===i?36:i,c=e.url,u=Object(r.useState)(!1),l=Object(g.a)(u,2),s=l[0],d=l[1];return Object(r.useEffect)((function(){c&&s&&d(!1)}),[c]),a.a.createElement(Mt,{size:o},c&&!s?a.a.createElement(Lt,{alt:t||n,height:o,onError:function(){return d(!0)},src:c,width:o}):a.a.createElement(_t,null,n))};function Ht(){var e=Object(ue.a)(["\n  align-items: center;\n  background-color: ",";\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n"]);return Ht=function(){return e},e}function Bt(){var e=Object(ue.a)(["\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n"]);return Bt=function(){return e},e}function Rt(){var e=Object(ue.a)(["\n  padding-left: 10px;\n"]);return Rt=function(){return e},e}function Ut(){var e=Object(ue.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n"]);return Ut=function(){return e},e}var Nt=u.c.div(Ut()),Vt=u.c.h1(Rt()),Jt=u.c.button(Bt()),Kt=u.c.div(Ht(),(function(e){return e.theme.color.backgroundLight}));var Gt=function(e){e.location;var n=Object(r.useState)(null),t=Object(g.a)(n,2),i=t[0],o=t[1],c=I(),u=c.currentUser,l=c.onLogout;return a.a.createElement(Kt,null,a.a.createElement(st,{to:oe},a.a.createElement(Nt,null,a.a.createElement(It.a,{fontSize:"large"}),a.a.createElement(Vt,null,"Demo Tape"))),a.a.createElement("span",null),u&&a.a.createElement(r.Fragment,null,a.a.createElement(Jt,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},a.a.createElement(Ft,{initials:null===u||void 0===u?void 0:u.name.abbreviated_name,name:null===u||void 0===u?void 0:u.name.display_name,url:null===u||void 0===u?void 0:u.profile_photo_url})),a.a.createElement(Pt.a,{elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},id:"user-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){o(null)}},a.a.createElement(zt.a,{onClick:function(){l()}},"Logout"))))},Wt=t(68),$t=t.n(Wt),qt=t(43),Qt=t.n(qt),Xt=t(70),Yt=t.n(Xt),Zt=t(69),er=t.n(Zt);function nr(){var e=Object(ue.a)(["\n  align-items: center;\n  background-color: ",";\n  border: ",";\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  transition: ",";\n  width: ","px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ",";\n  }\n\n  ","\n"]);return nr=function(){return e},e}var tr=u.c.button(nr(),(function(e){return e.theme.color.background}),(function(e){return e.hideBorder?"none":"1px solid white"}),(function(e){return e.size||30}),(function(e){return e.theme.transition}),(function(e){return e.size||30}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.transparent,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""}));function rr(e){var n=e/1e3,t=Math.floor(n%60);return ar(Math.floor(n/60))+":"+ar(t)}function ar(e){var n=e.toString();return e<10?"0"+n:n}function ir(){var e=Object(ue.a)(["\n  align-items: center;\n  color: ",";\n  display: grid;\n  grid-template-columns: 80px 1fr 80px;\n  grid-gap: 5px;\n"]);return ir=function(){return e},e}function or(){var e=Object(ue.a)(["\n  text-align: right;\n"]);return or=function(){return e},e}var cr=u.c.span(or()),ur=u.c.div(ir(),(function(e){return e.theme.color[e.isDisabled?"disabled":"primary"]}));var lr=function(){var e=ie(),n=Object(r.useState)(0),t=Object(g.a)(n,2),i=t[0],o=t[1],c=Object(r.useState)(!1),u=Object(g.a)(c,2),l=u[0],s=u[1],d=Object(r.useRef)(),f=l?i:e.position;return a.a.createElement(ur,{isDisabled:!e.track},a.a.createElement(cr,null,rr(f)),a.a.createElement("input",{type:"range",disabled:!e.track,min:0,max:e.duration,onChange:function(e){o(d.current.value)},onMouseDown:function(e){s(!0)},onMouseUp:function(n){!function(n){s(!1);var t=parseInt(d.current.value);isNaN(t)||e.onSeek(t)}()},ref:d,value:f}),a.a.createElement("span",null,rr(e.duration)))};function sr(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 50px 1fr;\n"]);return sr=function(){return e},e}function dr(){var e=Object(ue.a)(["\n  ","\n  font-weight: 500;\n"]);return dr=function(){return e},e}function fr(){var e=Object(ue.a)(["\n  display: grid;\n  grid-gap: 2px;\n"]);return fr=function(){return e},e}function pr(){var e=Object(ue.a)(["\n  ","\n  color: ",";\n"]);return pr=function(){return e},e}var mr=u.c.div(pr(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),vr=u.c.div(fr()),gr=u.c.div(dr(),(function(e){return e.theme.typography.base})),hr=u.c.div(sr());var br=function(e){var n,t,r,i,o=e.playlist,c=e.track;return a.a.createElement(hr,null,a.a.createElement(Jn,{playlist:null===o||void 0===o?void 0:o.data}),a.a.createElement(vr,null,a.a.createElement(gr,null,D(null===c||void 0===c?void 0:c.name)),a.a.createElement(mr,null,(null===o||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.artist)||(null===o||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.title))))},yr=t(66),xr=t.n(yr),jr=t(67),Er=t.n(jr);function Or(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 20px 1fr;\n  padding: 0 10px;\n"]);return Or=function(){return e},e}function kr(){var e=Object(ue.a)(["\n  width: 100%;\n"]);return kr=function(){return e},e}function wr(){var e=Object(ue.a)(["\n  cursor: pointer;\n\n  :hover {\n    color: ",";\n  }\n"]);return wr=function(){return e},e}var Sr=u.c.div(wr(),(function(e){return e.theme.color.highlight})),Cr=u.c.input(kr()),Ir=u.c.div(Or());var Pr=function(){var e=ie(),n=e.isMuted,t=e.onMute,r=e.onUnmute,i=e.onVolumeChange,o=e.volume,c=0===o||n?xr.a:Er.a;return a.a.createElement(Ir,null,a.a.createElement(Sr,{as:c,fontSize:"small",onClick:n?r:t}),a.a.createElement(Cr,{max:1,min:0,onChange:function(e){return i(e.currentTarget.value)},step:.01,type:"range",value:n?0:o}))};function zr(){var e=Object(ue.a)(["\n  align-items: center;\n  background-color: ",";\n  bottom: 0;\n  display: grid;\n  grid-template-columns: ",";\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n"]);return zr=function(){return e},e}function Dr(){var e=Object(ue.a)(["\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n"]);return Dr=function(){return e},e}function Tr(){var e=Object(ue.a)(["\n  display: flex;\n  justify-content: center;\n"]);return Tr=function(){return e},e}function Ar(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n"]);return Ar=function(){return e},e}var Lr=u.c.div(Ar()),_r=u.c.div(Tr()),Mr=u.c.div(Dr()),Fr=u.c.div(zr(),(function(e){return e.theme.color.backgroundLight}),(function(e){return e.isSmall?"60px 1fr":"minmax(200px, 0.5fr) 1fr 150px"}));var Hr=function(){var e=ie(),n=tt(),t=!!e.track,r=e.state===ee,i=e.state===Y,o="small"===n;if(o&&!t)return null;var c=r?a.a.createElement(tr,{"aria-label":"Pause",onClick:e.onPause,size:40},a.a.createElement($t.a,null)):a.a.createElement(tr,{"aria-label":"Play",disabled:i||!t,onClick:function(){return e.onResume()},size:40},a.a.createElement(Qt.a,null));return a.a.createElement(Fr,{isSmall:o},o&&c,a.a.createElement(br,{playlist:e.playlist,track:e.track}),!o&&a.a.createElement(_r,null,a.a.createElement(Mr,null,a.a.createElement(Lr,null,a.a.createElement(tr,{"aria-label":"Previous",disabled:!e.hasPrevious,hideBorder:!0,onClick:e.onPrevious},a.a.createElement(er.a,{fontSize:"small"})),c,a.a.createElement(tr,{"aria-label":"Next",disabled:!e.hasNext,hideBorder:!0,onClick:e.onNext},a.a.createElement(Yt.a,{fontSize:"small"}))),a.a.createElement(lr,null))),!o&&a.a.createElement(Pr,null))};function Br(){var e=Object(ue.a)(["\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n"]);return Br=function(){return e},e}function Rr(){var e=Object(ue.a)(["\n  background-color: ",";\n  overflow-y: scroll;\n  padding-bottom: 113px;\n"]);return Rr=function(){return e},e}var Ur=u.c.main(Rr(),(function(e){return e.theme.color.background})),Nr=u.c.div(Br());var Vr=function(e){var n=e.children,t=e.location;return I().isAuthenticated||t.pathname.includes("/auth")?a.a.createElement(Nr,null,a.a.createElement(Gt,{location:t}),a.a.createElement(Ur,null,n),a.a.createElement(Hr,null)):a.a.createElement(c.b,{noThrow:!0,to:"auth"})};var Jr=function(e){var n=e.message,t=e.onClick,i=Object(bn.a)(e,["message","onClick"]),o=Object(r.useState)(!1),c=Object(g.a)(o,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){l(!1)}),2e3);return function(){clearTimeout(e)}}),[u]),u?a.a.createElement(xe,{onBlur:function(){return l(!1)},onClick:t},n||"Are you sure?"):a.a.createElement(xe,Object.assign({onClick:function(){l(!0)}},i))},Kr=t(47),Gr=t(74),Wr=t.n(Gr),$r=t(71),qr=t.n($r),Qr=t(72),Xr=t.n(Qr);function Yr(){var e=Object(ue.a)(["\n","\nbackground-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n  \n  :hover {\n    background-color: ","11;\n    \n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n"]);return Yr=function(){return e},e}function Zr(){var e=Object(ue.a)(["\n  color: ",";\n"]);return Zr=function(){return e},e}function ea(){var e=Object(ue.a)(["\n  color: ",";\n  display: grid;\n  font-size: 11px;\n  line-height: 15px;\n  text-align: right;\n"]);return ea=function(){return e},e}function na(){var e=Object(ue.a)(["\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 30px;\n  width: 30px;\n"]);return na=function(){return e},e}function ta(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  line-height: 30px;\n  grid-gap: 5px;\n  grid-template-columns: ","px 20px 1fr ",";\n  padding: ","px;\n"]);return ta=function(){return e},e}var ra=u.c.div(ta(),(function(e){return"small"===e.size?35:40}),(function(e){return"small"===e.size||e.isEditable?"":"auto"}),(function(e){return"small"===e.size?"".concat(e.theme.space.medium,"px ").concat(e.theme.space.small):e.theme.space.medium})),aa=u.c.span(na(),(function(e){return e.isPlaying?"white":"transparent"})),ia=u.c.span(ea(),(function(e){return e.theme.color.secondary})),oa=u.c.span(Zr(),(function(e){return e.theme.color.disabled})),ca=u.c.button(Yr(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.color.primary}));var ua=function(e){var n=e.index,t=e.isEditable,r=e.isPlaying,i=e.onClick,o=e.onDelete,c=e.track,u=e.user,l=tt();return a.a.createElement(ca,{isPlaying:r,onClick:t?void 0:function(){return i(c)}},a.a.createElement(ra,{isEditable:t,size:l},t?a.a.createElement(tr,{onClick:function(){return o(c)}},a.a.createElement(qr.a,{fontSize:"small"})):a.a.createElement(aa,{id:"play",isPlaying:r},r?a.a.createElement(Xr.a,{fontSize:"small"}):a.a.createElement(Qt.a,{fontSize:"small"})),a.a.createElement("span",null,n,"."),a.a.createElement("span",null,D(c.name)),"small"!==l&&!t&&a.a.createElement(ia,null,a.a.createElement("span",null,"Updated"," ",Object(ut.a)(new Date(c.server_modified),new Date)),u&&a.a.createElement(oa,null,"by ",u.name.display_name))))};function la(){var e=Object(ue.a)(["\n  position: relative;\n"]);return la=function(){return e},e}function sa(){var e=Object(ue.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n"]);return sa=function(){return e},e}var da=u.c.div(sa(),(function(e){return e.theme.color.primary})),fa=u.c.div(la());var pa=a.a.memo((function(e){var n=e.onTrackClick,t=e.onTrackDelete,r=e.playingId,i=e.tracks;return a.a.createElement(Xe,{getKey:function(e){return e.id},items:i,itemRenderer:function(e,i){return a.a.createElement(Kr.b,{draggableId:e.id,index:i},(function(o){return a.a.createElement(fa,Object.assign({ref:o.innerRef},o.draggableProps),a.a.createElement(ua,{index:i+1,isEditable:!0,isPlaying:r===e.id,onClick:n,onDelete:t,track:e}),a.a.createElement(da,o.dragHandleProps,a.a.createElement(Wr.a,null)))}))}})}),(function(e,n){return e.playingId===n.playingId&&e.tracks.map((function(e){return e.id})).join()===n.tracks.map((function(e){return e.id})).join()}));var ma=function(e){var n=e.isEditing,t=e.onTrackChange,r=e.onTrackClick,i=(e.onTrackDelete,e.playingId),o=e.tracks,c=e.users;function u(e){t(o.filter((function(n){return n.id!==e.id})))}return n?a.a.createElement(Kr.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var n=function(e,n,t){var r=Array.from(e),a=r.splice(n,1),i=Object(g.a)(a,1)[0];return r.splice(t,0,i),r}(o,e.source.index,e.destination.index);t(n)}}},a.a.createElement(Kr.c,{droppableId:"tracks"},(function(e){return a.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),a.a.createElement(pa,{onTrackClick:r,onTrackDelete:u,playingId:i,tracks:o}),e.placeholder)}))):a.a.createElement(Xe,{getKey:function(e){return e.id},items:o,itemRenderer:function(e,n){return a.a.createElement(ua,{index:n+1,isPlaying:i===e.id,onClick:r,track:e,user:c[M(e)]})}})};function va(){var e=Object(ue.a)(["\n  display: grid;\n  grid-gap: 20px;\n"]);return va=function(){return e},e}function ga(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr;\n"]);return ga=function(){return e},e}function ha(){var e=Object(ue.a)(["\n  align-items: ",";\n  display: grid;\n  grid-gap: ","px;\n  grid-template-columns: ",";\n  padding: 20px;\n"]);return ha=function(){return e},e}function ba(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: ",";\n  padding: 20px;\n"]);return ba=function(){return e},e}function ya(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return ya=function(){return e},e}var xa=u.c.div(ya()),ja=u.c.div(ba(),(function(e){return"small"===e.size?"space-between":"flex-start"})),Ea=u.c.div(ha(),(function(e){return e.isEditing?"flex-start":"center"}),(function(e){return e.isEditing?40:20}),(function(e){return"small"===e.size?"1fr":"1fr auto"})),Oa=u.c.div(ga()),ka=u.c.div(va());var wa=function(e){var n,t=e.navigate,i=e.playlistId,o=W({playlistId:i}),c=o.data,u=o.isLoading,l=o.onDelete,s=o.onSave,d=o.users,f=Object(r.useState)(!1),p=Object(g.a)(f,2),b=p[0],y=p[1],x=Object(r.useState)(!1),j=Object(g.a)(x,2),E=j[0],O=j[1],k=Object(r.useState)(c),w=Object(g.a)(k,2),S=w[0],C=w[1],I=ie(),P=tt();function z(){return(z=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(S);case 2:t(oe);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){E?(b&&s(S),y(!1),O(!1)):(O(!0),C(c))}return a.a.createElement("div",null,E?a.a.createElement(Ea,{isEditing:E,size:P},a.a.createElement(ka,null,a.a.createElement(Oa,null,a.a.createElement(Jn,{playlist:S}),a.a.createElement(ve,{to:"image"},"Edit Image")),a.a.createElement(Pn,{onChange:function(e){C(Object(h.a)({},S,{data:Object(h.a)({},S.data,{title:e})})),y(!0)},title:"Title",value:S.data.title}),a.a.createElement(Pn,{onChange:function(e){C(Object(h.a)({},S,{data:Object(h.a)({},S.data,{artist:e})})),y(!0)},title:"Artist",value:S.data.artist||""})),a.a.createElement(xa,null,a.a.createElement(r.Fragment,null,a.a.createElement(xe,{disabled:!b,onClick:D},"Save"),a.a.createElement(xe,{onClick:function(){y(!1),O(!1),C(c)}},"Cancel")))):a.a.createElement(Ea,{isEditing:E,size:P},a.a.createElement(Zn,{playlist:S}),a.a.createElement(xa,null,a.a.createElement(xe,{onClick:D},"Edit"),a.a.createElement(Jr,{message:"Really Delete?",onClick:function(){return z.apply(this,arguments)}},"Delete"))),E&&a.a.createElement(ja,{size:P},a.a.createElement("h2",null,"Tracks"),a.a.createElement(ve,{to:"tracks"},"Add Tracks")),a.a.createElement(rn,{isLoading:u}),a.a.createElement(ma,{isEditing:E,onTrackChange:function(e){C(Object(h.a)({},S,{data:Object(h.a)({},S.data,{tracks:e})})),y(!0)},onTrackClick:function(e){I.onPlay({playlistId:i,trackId:e.id})},playingId:null===(n=I.track)||void 0===n?void 0:n.id,tracks:S.data.tracks,users:d}))};function Sa(){var e=Object(ue.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ",";\n  padding: 20px;\n"]);return Sa=function(){return e},e}function Ca(){var e=Object(ue.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return Ca=function(){return e},e}var Ia=u.c.div(Ca()),Pa=u.c.div(Sa(),(function(e){return"small"===e.size?"1fr":"1fr auto"}));var za=function(e){var n=e.playlistId,t=W({playlistId:n}),i=t.data,o=t.isLoading,u=t.onSave,l=Object(r.useState)([]),s=Object(g.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(!1),m=Object(g.a)(p,2),v=m[0],b=m[1],y=Object(c.d)(),x=tt(),j=ce("/playlist/".concat(n));return Object(r.useEffect)((function(){var e;f((null===i||void 0===i?void 0:null===(e=i.data)||void 0===e?void 0:e.tracks)||[])}),[o,i]),a.a.createElement("div",null,a.a.createElement(Pa,{size:x},a.a.createElement(Zn,{playlist:i}),a.a.createElement(Ia,null,a.a.createElement(xe,{disabled:!v,onClick:function(){u(Object(h.a)({},i,{data:Object(h.a)({},i.data,{tracks:d})})),y(j)}},"Save"),a.a.createElement(ve,{to:j},"Cancel"))),a.a.createElement(hn,{onSelectionChange:function(e){f(e),v||b(!0)},selectedEntries:d,showFiles:!0}))},Da=Object(l.a)({palette:{primary:f.a}});function Ta(){var e=window.location.href.replace("/auth","").replace(/\/$/,"");return"".concat(e,"/auth")}var Aa=function(){return a.a.createElement(s.a,{theme:Da},a.a.createElement(u.a,{theme:fe},a.a.createElement(E,null,a.a.createElement(C,{authUrl:Ta()},a.a.createElement(ae,null,a.a.createElement(c.c,{basepath:oe},a.a.createElement(Vr,{path:"/"},a.a.createElement(be,{path:"auth"}),a.a.createElement(Nn,{path:"new"}),a.a.createElement(wa,{path:"playlist/:playlistId"}),a.a.createElement(ct,{path:"playlist/:playlistId/image"}),a.a.createElement(za,{path:"playlist/:playlistId/tracks"}),a.a.createElement(St,{path:"/"}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Aa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[81,1,2]]]);
//# sourceMappingURL=main.8e43187a.chunk.js.map