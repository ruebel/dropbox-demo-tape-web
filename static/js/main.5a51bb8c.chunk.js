(this["webpackJsonpdropbox-demo-tape-web"]=this["webpackJsonpdropbox-demo-tape-web"]||[]).push([[0],{79:function(e,n,t){e.exports=t(95)},84:function(e,n,t){},95:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(11),i=t.n(o),c=(t(84),t(20)),u=t(2),l=t(74),s=t(122),d=t(73),f=t.n(d),p=t(8),m=t.n(p),v=t(13),h=t(4),b=t(9),g=t(34),y=t(25);var E=function(e,n){var t=Object(r.useState)((function(){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):n}catch(r){return console.log(r),n}})),a=Object(h.a)(t,2),o=a[0],i=a[1];return[o,function(n){try{var t=n instanceof Function?n(o):n;i(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(r){console.log(r)}}]},j=Object(r.createContext)();function x(e){var n=e.children,t=e.initialState,o=void 0===t?{}:t,i=E("ddt",o),c=Object(h.a)(i,2),u=c[0],l=c[1],s=Object(r.useState)(u),d=Object(h.a)(s,2),f=d[0],p=d[1],m={getValue:function(e){return f[e]},setValue:function(e,n){var t=Object(b.a)({},f,Object(y.a)({},e,n));p(t),l(t)},resetCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(Object(b.a)({},o,{},e))},state:f};return a.a.createElement(j.Provider,{value:m},n)}function O(){var e=Object(r.useContext)(j);if(void 0===e)throw new Error("useCache must be used within a CacheProvider");return e}var k=t(49);var w=function(e){var n=Object.create(null);return"string"!==typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),a=t.length>0?t.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===n[r]?n[r]=a:Array.isArray(n[r])?n[r].push(a):n[r]=[n[r],a]})),n):n},C=r.createContext();function S(e){var n=e.authUrl,t=e.children,a=O(),o=r.useState(a.getValue("clientId")),i=Object(h.a)(o,2),c=i[0],u=i[1],l=r.useState(a.getValue("currentUser")),s=Object(h.a)(l,2),d=s[0],f=s[1],p=r.useState(null),b=Object(h.a)(p,2),g=b[0],y=b[1],E=r.useState(a.getValue("accessToken")),j=Object(h.a)(E,2),x=j[0],S=j[1],I=r.useState(null),P=Object(h.a)(I,2),D=P[0],T=P[1],A=r.useRef();r.useEffect((function(){if(c){A.current=new k.Dropbox({accessToken:x,clientId:c});var e=A.current.getAuthenticationUrl(n);e?T(e):y("Invalid Dropbox Id")}}),[c]),r.useEffect((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.current.usersGetCurrentAccount();case 2:n=e.sent,f(n),a.setValue("currentUser",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x&&!d&&function(){e.apply(this,arguments)}()}),[x]);var z={accessToken:x,authHref:D,clientId:c,currentUser:d,dbx:A.current,error:g,isAuthenticated:Boolean(x),onClearClientId:function(){y(null),a.setValue("clientId",null),u(null)},onLogout:function(){S(""),f(null),a.resetCache({clientId:c})},onSaveClientId:function(e){y(null),a.setValue("clientId",e),u(e)},parseAcessToken:function(e){var n=w(window.location.hash).access_token;A.current=new k.Dropbox({accessToken:n}),S(n),a.setValue("accessToken",n)}};return r.createElement(C.Provider,{value:z},t)}function I(){var e=r.useContext(C);if(void 0===e)throw new Error("useCache must be used within a DropboxContext");return e}var P=function(){var e=O(),n=I(),t=n.dbx,a=n.isAuthenticated,o=Object(r.useState)(!1),i=Object(h.a)(o,2),c=i[0],u=i[1],l=Object(r.useState)(e.getValue("users")||{}),s=Object(h.a)(l,2),d=s[0],f=s[1];function p(){return(p=Object(v.a)(m.a.mark((function e(n){var r,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=n.filter((function(e){return!d[e]}))).length>0&&t&&a)){e.next=16;break}return u(!0),e.prev=3,e.next=6,t.usersGetAccountBatch({account_ids:r});case 6:return o=e.sent,g(i=o.reduce((function(e,n){return Object(b.a)({},e,Object(y.a)({},n.account_id,n))}),d)),u(!1),e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:return e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function g(n){f(n),e.setValue("users",n)}return{data:d,isLoading:c,fetchUsers:function(e){return p.apply(this,arguments)}}};function D(e){return e.meta.id}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.substring(0,e.lastIndexOf("."))}function A(e,n,t,r){return e.map((function(e){return t(e)===n?r:e}))}function z(e,n,t){return L.apply(this,arguments)}function L(){return(L=Object(v.a)(m.a.mark((function e(n,t,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filesUpload({autorename:!1,contents:JSON.stringify(t),mode:{".tag":"overwrite"},mute:!0,path:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(".").pop()}function F(e){var n;return null===e||void 0===e?void 0:null===(n=e.sharing_info)||void 0===n?void 0:n.modified_by}function B(e){return Object(g.a)(new Set(e.map(F))).filter(Boolean)}function R(e){return["mp3","m4a","ovw","wav"].includes(_(e))}function U(e){return"folder"===e[".tag"]}function M(e){return U(e)||function(e){return"file"===e[".tag"]}(e)&&R(e.name)}function N(e){return Object(b.a)({},e,{isAudioFile:R(e.name),isFolder:"folder"===e[".tag"],isPlaylist:(n=e.name,"mix"===_(n)),path:e.path_display,type:e[".tag"],user:F(e)});var n}function V(e){return H.apply(this,arguments)}function H(){return(H=Object(v.a)(m.a.mark((function e(n){var t,r,a,o,i,c,u,l=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"",r=l.length>2?l[2]:void 0,e.next=4,n.filesListFolder({path:t});case 4:return a=e.sent,o=a.cursor,i=a.entries,c=a.hasMore,u={cursor:o,data:i.filter(r?M:U).map(N),hasMore:c,path:t},e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){var n=e.forceRefresh,t=O(),a=I(),o=a.dbx,i=a.isAuthenticated,c=Object(r.useState)(!1),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(t.getValue("playlists")||[]),f=Object(h.a)(d,2),p=f[0],y=f[1],E=P().fetchUsers;function j(){return(j=Object(v.a)(m.a.mark((function e(n,t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(o,t,n);case 2:return r=e.sent,C({data:t,meta:r},!0),e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(v.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,o.filesDelete({path:n.meta.path_lower});case 3:r=p.filter((function(e){return e.meta.id!==n.meta.id})),y(r),t.setValue("playlists",r),s(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(n),e.next=3,z(o,n.data,n.meta.path_lower);case 3:t=e.sent,C(Object(b.a)({},n,{meta:t}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.sort((function(e,n){return e.data.title.localeCompare(n.data.title)}));y(n),t.setValue("playlists",n)}function C(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?[].concat(Object(g.a)(p),[e]):A(p,D(e),D,e);w(t)}return Object(r.useEffect)((function(){if(i&&o&&!l&&(n||0===p.length)){var e=function(){var e=Object(v.a)(m.a.mark((function e(){var n,t,r,a,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.filesSearch({path:"",query:".mix"});case 2:return n=e.sent,t=n.matches,e.next=6,Promise.all(t.map((function(e){return o.filesDownload({path:e.metadata.path_display})})));case 6:return r=e.sent,e.next=9,Promise.all(r.map((function(e){return new Promise((function(n){var t=new FileReader;t.addEventListener("loadend",(function(t){var r=t.srcElement.result,a=JSON.parse(r);n({data:a,meta:e})})),t.readAsText(e.fileBlob)}))})));case 9:return a=e.sent,i=B(r),e.next=13,E(i);case 13:c=e.sent,w((a||[]).map((function(e){return Object(b.a)({},e,{meta:Object(b.a)({},e.meta,{user:c[F(e.meta)]})})}))),s(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s(!0),e()}}),[o,i]),{data:p,isLoading:l,onCreatePlaylist:function(e,n){return j.apply(this,arguments)},onDeletePlaylist:function(e){return x.apply(this,arguments)},onSavePlaylist:function(e){return k.apply(this,arguments)}}};var K=function(e){var n=e.playlistId,t=I(),r=t.dbx,a=t.isAuthenticated,o=J({dbx:r,isAuthenticated:a}),i=o.data,c=o.isLoading,u=o.onDeletePlaylist,l=o.onSavePlaylist,s=i.find((function(e){return e.meta.id===n}));function d(){return(d=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",u(s));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{data:s,isLoading:c,onDelete:function(){return d.apply(this,arguments)},onSave:function(e){l(e)}}},W=Object(r.createContext)(),G="loading",q="paused",$="playing",Q="stopped",X={duration:0,playlistId:null,trackId:null,state:Q};function Y(e,n){switch(n.type){case"loaded":return Object(b.a)({},e,{},n.payload,{state:$});case"pause":return e.state===$?Object(b.a)({},e,{state:q}):e;case"play":return Object(b.a)({},e,{},n.payload,{state:G});case"resume":return Object(b.a)({},e,{state:$});case"stop":return Object(b.a)({},e,{state:Q});default:throw new Error}}function Z(e){var n=e.children,t=e.initialState,o=void 0===t?{}:t,i=Object(r.useReducer)(Y,Object(b.a)({},X,{},o)),c=Object(h.a)(i,2),u=c[0],l=u.duration,s=u.playlistId,d=u.state,f=u.trackId,p=c[1],g=Object(r.useRef)(),y=I().dbx,E=K({playlistId:s}),j=Object(r.useMemo)((function(){var e,n,t=f?null===E||void 0===E?void 0:null===(e=E.data)||void 0===e?void 0:e.data.tracks.findIndex((function(e){return e.id===f})):(null===E||void 0===E?void 0:null===(n=E.data)||void 0===n?void 0:n.data)?0:-1,r=t>=0?E.data.data.tracks[t]:null;return{hasNext:!!r&&t<E.data.data.tracks.length-1,hasPrevious:!!r&&t>0,track:r,trackIndex:t}}),[f,s]),x=j.hasNext,O=j.hasPrevious,k=j.track,w=j.trackIndex;function C(){x&&p({type:"play",payload:{playlistId:s,trackId:E.data.data.tracks[w+1].id}})}function S(){d!==Q&&p({type:"stop"})}Object(r.useEffect)((function(){var e=g.current;e.addEventListener("playing",(function(e){d===G&&p({type:"loaded",payload:{duration:1e3*e.target.duration}})})),e.addEventListener("ended",(function(e){x?C():S()}))})),Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.current,!k||d!==G){e.next=9;break}return e.next=4,y.filesGetTemporaryLink({path:k.path_lower});case 4:t=e.sent,n.setAttribute("src",t.link),n.play(),e.next=10;break;case 9:k&&d===$?n.play():d===q?n.pause():d===Q&&(n.pause(),n.currentTime=0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d,f,s]);var P={duration:l,hasNext:x,hasPrevious:O,onNext:C,onPause:function(){d!==q&&p({type:"pause"})},onPlay:function(e){var n=e.playlistId,t=e.trackId;p({type:"play",payload:{playlistId:n,trackId:t}})},onPrevious:function(){O&&p({type:"play",payload:{playlistId:s,trackId:E.data.data.tracks[w-1].id}})},onResume:function(){d===q&&p({type:"resume"})},onSeek:function(e){k&&(g.current.currentTime=e/1e3)},onStop:S,playlist:E,subscribeToProgress:function(e){g.current.addEventListener("progress",(function(n){e(1e3*n.target.currentTime)}))},state:d,track:k};return a.a.createElement(W.Provider,{value:P},n,a.a.createElement("audio",{ref:g}))}function ee(){var e=Object(r.useContext)(W);if(void 0===e)throw new Error("useAudio must be used within a AudioProvider");return e}var ne="/dropbox-demo-tape-web",te=t(3);function re(){var e=Object(te.a)(["\n      font-size: 14px;\n      font-weight: 400;\n    "]);return re=function(){return e},e}function ae(){var e=Object(te.a)(["\n      font-size: 16px;\n    "]);return ae=function(){return e},e}var oe={background:"#242A31",backgroundLight:"#2D323C",disabled:"#656565",error:"#E7777F",inherit:"inherit",primary:"#D2D2D2",secondary:"#b3b3b3",success:"#A1CA7E",transparent:"transparent",white:"#FFFFFF"},ie={color:Object(b.a)({},oe,{highlight:"#5EB1BF",bgHighlight:oe.primary+"11"}),typography:{base:Object(u.b)(ae()),sub:Object(u.b)(re())},space:{small:5,medium:10,large:20},transition:"all 250ms ease-in"};function ce(){var e=Object(te.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ",";\n\n  :hover,\n  :focus {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return ce=function(){return e},e}var ue=u.c.button(ce(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.disabled,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""}));function le(){var e=Object(te.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ",";\n\n  :hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return le=function(){return e},e}var se=u.c.a(le(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n  color: ".concat(e.theme.color.disabled,";\n  cursor: unset;\n  border-color: ").concat(e.theme.color.disabled,";\n\n  :hover {\n    background-color: ").concat(e.theme.color.background,";\n    color: ").concat(e.theme.color.disabled,";\n  }\n"):""}));var de=function(e){return a.a.createElement(se,Object.assign({as:e.to?c.a:void 0},e))},fe=t(46);function pe(){var e=Object(te.a)(["\n  color: ",";\n  position: relative;\n\n  :focus-within {\n    color: ",";\n  }\n\n  ","\n"]);return pe=function(){return e},e}function me(){var e=Object(te.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return me=function(){return e},e}function ve(){var e=Object(te.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n"]);return ve=function(){return e},e}function he(){var e=Object(te.a)(["\n  ","\n  font-size: 14px;\n  font-weight: 700;\n"]);return he=function(){return e},e}function be(){var e=Object(te.a)(["\n  border-color: ",";\n  color: ",";\n"]);return be=function(){return e},e}var ge=Object(u.b)(be(),(function(e){return e.theme.color.error}),(function(e){return e.theme.color.error})),ye=u.c.span(he(),ge),Ee=u.c.input(ve(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.primary})),je=u.c.div(me(),(function(e){return e.theme.color.background})),xe=u.c.label(pe(),(function(e){return e.theme.color.secondary}),(function(e){return e.theme.color.white}),(function(e){return e.hasError?ge:""}));var Oe=function(e){var n=e.error,t=e.hasError,r=e.onChange,o=e.title,i=e.value,c=Object(fe.a)(e,["error","hasError","onChange","title","value"]);return a.a.createElement(xe,{hasError:t},a.a.createElement(Ee,Object.assign({},c,{hasError:t,onChange:function(e){return r(e.target.value)},type:"text",value:i})),a.a.createElement(je,null,o),n&&a.a.createElement(ye,null,n))};function ke(){var e=Object(te.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n"]);return ke=function(){return e},e}function we(){var e=Object(te.a)(["\n  display: grid;\n  grid-gap: 20px;\n  position: relative;\n  width: 300px;\n"]);return we=function(){return e},e}var Ce=u.c.form(we()),Se=u.c.div(ke());var Ie=function(){var e=I(),n=e.authHref,t=e.clientId,o=e.error,i=e.isAuthenticated,u=e.parseAcessToken,l=e.onClearClientId,s=e.onSaveClientId,d=Object(r.useState)(t||""),f=Object(h.a)(d,2),p=f[0],m=f[1];return!i&&window.location.hash.includes("access_token")&&u(),i?a.a.createElement(c.b,{noThrow:!0,to:ne}):a.a.createElement(Se,null,a.a.createElement("h1",null,"Welcome"),t?a.a.createElement(r.Fragment,null,a.a.createElement(de,{disabled:!t,href:n},"Authenticate With Dropbox"),a.a.createElement(ue,{onClick:l},"Clear Dropbox Client Id")):a.a.createElement(Ce,{onSubmit:function(e){return p&&(s(p),m("")),e.preventDefault(),!1}},a.a.createElement(Oe,{error:o,hasError:o,onChange:function(e){m(e)},title:"Dropbox Client Id",value:p}),a.a.createElement(ue,{disabled:!p,type:"submit"},"Save")))},Pe=t(59),De=t.n(Pe);function Te(){var e=Object(te.a)(["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return Te=function(){return e},e}var Ae=u.c.button(Te(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight})),ze=function(e){var n=e.name,t=void 0===n?"Home":n,r=e.onClick,o=e.path;return a.a.createElement(Ae,{onClick:function(){return r(o)}},t)};function Le(){var e=Object(te.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n"]);return Le=function(){return e},e}var _e=u.c.div(Le());var Fe=function(e){var n=e.onClick,t=(e.onSort,e.path),o=(void 0===t?"":t).split("/").map((function(e,t,o){var i=o.slice(0,t+1).join("/");return a.a.createElement(r.Fragment,{key:t},0!==t&&a.a.createElement("span",null,"/"),a.a.createElement(ze,{name:e||"Home",onClick:n,path:i}))}));return a.a.createElement(_e,null,a.a.createElement(De.a,null)," ",o)},Be=t(75),Re=t(62),Ue=t.n(Re),Me=t(60),Ne=t.n(Me),Ve=t(61),He=t.n(Ve);function Je(){var e=Object(te.a)(["\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return Je=function(){return e},e}function Ke(){var e=Object(te.a)(["\n  ","\n"]);return Ke=function(){return e},e}function We(){var e=Object(te.a)(["\n  ","\n"]);return We=function(){return e},e}function Ge(){var e=Object(te.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n"]);return Ge=function(){return e},e}var qe=u.c.div(Ge()),$e=u.c.span(We(),(function(e){return e.theme.typography.base})),Qe=u.c.span(Ke(),(function(e){return e.theme.typography.sub})),Xe=u.c.button(Je(),(function(e){return e.theme.color[e.isSelected?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isSelected?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary}));var Ye=function(e){var n,t,r=e.entry,o=e.onClick,i=e.isSelected,c=void 0!==i&&i,u=c?Ne.a:r.isFolder?He.a:Ue.a;return a.a.createElement(Xe,{isSelected:c,onClick:function(){return o(r)}},a.a.createElement(qe,null,a.a.createElement(u,null),a.a.createElement($e,null,r.name),"file"===r.type&&a.a.createElement(Qe,null,Object(Be.a)(new Date(r.server_modified))," ago"),"file"===r.type&&a.a.createElement(Qe,null,null===(n=r.user)||void 0===n?void 0:null===(t=n.name)||void 0===t?void 0:t.display_name)))};function Ze(){var e=Object(te.a)(["\n  liststyletype: none;\n  margin: 0;\n  marginblockend: 0;\n  marginblockstart: 0;\n  padding: 0;\n  paddinginlinestart: 0;\n  webkitmarginafter: 0;\n  webkitmarginbefore: 0;\n  webkitpaddingstart: 0;\n  ","\n"]);return Ze=function(){return e},e}function en(){var e=Object(te.a)(["\n  ","\n  color: ",";\n  font-size: 18px;\n  padding: 20px;\n"]);return en=function(){return e},e}var nn=function(e,n){return n},tn=u.c.div(en(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color.secondary})),rn=u.c.ul(Ze(),(function(e){return(n=e.gap)?"\n        display: grid;\n        grid-gap: ".concat(n,"px;\n      "):"";var n}));function an(e){var n=e.emptyMessage,t=e.isLoading,r=e.itemRenderer,o=e.items,i=e.gap,c=e.getKey,u=void 0===c?nn:c;if(!t&&0===o.length&&n)return a.a.createElement(tn,null,n);var l=o.map((function(e,n){return a.a.createElement("li",{key:u(e,n)},r(e,n))}));return a.a.createElement(rn,{gap:i},l)}an.defaultProps={getKey:nn};var on=an,cn=t(121);function un(){var e=Object(te.a)(["\n  height: ",";\n  width: ",";\n"]);return un=function(){return e},e}var ln=u.c.div(un(),(function(e){return e.height}),(function(e){return e.width}));function sn(){var e=Object(te.a)(["\n  margin-bottom: -4px;\n"]);return sn=function(){return e},e}var dn=u.c.div(sn());var fn=function(e){var n=e.isLoading;return a.a.createElement(dn,null,n?a.a.createElement(cn.a,null):a.a.createElement(ln,{height:"4px"}))},pn=t(64),mn=t.n(pn),vn=t(63),hn=t.n(vn);function bn(){var e=Object(te.a)(["\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return bn=function(){return e},e}var gn=u.c.button(bn(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight}));var yn=function(e){var n=e.children,t=e.onClick,r=e.sortDir,o="asc"===r?hn.a:"desc"===r?mn.a:null;return a.a.createElement(gn,{onClick:t},a.a.createElement("span",null,n),o&&a.a.createElement(o,null))};var En=function(e){var n=e.folder,t=void 0===n?"":n,a=e.showFiles,o=void 0!==a&&a,i=e.sortBy,c=void 0===i?"":i,u=e.sortDir,l=void 0===u?"":u,s=I().dbx,d=Object(r.useState)({}),f=Object(h.a)(d,2),p=f[0],g=f[1],E=Object(r.useState)(!1),j=Object(h.a)(E,2),x=j[0],O=j[1],k=P().fetchUsers;Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n,r,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,V(s,t,o);case 3:return n=e.sent,r=B(n.data),e.next=7,k(r);case 7:a=e.sent,i=Object(b.a)({},n,{data:n.data.map((function(e){return Object(b.a)({},e,{user:a[F(e)]})}))}),g(Object(y.a)({},t,i)),O(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s&&function(){e.apply(this,arguments)}()}),[s,t]);var w=p[t]||{},C=w.cursor,S=w.data,D=void 0===S?[]:S,T=w.hasMore,A=D;return c&&l&&("name"===c?A=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?e.name.localeCompare(t.name):"folder"===t.type?1:-1)*n}}(l)):"modified"===c?A=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?new Date(t.server_modified)-new Date(e.server_modified):"folder"===t.type?1:-1)*n}}(l)):"modifiedBy"===c&&(A=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){var r,a,o,i;return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?null===(r=e.user)||void 0===r?void 0:null===(a=r.name)||void 0===a?void 0:a.display_name.localeCompare(null===(o=t.user)||void 0===o?void 0:null===(i=o.name)||void 0===i?void 0:i.display_name):"folder"===t.type?1:-1)*n}}(l)))),{cursor:C,files:A,folder:t,hasMore:T,isLoading:x}};function jn(){var e=Object(te.a)(["\n  display: grid;\n"]);return jn=function(){return e},e}function xn(){var e=Object(te.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n"]);return xn=function(){return e},e}var On=u.c.div(xn()),kn=u.c.div(jn());var wn=function(e){var n=e.onPathChange,t=e.onSelectionChange,o=e.selectedEntries,i=void 0===o?[]:o,c=e.showFiles,u=void 0!==c&&c,l=Object(r.useState)(""),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(""),m=Object(h.a)(p,2),v=m[0],b=m[1],y=Object(r.useState)(""),E=Object(h.a)(y,2),j=E[0],x=E[1],O=En({folder:d,showFiles:u,sortBy:v,sortDir:j}),k=O.files,w=O.isLoading;function C(e){"folder"===e.type?(f(e.path),n&&n(e.path)):u&&(i.some((function(n){return n.id===e.id}))?t(i.filter((function(n){return n.id!==e.id}))):t([].concat(Object(g.a)(i),[e])))}function S(e){e!==v?(b(e),x("desc")):"desc"===j?x("asc"):(x(""),b(""))}return a.a.createElement(kn,null,a.a.createElement(Fe,{onClick:f,path:d}),a.a.createElement(ln,{height:"10px"}),a.a.createElement(On,null,a.a.createElement("span",null),a.a.createElement(yn,{onClick:function(){return S("name")},sortDir:"name"===v?j:null},"Name"),a.a.createElement(yn,{onClick:function(){return S("modified")},sortDir:"modified"===v?j:null},"Modified"),a.a.createElement(yn,{onClick:function(){return S("modifiedBy")},sortDir:"modifiedBy"===v?j:null},"Modified By")),a.a.createElement(fn,{isLoading:w}),a.a.createElement(on,{emptyMessage:"There are no files here",isLoading:w,items:k,itemRenderer:function(e){return a.a.createElement(Ye,{entry:e,isSelected:i.some((function(n){return n.path_lower===e.path_lower})),onClick:C})}}))};function Cn(){var e=Object(te.a)(["\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n"]);return Cn=function(){return e},e}function Sn(){var e=Object(te.a)([""]);return Sn=function(){return e},e}function In(){var e=Object(te.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n"]);return In=function(){return e},e}function Pn(){var e=Object(te.a)(["\n  border: 1px solid ",";\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n"]);return Pn=function(){return e},e}function Dn(){var e=Object(te.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return Dn=function(){return e},e}function Tn(){var e=Object(te.a)(["\n  overflow-y: scroll;\n  height: 470px;\n"]);return Tn=function(){return e},e}var An=u.c.div(Tn()),zn=u.c.div(Dn(),(function(e){return e.theme.color.background})),Ln=u.c.div(Pn(),(function(e){return e.theme.color.primary})),_n=u.c.div(In()),Fn=u.c.h2(Sn()),Bn=u.c.form(Cn());var Rn=function(e){var n=e.navigate,t=Object(r.useState)(""),o=Object(h.a)(t,2),i=o[0],c=o[1],u=Object(r.useState)(""),l=Object(h.a)(u,2),s=l[0],d=l[1],f=Object(r.useState)("/"),p=Object(h.a)(f,2),b=p[0],g=p[1],y=J({}).onCreatePlaylist,E=!!i&&!!s&&!!b;function j(){return(j=Object(v.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y("".concat(b,"/").concat(s,".mix"),{artist:i,title:s,tracks:[]});case 3:return r=e.sent,n("/playlist/".concat(r)),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(Bn,{onSubmit:E?function(e){return j.apply(this,arguments)}:void 0},a.a.createElement(_n,null,a.a.createElement(Fn,null,"Add Playlist"),a.a.createElement(ue,{disabled:!E,type:"submit"},"Save"),a.a.createElement(de,{to:ne},"Cancel")),a.a.createElement(Oe,{onChange:d,title:"Title",value:s}),a.a.createElement(Oe,{onChange:c,title:"Artist",value:i}),a.a.createElement(Ln,null,a.a.createElement(An,null,a.a.createElement(wn,{onPathChange:g})),a.a.createElement(zn,null,"Location")))},Un=t(44);function Mn(){var e=Object(te.a)(["\n  color: ",";\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n  }\n"]);return Mn=function(){return e},e}var Nn=Object(u.c)(c.a)(Mn(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight}));function Vn(){var e=Object(te.a)(["\n  display: grid;\n"]);return Vn=function(){return e},e}function Hn(){var e=Object(te.a)(["\n  ","\n  align-items: center;\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return Hn=function(){return e},e}function Jn(){var e=Object(te.a)(["\n  ","\n  color: ",";\n"]);return Jn=function(){return e},e}function Kn(){var e=Object(te.a)(["\n  ","\n  text-align: right;\n"]);return Kn=function(){return e},e}function Wn(){var e=Object(te.a)(["\n  color: ",";\n"]);return Wn=function(){return e},e}function Gn(){var e=Object(te.a)([""]);return Gn=function(){return e},e}function qn(){var e=Object(te.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n"]);return qn=function(){return e},e}var $n=u.c.div(qn()),Qn=u.c.h2(Gn()),Xn=u.c.div(Wn(),(function(e){return e.theme.color.disabled})),Yn=u.c.span(Kn(),(function(e){return e.theme.typography.sub})),Zn=u.c.span(Jn(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.secondary})),et=u.c.div(Hn(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary})),nt=u.c.div(Vn());var tt=function(){var e=J({forceRefresh:!0});return a.a.createElement("div",null,a.a.createElement($n,null,a.a.createElement(de,{to:"new"},"Add")),a.a.createElement(fn,{isLoading:e.isLoading}),a.a.createElement(on,{getKey:function(e){return e.meta.id},items:e.data,itemRenderer:function(e){var n,t,r=null===(n=e.meta.user)||void 0===n?void 0:null===(t=n.name)||void 0===t?void 0:t.display_name;return a.a.createElement(Nn,{to:"playlist/".concat(e.meta.id)},a.a.createElement(et,null,a.a.createElement(nt,null,a.a.createElement(Qn,null,e.data.title),a.a.createElement(Zn,null,e.data.artist||e.meta.path_display)),a.a.createElement(Yn,null,"Updated"," ",Object(Un.a)(new Date(e.meta.server_modified),new Date),a.a.createElement(Xn,null,Boolean(r)?"by ":"",r))))}}))};var rt=function(){return a.a.createElement(tt,null)},at=t(65),ot=t.n(at),it=t(123),ct=t(124);function ut(){var e=Object(te.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  height: ","px;\n  width: ","px;\n"]);return ut=function(){return e},e}function lt(){var e=Object(te.a)(["\n  font-size: 16px;\n"]);return lt=function(){return e},e}function st(){var e=Object(te.a)([""]);return st=function(){return e},e}var dt=u.c.img(st()),ft=u.c.span(lt()),pt=u.c.div(ut(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.background}),(function(e){return e.size}),(function(e){return e.size}));var mt=function(e){var n=e.initials,t=e.name,o=e.size,i=void 0===o?36:o,c=e.url,u=Object(r.useState)(!1),l=Object(h.a)(u,2),s=l[0],d=l[1];return Object(r.useEffect)((function(){c&&s&&d(!1)}),[c]),a.a.createElement(pt,{size:i},c&&!s?a.a.createElement(dt,{alt:t||n,onError:function(){return d(!0)},src:c}):a.a.createElement(ft,null,n))};function vt(){var e=Object(te.a)(["\n  align-items: center;\n  background-color: ",";\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n"]);return vt=function(){return e},e}function ht(){var e=Object(te.a)(["\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n"]);return ht=function(){return e},e}function bt(){var e=Object(te.a)(["\n  padding-left: 10px;\n"]);return bt=function(){return e},e}function gt(){var e=Object(te.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n"]);return gt=function(){return e},e}var yt=u.c.div(gt()),Et=u.c.h1(bt()),jt=u.c.button(ht()),xt=u.c.div(vt(),(function(e){return e.theme.color.backgroundLight}));var Ot=function(e){e.location;var n=Object(r.useState)(null),t=Object(h.a)(n,2),o=t[0],i=t[1],c=I(),u=c.currentUser,l=c.onLogout;return a.a.createElement(xt,null,a.a.createElement(Nn,{to:ne},a.a.createElement(yt,null,a.a.createElement(ot.a,{fontSize:"large"}),a.a.createElement(Et,null,"Demo Tape"))),a.a.createElement("span",null),u&&a.a.createElement(r.Fragment,null,a.a.createElement(jt,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}},a.a.createElement(mt,{initials:null===u||void 0===u?void 0:u.name.abbreviated_name,name:null===u||void 0===u?void 0:u.name.display_name,url:null===u||void 0===u?void 0:u.profile_photo_url})),a.a.createElement(it.a,{elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},id:"user-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){i(null)}},a.a.createElement(ct.a,{onClick:function(){l()}},"Logout"))))},kt=t(67),wt=t.n(kt),Ct=t(43),St=t.n(Ct),It=t(68),Pt=t.n(It),Dt=t(66),Tt=t.n(Dt);function At(){var e=Object(te.a)(["\n  background-color: ",";\n  border: ",";\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  transition: ",";\n  width: ","px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ",";\n  }\n\n  ","\n"]);return At=function(){return e},e}var zt=u.c.button(At(),(function(e){return e.theme.color.background}),(function(e){return e.hideBorder?"none":"1px solid white"}),(function(e){return e.size||30}),(function(e){return e.theme.transition}),(function(e){return e.size||30}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.transparent,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""}));function Lt(e){var n=e/1e3,t=Math.floor(n%60);return _t(Math.floor(n/60))+":"+_t(t)}function _t(e){var n=e.toString();return e<10?"0"+n:n}function Ft(){var e=Object(te.a)(["\n  align-items: center;\n  color: ",";\n  display: grid;\n  grid-template-columns: 80px 1fr 80px;\n  grid-gap: 5px;\n"]);return Ft=function(){return e},e}function Bt(){var e=Object(te.a)(["\n  text-align: right;\n"]);return Bt=function(){return e},e}var Rt=u.c.span(Bt()),Ut=u.c.div(Ft(),(function(e){return e.theme.color[e.isDisabled?"disabled":"primary"]}));var Mt=function(){var e=ee(),n=Object(r.useState)(0),t=Object(h.a)(n,2),o=t[0],i=t[1],c=Object(r.useState)(0),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(!1),f=Object(h.a)(d,2),p=f[0],m=f[1];Object(r.useEffect)((function(){e.subscribeToProgress(i)}),[e.subscribeToProgress]);var v=p?l:o;return a.a.createElement(Ut,{isDisabled:!e.track},a.a.createElement(Rt,null,Lt(v)),a.a.createElement("input",{type:"range",disabled:!e.track,min:0,max:e.duration,onChange:function(n){if(p)s(n.target.value);else{var t=parseInt(l);isNaN(t)||(e.onSeek(t),i(t))}},onMouseDown:function(e){m(!0)},onMouseUp:function(e){m(!1)},value:v}),a.a.createElement("span",null,Lt(e.duration)))};function Nt(){var e=Object(te.a)(["\n  display: grid;\n  grid-gap: 2px;\n"]);return Nt=function(){return e},e}function Vt(){var e=Object(te.a)(["\n  ","\n  font-weight: 500;\n"]);return Vt=function(){return e},e}function Ht(){var e=Object(te.a)(["\n  ","\n  color: ",";\n"]);return Ht=function(){return e},e}var Jt=u.c.div(Ht(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),Kt=u.c.div(Vt(),(function(e){return e.theme.typography.base})),Wt=u.c.div(Nt());var Gt=function(e){var n,t,r,o,i=e.playlist,c=e.track;return a.a.createElement(Wt,null,a.a.createElement(Kt,null,T(null===c||void 0===c?void 0:c.name)),a.a.createElement(Jt,null,(null===i||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.author)||(null===i||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.title)))};function qt(){var e=Object(te.a)(["\n  align-items: center;\n  background-color: ",";\n  bottom: 0;\n  display: grid;\n  grid-template-columns: 200px 1fr;\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n"]);return qt=function(){return e},e}function $t(){var e=Object(te.a)(["\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n"]);return $t=function(){return e},e}function Qt(){var e=Object(te.a)(["\n  display: flex;\n  justify-content: center;\n"]);return Qt=function(){return e},e}function Xt(){var e=Object(te.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n"]);return Xt=function(){return e},e}var Yt=u.c.div(Xt()),Zt=u.c.div(Qt()),er=u.c.div($t()),nr=u.c.div(qt(),(function(e){return e.theme.color.backgroundLight}));var tr=function(){var e=ee(),n=!!e.track,t=e.state===$,r=e.state===G;return a.a.createElement(nr,null,a.a.createElement(Gt,{playlist:e.playlist,track:e.track}),a.a.createElement(Zt,null,a.a.createElement(er,null,a.a.createElement(Yt,null,a.a.createElement(zt,{"aria-label":"Previous",disabled:!e.hasPrevious,hideBorder:!0,onClick:e.onPrevious},a.a.createElement(Tt.a,{fontSize:"small"})),t?a.a.createElement(zt,{"aria-label":"Pause",onClick:e.onPause,size:40},a.a.createElement(wt.a,null)):a.a.createElement(zt,{"aria-label":"Play",disabled:r||!n,onClick:function(){return e.onResume()},size:40},a.a.createElement(St.a,null)),a.a.createElement(zt,{"aria-label":"Next",disabled:!e.hasNext,hideBorder:!0,onClick:e.onNext},a.a.createElement(Pt.a,{fontSize:"small"}))),a.a.createElement(Mt,null))))};function rr(){var e=Object(te.a)(["\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n"]);return rr=function(){return e},e}function ar(){var e=Object(te.a)(["\n  background-color: ",";\n  overflow-y: scroll;\n  padding-bottom: 113px;\n"]);return ar=function(){return e},e}var or=u.c.main(ar(),(function(e){return e.theme.color.background})),ir=u.c.div(rr());var cr=function(e){var n=e.children,t=e.location;return I().isAuthenticated||t.pathname.includes("/auth")?a.a.createElement(ir,null,a.a.createElement(Ot,{location:t}),a.a.createElement(or,null,n),a.a.createElement(tr,null)):a.a.createElement(c.b,{noThrow:!0,to:"auth"})};var ur=function(e){var n=e.message,t=e.onClick,o=Object(fe.a)(e,["message","onClick"]),i=Object(r.useState)(!1),c=Object(h.a)(i,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){l(!1)}),2e3);return function(){clearTimeout(e)}}),[u]),u?a.a.createElement(ue,{onBlur:function(){return l(!1)},onClick:t},n||"Are you sure?"):a.a.createElement(ue,Object.assign({onClick:function(){l(!0)}},o))};function lr(){var e=Object(te.a)(["\n  color: ",";\n"]);return lr=function(){return e},e}function sr(){var e=Object(te.a)(["\n  display: grid;\n"]);return sr=function(){return e},e}function dr(){var e=Object(te.a)(["\n  ","\n  color: ",";\n"]);return dr=function(){return e},e}var fr=u.c.div(dr(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),pr=u.c.div(sr()),mr=u.c.span(lr(),(function(e){return e.theme.color.primary}));var vr=function(e){var n=e.playlist;return a.a.createElement(pr,null,a.a.createElement("h1",null,n.data.title),n.data.artist&&a.a.createElement(fr,null,"By ",a.a.createElement(mr,null,n.data.artist)))},hr=t(47),br=t(72),gr=t.n(br),yr=t(69),Er=t.n(yr),jr=t(70),xr=t.n(jr);function Or(){var e=Object(te.a)(["\n","\nbackground-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n  \n  :hover {\n    background-color: ","11;\n    \n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n"]);return Or=function(){return e},e}function kr(){var e=Object(te.a)(["\n  color: ",";\n  font-size: 11px;\n"]);return kr=function(){return e},e}function wr(){var e=Object(te.a)(["\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 30px;\n  width: 30px;\n"]);return wr=function(){return e},e}function Cr(){var e=Object(te.a)(["\n  align-items: center;\n  display: grid;\n  line-height: 30px;\n  grid-gap: 5px;\n  grid-template-columns: 40px 20px 1fr auto;\n  padding: ","px;\n"]);return Cr=function(){return e},e}var Sr=u.c.div(Cr(),(function(e){return e.theme.space.medium})),Ir=u.c.span(wr(),(function(e){return e.isPlaying?"white":"transparent"})),Pr=u.c.span(kr(),(function(e){return e.theme.color.secondary})),Dr=u.c.button(Or(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.color.primary}));var Tr=function(e){var n=e.index,t=e.isEditable,r=e.isPlaying,o=e.onClick,i=e.onDelete,c=e.track,u=e.user;return a.a.createElement(Dr,{isPlaying:r,onClick:t?void 0:function(){return o(c)}},a.a.createElement(Sr,null,t?a.a.createElement(zt,{onClick:function(){return i(c)}},a.a.createElement(Er.a,{fontSize:"small"})):a.a.createElement(Ir,{id:"play",isPlaying:r},r?a.a.createElement(xr.a,{fontSize:"small"}):a.a.createElement(St.a,{fontSize:"small"})),a.a.createElement("span",null,n,"."),a.a.createElement("span",null,T(c.name)),t?a.a.createElement("div",null):a.a.createElement(Pr,null,"Updated"," ",Object(Un.a)(new Date(c.server_modified),new Date),u?" by ".concat(u.name.full):"")))};function Ar(){var e=Object(te.a)(["\n  position: relative;\n"]);return Ar=function(){return e},e}function zr(){var e=Object(te.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n"]);return zr=function(){return e},e}var Lr=u.c.div(zr(),(function(e){return e.theme.color.primary})),_r=u.c.div(Ar());var Fr=a.a.memo((function(e){var n=e.onTrackClick,t=e.onTrackDelete,r=e.playingId,o=e.tracks;return a.a.createElement(on,{getKey:function(e){return e.id},items:o,itemRenderer:function(e,o){return a.a.createElement(hr.b,{draggableId:e.id,index:o},(function(i){return a.a.createElement(_r,Object.assign({ref:i.innerRef},i.draggableProps),a.a.createElement(Tr,{index:o+1,isEditable:!0,isPlaying:r===e.id,onClick:n,onDelete:t,track:e}),a.a.createElement(Lr,i.dragHandleProps,a.a.createElement(gr.a,null)))}))}})}),(function(e,n){return e.playingId===n.playingId&&e.tracks.map((function(e){return e.id})).join()===n.tracks.map((function(e){return e.id})).join()}));var Br=function(e){var n=e.isEditing,t=e.onTrackChange,r=e.onTrackClick,o=(e.onTrackDelete,e.playingId),i=e.tracks;function c(e){t(i.filter((function(n){return n.id!==e.id})))}return n?a.a.createElement(hr.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var n=function(e,n,t){var r=Array.from(e),a=r.splice(n,1),o=Object(h.a)(a,1)[0];return r.splice(t,0,o),r}(i,e.source.index,e.destination.index);t(n)}}},a.a.createElement(hr.c,{droppableId:"tracks"},(function(e){return a.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),a.a.createElement(Fr,{onTrackClick:r,onTrackDelete:c,playingId:o,tracks:i}),e.placeholder)}))):a.a.createElement(on,{getKey:function(e){return e.id},items:i,itemRenderer:function(e,n){return a.a.createElement(Tr,{index:n+1,isPlaying:o===e.id,onClick:r,track:e})}})};function Rr(){var e=Object(te.a)(["\n  display: grid;\n  grid-gap: 20px;\n"]);return Rr=function(){return e},e}function Ur(){var e=Object(te.a)(["\n  align-items: ",";\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: ","px;\n  grid-template-columns: 1fr auto;\n  padding: 20px;\n"]);return Ur=function(){return e},e}function Mr(){var e=Object(te.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: flex-start;\n  padding: 20px;\n"]);return Mr=function(){return e},e}function Nr(){var e=Object(te.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return Nr=function(){return e},e}var Vr=u.c.div(Nr()),Hr=u.c.div(Mr()),Jr=u.c.div(Ur(),(function(e){return e.isEditing?"flex-start":"center"}),(function(e){return e.isEditing?40:20})),Kr=u.c.div(Rr());var Wr=function(e){var n,t=e.navigate,o=e.playlistId,i=K({playlistId:o}),c=i.data,u=i.isLoading,l=i.onDelete,s=i.onSave,d=Object(r.useState)(!1),f=Object(h.a)(d,2),p=f[0],g=f[1],y=Object(r.useState)(!1),E=Object(h.a)(y,2),j=E[0],x=E[1],O=Object(r.useState)(c),k=Object(h.a)(O,2),w=k[0],C=k[1],S=ee();function I(){return(I=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(w);case 2:t(ne);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){j?(p&&s(w),g(!1),x(!1)):(x(!0),C(c))}return a.a.createElement("div",null,j?a.a.createElement(Jr,{isEditing:j},a.a.createElement(Kr,null,a.a.createElement(Oe,{onChange:function(e){C(Object(b.a)({},w,{data:Object(b.a)({},w.data,{title:e})})),g(!0)},title:"Title",value:w.data.title}),a.a.createElement(Oe,{onChange:function(e){C(Object(b.a)({},w,{data:Object(b.a)({},w.data,{artist:e})})),g(!0)},title:"Artist",value:w.data.artist||""})),a.a.createElement(Vr,null,a.a.createElement(r.Fragment,null,a.a.createElement(ue,{disabled:!p,onClick:P},"Save"),a.a.createElement(ue,{onClick:function(){g(!1),x(!1),C(c)}},"Cancel")))):a.a.createElement(Jr,{isEditing:j},a.a.createElement(vr,{playlist:w}),a.a.createElement(Vr,null,a.a.createElement(ue,{onClick:P},"Edit"),a.a.createElement(ur,{message:"Really Delete?",onClick:function(){return I.apply(this,arguments)}},"Delete"))),j&&a.a.createElement(Hr,null,a.a.createElement("h2",null,"Tracks"),a.a.createElement(de,{to:"tracks"},"Add Tracks")),a.a.createElement(fn,{isLoading:u}),a.a.createElement(Br,{isEditing:j,onTrackChange:function(e){C(Object(b.a)({},w,{data:Object(b.a)({},w.data,{tracks:e})})),g(!0)},onTrackClick:function(e){S.onPlay({playlistId:o,trackId:e.id})},playingId:null===(n=S.track)||void 0===n?void 0:n.id,tracks:w.data.tracks}))};function Gr(){var e=Object(te.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: 1fr auto auto;\n  padding: 20px;\n"]);return Gr=function(){return e},e}var qr=u.c.div(Gr());var $r=function(e){var n=e.playlistId,t=K({playlistId:n}),o=t.data,i=t.isLoading,u=t.onSave,l=Object(r.useState)([]),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(!1),m=Object(h.a)(p,2),v=m[0],g=m[1],y=Object(c.d)(),E="/playlist/".concat(n);return Object(r.useEffect)((function(){var e;f((null===o||void 0===o?void 0:null===(e=o.data)||void 0===e?void 0:e.tracks)||[])}),[i,o]),a.a.createElement("div",null,a.a.createElement(qr,null,a.a.createElement(vr,{playlist:o}),a.a.createElement(ue,{disabled:!v,onClick:function(){u(Object(b.a)({},o,{data:Object(b.a)({},o.data,{tracks:d})})),y(E)}},"Save"),a.a.createElement(de,{to:E},"Cancel")),a.a.createElement(wn,{onSelectionChange:function(e){f(e),v||g(!0)},selectedEntries:d,showFiles:!0}))},Qr=Object(l.a)({palette:{primary:f.a}});var Xr=function(){return a.a.createElement(s.a,{theme:Qr},a.a.createElement(u.a,{theme:ie},a.a.createElement(x,null,a.a.createElement(S,{authUrl:"".concat(window.location.href)},a.a.createElement(Z,null,a.a.createElement(c.c,{basepath:ne},a.a.createElement(cr,{path:"/"},a.a.createElement(Ie,{path:"auth"}),a.a.createElement(Rn,{path:"new"}),a.a.createElement(Wr,{path:"playlist/:playlistId"}),a.a.createElement($r,{path:"playlist/:playlistId/tracks"}),a.a.createElement(rt,{path:"/"}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(Xr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.5a51bb8c.chunk.js.map