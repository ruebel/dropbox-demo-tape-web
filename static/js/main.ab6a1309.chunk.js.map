{"version":3,"sources":["useLocalStorage.js","cacheContext.js","parseQueryString.js","dropboxContext.js","useUsers.js","utils.js","dropxboxUtils.js","Explorer/fileUtils.js","usePlaylists.js","usePlaylist.js","useMediaSession.js","audioContext.js","constants.js","useErrorTracking.js","theme.js","ButtonLink.js","Auth.js","Button.js","Explorer/Breadcrumb.js","Explorer/BreadcrumbTrail.js","Explorer/Entry.js","List.js","Spacer.js","Loader.js","Explorer/SortableHeader.js","Explorer/useFiles.js","Explorer/index.js","TextInput.js","AddPlaylist.js","PlaylistImage.js","PlaylistHeader.js","useSize.js","ImageExplorer.js","Link.js","Playlists.js","Home.js","Avatar.js","Main/Header.js","IconButton.js","Main/Player/utils.js","Main/Player/Position.js","Main/Player/SongDetails.js","Main/Player/Volume.js","Main/Player/Player.js","Main/Main.js","ConfirmationButton.js","Playlist/Track.js","Playlist/TrackList.js","Playlist/index.js","Tracks.js","App.js","serviceWorker.js","index.js"],"names":["useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","CacheContext","createContext","CacheProvider","children","initialState","setLocalStorage","state","setState","useEffect","getValue","setValue","currentState","resetCache","stateToLoad","Provider","useCache","context","useContext","undefined","Error","parseQueryString","str","ret","Object","create","trim","replace","split","forEach","param","parts","shift","val","length","join","decodeURIComponent","Array","isArray","push","DropboxContext","React","DropboxProvider","authUrl","cache","currentUser","setCurrentUser","setError","accessToken","setAccessToken","authHref","setAuthHref","dbx","setDbx","currentDbx","Dropbox","clientId","href","getAuthenticationUrl","a","usersGetCurrentAccount","user","getCurrentUser","isAuthenticated","onLogout","parseAcessToken","url","access_token","location","hash","useDropbox","useUsers","isLoading","setIsLoading","users","setUsers","userIds","usersToFetch","filter","userId","usersGetAccountBatch","account_ids","results","saveUsers","updatedUsers","reduce","acc","account_id","data","fetchUsers","getPlaylistId","playlist","meta","id","removeExtension","fileName","substring","lastIndexOf","updateItemInListById","list","getId","newItem","map","l","uploadFile","path","filesUpload","autorename","contents","mode","mute","getExtension","name","pop","getModifiedBy","entry","sharing_info","modified_by","getModifiedUsersFromEntries","entries","Set","Boolean","isAudioFile","includes","isFile","isFolder","isAudioFileOrFolder","isImageOrFolder","transformFile","file","isPlaylist","path_display","type","getFiles","folder","showFiles","showImages","filesListFolder","cursor","hasMore","fileFilter","payload","usePlaylists","forceRefresh","playlists","setPlaylists","savePlaylistLocally","filesDelete","path_lower","updatedPlaylists","p","savePlaylists","sortedPlaylists","sort","b","title","localeCompare","isNew","updatedList","fetchPlaylists","filesSearch","query","matches","Promise","all","m","filesDownload","metadata","r","resolve","fr","FileReader","addEventListener","e","text","srcElement","result","readAsText","fileBlob","rawPlaylists","onCreatePlaylist","onDeletePlaylist","onSavePlaylist","usePlaylist","playlistId","find","ids","tracks","getUsers","onDelete","onSave","updatedPlaylist","hasSupport","navigator","defaultArtwork","src","process","sizes","useMediaSession","setDuration","duration","position","playbackRate","mediaSession","setPositionState","setHandlers","onNext","onPause","onPlay","onPrevious","onSeek","setActionHandler","seekTime","playbackState","setTrack","album","artist","artwork","MediaMetadata","AudioContext","audioStates","defaultState","isMuted","trackId","volume","reducer","action","AudioProvider","useReducer","dispatch","audioRef","useRef","media","imageMap","useMemo","trackIndex","findIndex","track","hasNext","hasPrevious","imagePath","image","onResume","positionMs","isForward","player","current","nextPosition","currentTime","onStop","filesGetTemporaryLink","fileLink","setAttribute","link","play","pause","updatePlayer","interval","setInterval","clearInterval","onMute","el","muted","onUnmute","onVolumeChange","vol","onDurationChange","onEnded","onProgress","ref","useAudio","HOME","makeRelativeUrl","logError","info","params","URLSearchParams","append","toString","createParams","env","ErrorBoundary","this","props","color","background","backgroundLight","disabled","inherit","primary","secondary","success","transparent","white","highlight","bgHighlight","typography","base","css","sub","space","small","medium","large","transition","Base","styled","theme","ButtonLink","as","to","Link","Wrapper","div","Auth","noThrow","button","Breadcrumb","onClick","Trail","BreadcrumbTrail","onSort","trail","i","pathArray","subPath","slice","Inner","Name","span","Subtitle","isSelected","Entry","Icon","CheckBox","Folder","Audiotrack","formatDistanceToNow","Date","server_modified","display_name","getKeyDefault","_item","index","EmptyMessage","StyledList","ul","gap","List","emptyMessage","itemRenderer","items","getKey","listItems","defaultProps","height","width","Loader","LinearProgress","Spacer","SortableHeader","sortDir","ExpandMore","ExpandLess","useFiles","sortBy","folderFileMap","setFolderFileMap","files","filesWithUsers","f","fetchFiles","sortedData","dir","sortByTypeAndName","sortByTypeAndModified","sortByTypeAndModifiedBy","Header","Explorer","onPathChange","onSelectionChange","selectedEntries","singleSelection","setFolder","setSortBy","setSortDir","handleClick","some","handleSort","column","errorStyle","StyledInput","input","Title","label","hasError","TextInput","onChange","target","ExplorerInner","ExplorerTitle","ExplorerWrapper","h2","form","AddPlaylist","navigate","setArtist","setTitle","setPath","canSave","preventDefault","onSubmit","Button","imgState","none","fetched","PlaylistImage","size","setUrl","imageState","setImageState","setImageMap","imageId","mappedImage","getImageUrl","alt","onError","er","Artist","Info","White","PlaylistHeader","queries","useSize","values","defaultValue","mediaQueryLists","q","matchMedia","mql","handler","addListener","removeListener","useMedia","Actions","ImageExplorer","selectedImage","setSelectedImage","isDirty","setIsDirty","useNavigate","playlistUrl","Modified","Updated","Path","Playlist","isPlaying","Playlists","test","something","that","does","not","exists","modifiedBy","formatRelative","Home","Image","img","Avatar","initials","setHasError","h1","UserMenu","anchorEl","setAnchorEl","fontSize","aria-controls","aria-haspopup","currentTarget","abbreviated_name","profile_photo_url","Menu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","keepMounted","open","onClose","MenuItem","hideBorder","getMMSSFromMs","millis","totalSeconds","seconds","Math","floor","padWithZero","number","string","LeftTime","isDisabled","Position","audio","seekPosition","setSeekPosition","isSeeking","setIsSeeking","inputRef","displayPos","min","max","onMouseDown","onMouseUp","parseInt","isNaN","handleSeek","TrackName","SongDetails","Input","Volume","IconName","VolumeMute","VolumeUp","step","Buttons","Controls","ControlsInner","isSmall","Player","hasTrack","playButton","IconButton","aria-label","Content","main","Main","pathname","ConfirmationButton","message","isConfirming","setIsConfirming","timeout","setTimeout","clearTimeout","onBlur","isEditable","Play","UpdatedBy","Track","DragHandle","TrackWrapper","EditableTrackList","memo","onTrackClick","onTrackDelete","playingId","t","draggableId","provided","innerRef","draggableProps","dragHandleProps","prev","next","TrackList","isEditing","onTrackChange","handleDelete","onDragEnd","destination","source","reordered","startIndex","endIndex","from","splice","removed","reorderList","droppableId","droppableProps","placeholder","Add","ImageEdit","Inputs","setIsEditing","setPlaylist","handleToggleEdit","Tracks","selectedTracks","setSelectedTracks","muiTheme","createMuiTheme","palette","blue","getAuthUrl","App","basepath","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.ab6a1309.chunk.js","sourcesContent":["import { useState } from \"react\";\n\nfunction useLocalStorage(key, initialValue) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = value => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage;\n","import React, { createContext, useContext, useEffect, useState } from \"react\";\n\nimport useLocalStorage from \"./useLocalStorage\";\n\nconst CacheContext = createContext();\n\nfunction CacheProvider({ children, initialState = {} }) {\n  const [localStorage, setLocalStorage] = useLocalStorage(\"ddt\", initialState);\n  const [state, setState] = useState(localStorage);\n\n  useEffect(() => {\n    setLocalStorage(state);\n    // eslint-disable-next-line\n  }, [state]);\n\n  function getValue(key) {\n    return state[key];\n  }\n\n  function resetCache(stateToLoad = {}) {\n    setState(() => ({ ...initialState, ...stateToLoad }));\n  }\n\n  function setValue(key, value) {\n    setState(currentState => ({\n      ...currentState,\n      [key]: value\n    }));\n  }\n\n  const value = {\n    getValue,\n    setValue,\n    resetCache,\n    state\n  };\n\n  return (\n    <CacheContext.Provider value={value}>{children}</CacheContext.Provider>\n  );\n}\n\nfunction useCache() {\n  const context = useContext(CacheContext);\n  if (context === undefined) {\n    throw new Error(\"useCache must be used within a CacheProvider\");\n  }\n  return context;\n}\n\nexport { CacheProvider, useCache };\n","function parseQueryString(str) {\n  var ret = Object.create(null);\n\n  if (typeof str !== \"string\") {\n    return ret;\n  }\n\n  str = str.trim().replace(/^(\\?|#|&)/, \"\");\n\n  if (!str) {\n    return ret;\n  }\n\n  str.split(\"&\").forEach(function(param) {\n    var parts = param.replace(/\\+/g, \" \").split(\"=\");\n    // Firefox (pre 40) decodes `%3D` to `=`\n    // https://github.com/sindresorhus/query-string/pull/37\n    var key = parts.shift();\n    var val = parts.length > 0 ? parts.join(\"=\") : undefined;\n\n    key = decodeURIComponent(key);\n\n    // missing `=` should be `null`:\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n    val = val === undefined ? null : decodeURIComponent(val);\n\n    if (ret[key] === undefined) {\n      ret[key] = val;\n    } else if (Array.isArray(ret[key])) {\n      ret[key].push(val);\n    } else {\n      ret[key] = [ret[key], val];\n    }\n  });\n\n  return ret;\n}\n\nexport default parseQueryString;\n","import * as React from \"react\";\nimport { Dropbox } from \"dropbox\";\nimport parseQueryString from \"./parseQueryString\";\nimport { useCache } from \"./cacheContext\";\n\nconst DropboxContext = React.createContext();\n\nconst clientId = \"ie394xarjsfdxr0\";\n\nfunction DropboxProvider({ authUrl, children }) {\n  const cache = useCache();\n  const [currentUser, setCurrentUser] = React.useState(\n    cache.getValue(\"currentUser\")\n  );\n  const [error, setError] = React.useState(null);\n  const [accessToken, setAccessToken] = React.useState(\n    cache.getValue(\"accessToken\")\n  );\n  const [authHref, setAuthHref] = React.useState(null);\n  const [dbx, setDbx] = React.useState(null);\n\n  // Gets Auth Href after client id is added\n  React.useEffect(() => {\n    const currentDbx = new Dropbox({ accessToken, clientId });\n    setDbx(currentDbx);\n    const href = currentDbx.getAuthenticationUrl(authUrl);\n    if (href) {\n      setAuthHref(href);\n    } else {\n      setError(\"Invalid Dropbox Id\");\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  // Gets current user's info if we don't have it already\n  React.useEffect(() => {\n    async function getCurrentUser() {\n      const user = await dbx.usersGetCurrentAccount();\n      setCurrentUser(user);\n      cache.setValue(\"currentUser\", user);\n    }\n\n    if (accessToken && !currentUser && dbx) {\n      getCurrentUser();\n    }\n    // eslint-disable-next-line\n  }, [accessToken, dbx]);\n\n  function onLogout() {\n    setAccessToken(\"\");\n    setCurrentUser(null);\n    setDbx(null);\n    cache.resetCache({ clientId });\n  }\n\n  function parseAcessToken(url) {\n    // Get the access token from the query string\n    const { access_token } = parseQueryString(window.location.hash);\n\n    // create a new dropbox token using the access token\n    setDbx(new Dropbox({ accessToken: access_token, clientId }));\n\n    // Save the access token in memory and cache\n    cache.setValue(\"accessToken\", access_token);\n    setAccessToken(access_token);\n  }\n\n  const value = {\n    accessToken,\n    authHref,\n    currentUser,\n    dbx,\n    error,\n    isAuthenticated: dbx?.accessToken,\n    onLogout,\n    parseAcessToken\n  };\n\n  return (\n    <DropboxContext.Provider value={value}>{children}</DropboxContext.Provider>\n  );\n}\n\nfunction useDropbox() {\n  const context = React.useContext(DropboxContext);\n  if (context === undefined) {\n    throw new Error(\"useCache must be used within a DropboxContext\");\n  }\n  return context;\n}\n\nexport { DropboxProvider, useDropbox };\n","import { useState } from \"react\";\n\nimport { useCache } from \"./cacheContext\";\nimport { useDropbox } from \"./dropboxContext\";\n\nfunction useUsers() {\n  const cache = useCache();\n  const { dbx, isAuthenticated } = useDropbox();\n  const [isLoading, setIsLoading] = useState(false);\n  const [users, setUsers] = useState(cache.getValue(\"users\") || {});\n\n  async function fetchUsers(userIds) {\n    // Filter users down to users we don't already have info on\n    const usersToFetch = userIds.filter(userId => !users[userId]);\n\n    if (usersToFetch.length > 0 && dbx && isAuthenticated) {\n      setIsLoading(true);\n\n      try {\n        // Get user info of all unknown users\n        const results = await dbx.usersGetAccountBatch({\n          /* eslint-disable camelcase */\n          account_ids: usersToFetch\n        });\n\n        // Update dictionary\n        const updatedUsers = results.reduce(\n          (acc, user) => ({\n            ...acc,\n            [user.account_id]: user\n          }),\n          users\n        );\n\n        // Save in cache and in state\n        saveUsers(updatedUsers);\n        setIsLoading(false);\n\n        return updatedUsers;\n      } catch (exception) {\n        console.error(exception);\n      }\n    }\n\n    return users;\n  }\n\n  function saveUsers(updatedUsers) {\n    // Save in state and to cache\n    setUsers(updatedUsers);\n    cache.setValue(\"users\", updatedUsers);\n  }\n\n  return {\n    data: users,\n    isLoading,\n    fetchUsers\n  };\n}\n\nexport default useUsers;\n","export function getPlaylistId(playlist) {\n  return playlist.meta.id;\n}\n\nexport function removeExtension(fileName = \"\") {\n  return fileName.substring(0, fileName.lastIndexOf(\".\"));\n}\n\nexport function reorderList(list, startIndex, endIndex) {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n}\n\nexport function updateItemInListById(list, id, getId, newItem) {\n  return list.map((l) => (getId(l) === id ? newItem : l));\n}\n","/**\n * Upload a file to dropbox\n */\nexport async function uploadFile(dbx, data, path) {\n  // Upload playlist to dropbox (dropbox will return new metadata)\n  const meta = await dbx.filesUpload({\n    // Do not rename on conflict\n    autorename: false,\n    // File data to upload\n    contents: JSON.stringify(data),\n    // Overwrite previous version of file (if exists)\n    mode: {\n      \".tag\": \"overwrite\",\n    },\n    // Do not notify users of change\n    mute: true,\n    // Path to file in dropbox\n    path,\n  });\n  return meta;\n}\n\nasync function getImageUrl(dbx, path) {\n  if (path) {\n    const fileLink = await dbx.filesGetTemporaryLink({\n      path,\n    });\n    return fileLink?.link;\n  }\n}\n\nexport async function getImagePath(dbx, imageId, imagePath, imageMap) {\n  const mappedImage = imageMap[imageId];\n\n  if (mappedImage) {\n    return mappedImage;\n  } else if (imagePath) {\n    const url = await getImageUrl(dbx, imagePath);\n    return url;\n  }\n  return undefined;\n}\n","/**\n * Get extension from file name\n * @param  {String} name File Name\n * @return {String}      Extension\n */\nexport function getExtension(name = \"\") {\n  return name.split(\".\").pop();\n}\n\nexport function getModifiedBy(entry) {\n  return entry?.sharing_info?.modified_by;\n}\n\n/**\n * Get the modified_by user ids from a list of entries\n * @param  {Array<Object>} entries\n * @return {Array<string>} ids\n */\nexport function getModifiedUsersFromEntries(entries) {\n  return [...new Set(entries.map(getModifiedBy))].filter(Boolean);\n}\n\n/**\n * Returns true if file name is an audio file\n * @param  {String}  name File Name\n * @return {Boolean}      isAudioFile\n */\nexport function isAudioFile(name) {\n  return [\"mp3\", \"m4a\", \"ovw\", \"wav\"].includes(getExtension(name));\n}\n\nexport function isImage(name) {\n  return [\"png\", \"jpg\", \"jpeg\"].includes(getExtension(name));\n}\n\nexport function isFile(entry) {\n  return entry[\".tag\"] === \"file\";\n}\n\nexport function isFolder(entry) {\n  return entry[\".tag\"] === \"folder\";\n}\n\nexport function isAudioFileOrFolder(entry) {\n  return isFolder(entry) || (isFile(entry) && isAudioFile(entry.name));\n}\n\nexport function isImageOrFolder(entry) {\n  return isFolder(entry) || (isFile(entry) && isImage(entry.name));\n}\n\n/**\n * Returns true if file name is a demo tape playlist\n * @param  {String}  name File Name\n * @return {Boolean}      is playlist\n */\nexport function isPlaylist(name) {\n  return getExtension(name) === \"mix\";\n}\n\n/**\n * Transform dropbox file object shape to shape usable by client\n * @param  {Object} file File object shape from dropbox\n * @return {Object}      Transformed file object\n */\nexport function transformFile(file) {\n  return {\n    ...file,\n    isAudioFile: isAudioFile(file.name),\n    isFolder: file[\".tag\"] === \"folder\",\n    isPlaylist: isPlaylist(file.name),\n    path: file.path_display,\n    type: file[\".tag\"],\n    user: getModifiedBy(file),\n  };\n}\n\nexport async function getFiles(dbx, folder = \"\", showFiles, showImages) {\n  // Get folder listing\n  const { cursor, entries, hasMore } = await dbx.filesListFolder({\n    path: folder,\n  });\n\n  const fileFilter = showFiles\n    ? isAudioFileOrFolder\n    : showImages\n    ? isImageOrFolder\n    : isFolder;\n\n  const payload = {\n    cursor,\n    data: entries.filter(fileFilter).map(transformFile),\n    hasMore,\n    path: folder,\n  };\n\n  return payload;\n}\n\nexport function sortByTypeAndName(sortDir) {\n  const dir = sortDir === \"asc\" ? -1 : 1;\n  return function (a, b) {\n    return (\n      (a.type !== b.type && (a.type === \"folder\" || b.type === \"folder\")\n        ? b.type === \"folder\"\n          ? 1\n          : -1\n        : a.name.localeCompare(b.name)) * dir\n    );\n  };\n}\n\nexport function sortByTypeAndModified(sortDir) {\n  const dir = sortDir === \"asc\" ? -1 : 1;\n  return function (a, b) {\n    return (\n      (a.type !== b.type && (a.type === \"folder\" || b.type === \"folder\")\n        ? b.type === \"folder\"\n          ? 1\n          : -1\n        : new Date(b.server_modified) - new Date(a.server_modified)) * dir\n    );\n  };\n}\n\nexport function sortByTypeAndModifiedBy(sortDir) {\n  const dir = sortDir === \"asc\" ? -1 : 1;\n  return function (a, b) {\n    return (\n      (a.type !== b.type && (a.type === \"folder\" || b.type === \"folder\")\n        ? b.type === \"folder\"\n          ? 1\n          : -1\n        : a.user?.name?.display_name.localeCompare(\n            b.user?.name?.display_name\n          )) * dir\n    );\n  };\n}\n","import { useEffect, useState } from \"react\";\n\nimport { useCache } from \"./cacheContext\";\nimport { useDropbox } from \"./dropboxContext\";\nimport useUsers from \"./useUsers\";\nimport { getPlaylistId, updateItemInListById } from \"./utils\";\nimport { uploadFile } from \"./dropxboxUtils\";\nimport {\n  getModifiedBy,\n  getModifiedUsersFromEntries\n} from \"./Explorer/fileUtils\";\n\nfunction usePlaylists({ forceRefresh }) {\n  const cache = useCache();\n  const { dbx, isAuthenticated } = useDropbox();\n  const [isLoading, setIsLoading] = useState(false);\n  const [playlists, setPlaylists] = useState(cache.getValue(\"playlists\") || []);\n  const { fetchUsers } = useUsers();\n\n  useEffect(() => {\n    if (\n      isAuthenticated &&\n      dbx &&\n      !isLoading &&\n      (forceRefresh || playlists.length === 0)\n    ) {\n      setIsLoading(true);\n\n      async function fetchPlaylists() {\n        // Search for playlist files\n        const { matches } = await dbx.filesSearch({\n          path: \"\",\n          query: \".mix\"\n        });\n\n        // Downloaad all files\n        const results = await Promise.all(\n          matches.map(m =>\n            dbx.filesDownload({\n              path: m.metadata.path_display\n            })\n          )\n        );\n\n        // Convert blobs to JSON\n        const rawPlaylists = await Promise.all(\n          results.map(r => {\n            return new Promise(resolve => {\n              const fr = new FileReader();\n\n              fr.addEventListener(\"loadend\", e => {\n                const text = e.srcElement.result;\n                const data = JSON.parse(text);\n                resolve({ data, meta: r });\n              });\n\n              fr.readAsText(r.fileBlob);\n            });\n          })\n        );\n\n        // Get all user ids of users who have modified listed files\n        const userIds = getModifiedUsersFromEntries(results);\n        const users = await fetchUsers(userIds);\n\n        const playlistsWithUsers = (rawPlaylists || []).map(p => ({\n          ...p,\n          meta: {\n            ...p.meta,\n            user: users[getModifiedBy(p.meta)]\n          }\n        }));\n\n        // Save in cache and in state\n        savePlaylists(playlistsWithUsers);\n        setIsLoading(false);\n      }\n\n      fetchPlaylists();\n    }\n    // eslint-disable-next-line\n  }, [dbx, isAuthenticated]);\n\n  async function onCreatePlaylist(path, playlist) {\n    // update file on dropbox\n    const meta = await uploadFile(dbx, playlist, path);\n\n    // save playlist locally\n    savePlaylistLocally(\n      {\n        data: playlist,\n        meta\n      },\n      true\n    );\n\n    return meta.id;\n  }\n\n  async function onDeletePlaylist(playlist) {\n    setIsLoading(true);\n    // delete file on dropbox\n    await dbx.filesDelete({ path: playlist.meta.path_lower });\n\n    // delete playlist locally\n    const updatedPlaylists = playlists.filter(\n      p => p.meta.id !== playlist.meta.id\n    );\n    setPlaylists(updatedPlaylists);\n    cache.setValue(\"playlists\", updatedPlaylists);\n    setIsLoading(false);\n  }\n\n  async function onSavePlaylist(playlist) {\n    // Optimistic local save\n    savePlaylistLocally(playlist);\n\n    // update file on dropbox\n    const meta = await uploadFile(dbx, playlist.data, playlist.meta.path_lower);\n\n    // update meta locally\n    savePlaylistLocally({\n      ...playlist,\n      meta\n    });\n  }\n\n  function savePlaylists(updatedPlaylists = []) {\n    // sort by title\n    const sortedPlaylists = updatedPlaylists.sort((a, b) =>\n      a.data.title.localeCompare(b.data.title)\n    );\n\n    // Save in state and to cache\n    setPlaylists(sortedPlaylists);\n    cache.setValue(\"playlists\", sortedPlaylists);\n  }\n\n  function savePlaylistLocally(playlist, isNew = false) {\n    const updatedList = isNew\n      ? [...playlists, playlist]\n      : updateItemInListById(\n          playlists,\n          getPlaylistId(playlist),\n          getPlaylistId,\n          playlist\n        );\n    savePlaylists(updatedList);\n  }\n\n  return {\n    data: playlists,\n    isLoading,\n    onCreatePlaylist,\n    onDeletePlaylist,\n    onSavePlaylist\n  };\n}\n\nexport default usePlaylists;\n","import { useEffect, useState } from \"react\";\nimport usePlaylists from \"./usePlaylists\";\nimport { useDropbox } from \"./dropboxContext\";\nimport useUsers from \"./useUsers\";\nimport { getModifiedUsersFromEntries } from \"./Explorer/fileUtils\";\n\nfunction usePlaylist({ playlistId }) {\n  const { dbx, isAuthenticated } = useDropbox();\n  const { data, isLoading, onDeletePlaylist, onSavePlaylist } = usePlaylists({\n    dbx,\n    isAuthenticated\n  });\n  const { fetchUsers } = useUsers();\n  const [users, setUsers] = useState({});\n  const playlist = data.find(p => p.meta.id === playlistId);\n\n  useEffect(() => {\n    async function getUsers(ids) {\n      const users = await fetchUsers(ids);\n      setUsers(users);\n    }\n\n    if (playlist?.data?.tracks) {\n      // Get all user ids of users who have modified listed files\n      const userIds = getModifiedUsersFromEntries(playlist.data.tracks);\n      if (userIds.length > 0) {\n        getUsers(userIds);\n      }\n    }\n    // eslint-disable-next-line\n  }, [playlist]);\n\n  function onSave(updatedPlaylist) {\n    onSavePlaylist(updatedPlaylist);\n  }\n\n  async function onDelete() {\n    if (playlist) {\n      return onDeletePlaylist(playlist);\n    }\n  }\n\n  return {\n    data: playlist,\n    isLoading,\n    onDelete,\n    onSave,\n    users\n  };\n}\n\nexport default usePlaylist;\n","const hasSupport = \"mediaSession\" in navigator;\n\nconst defaultArtwork = [\n  {\n    src: `${process.env.PUBLIC_URL}/android-icon-96x96.png`,\n    sizes: \"96x96\",\n    type: \"image/png\",\n  },\n  {\n    src: `${process.env.PUBLIC_URL}/android-icon-144x144.png`,\n    sizes: \"144x144\",\n    type: \"image/png\",\n  },\n  {\n    src: `${process.env.PUBLIC_URL}/android-icon-180x180.png`,\n    sizes: \"180x180\",\n    type: \"image/png\",\n  },\n];\n\nfunction useMediaSession() {\n  function setDuration({ duration, position = 0, playbackRate = 1 }) {\n    if (hasSupport && \"setPositionState\" in navigator.mediaSession) {\n      window.navigator.mediaSession.setPositionState({\n        duration,\n        position,\n        playbackRate,\n      });\n    }\n  }\n\n  function setHandlers({ onNext, onPause, onPlay, onPrevious, onSeek }) {\n    if (hasSupport) {\n      try {\n        navigator.mediaSession.setActionHandler(\"play\", onPlay);\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"pause\", onPause);\n      } catch (e) {}\n\n      try {\n        navigator.mediaSession.setActionHandler(\"nexttrack\", onNext);\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"previoustrack\", onPrevious);\n      } catch (e) {}\n\n      try {\n        navigator.mediaSession.setActionHandler(\"seekbackward\", () =>\n          onSeek(undefined, false)\n        );\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"seekforward\", () =>\n          onSeek(undefined, true)\n        );\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"seekto\", ({ seekTime }) =>\n          onSeek(seekTime)\n        );\n      } catch (e) {}\n    }\n  }\n\n  function setTrack({\n    album,\n    artist = \"Demo Tape\",\n    artwork = defaultArtwork,\n    title,\n  }) {\n    if (hasSupport) {\n      // eslint-disable-next-line\n      navigator.mediaSession.metadata = new MediaMetadata({\n        title,\n        artist,\n        album,\n        artwork,\n      });\n    }\n  }\n\n  function setState(state) {\n    if (hasSupport) {\n      navigator.mediaSession.playbackState = state;\n    }\n  }\n\n  return {\n    setDuration,\n    setHandlers,\n    setState,\n    setTrack,\n  };\n}\n\nexport default useMediaSession;\n","import React, {\n  createContext,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useReducer,\n} from \"react\";\nimport usePlaylist from \"./usePlaylist\";\nimport { useDropbox } from \"./dropboxContext\";\nimport { removeExtension } from \"./utils\";\nimport useMediaSession from \"./useMediaSession\";\nimport useLocalStorage from \"./useLocalStorage\";\n\nconst AudioContext = createContext();\n\nexport const audioStates = {\n  loading: \"loading\",\n  paused: \"paused\",\n  playing: \"playing\",\n  stopped: \"stopped\",\n};\n\nconst defaultState = {\n  duration: 0,\n  isMuted: false,\n  playlistId: null,\n  position: 0,\n  trackId: null,\n  state: audioStates.stopped,\n  volume: 1,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"duration\":\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case \"loaded\":\n      if (state.state === \"loading\") {\n        return {\n          ...state,\n          position: 0,\n          state: audioStates.playing,\n        };\n      }\n      return state;\n    case \"mute\":\n      return {\n        ...state,\n        isMuted: true,\n      };\n    case \"pause\":\n      if (state.state === audioStates.playing) {\n        return {\n          ...state,\n          state: audioStates.paused,\n        };\n      }\n      return state;\n    case \"play\":\n      return {\n        ...state,\n        ...action.payload,\n        state: audioStates.loading,\n      };\n    case \"position\":\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case \"resume\":\n      return {\n        ...state,\n        state: audioStates.playing,\n      };\n    case \"stop\":\n      return {\n        ...state,\n        position: 0,\n        state: audioStates.stopped,\n      };\n    case \"tick\":\n      return {\n        ...state,\n        position: state.position + 1000,\n      };\n    case \"unmute\":\n      return {\n        ...state,\n        isMuted: false,\n      };\n    case \"volume\":\n      return {\n        ...state,\n        ...action.payload,\n        isMuted: action.payload.volume === 0,\n      };\n    default:\n      throw new Error();\n  }\n}\n\nfunction AudioProvider({ children, initialState = {} }) {\n  const [\n    { duration, isMuted, playlistId, position, state, trackId, volume },\n    dispatch,\n  ] = useReducer(reducer, {\n    ...defaultState,\n    ...initialState,\n  });\n  const audioRef = useRef();\n  const { dbx } = useDropbox();\n  const playlist = usePlaylist({ playlistId });\n  const media = useMediaSession();\n  const [imageMap = {}] = useLocalStorage(\"playlistImages\");\n\n  const { hasNext, hasPrevious, track, trackIndex } = useMemo(() => {\n    const trackIndex = trackId\n      ? playlist?.data?.data.tracks.findIndex((track) => track.id === trackId)\n      : playlist?.data?.data\n      ? 0\n      : -1;\n    const track =\n      trackIndex >= 0 ? playlist.data.data.tracks[trackIndex] : null;\n    const hasNext = track\n      ? trackIndex < playlist.data.data.tracks.length - 1\n      : false;\n    const hasPrevious = track ? trackIndex > 0 : false;\n\n    if (track) {\n      const imagePath = imageMap[playlist?.data?.data?.image?.id];\n      media.setTrack({\n        title: removeExtension(track?.name),\n        artist: playlist?.data?.data?.artist || playlist?.data?.data?.title,\n        album: playlist?.data?.data?.title,\n        artwork: imagePath\n          ? [\n              {\n                src: imagePath,\n                sizes: \"50x50\",\n                type: \"image/png\",\n              },\n            ]\n          : undefined,\n      });\n    }\n\n    return {\n      hasNext,\n      hasPrevious,\n      track,\n      trackIndex,\n    };\n    // eslint-disable-next-line\n  }, [trackId, playlistId]);\n\n  function handleEnded(e) {\n    if (hasNext) {\n      onNext();\n    } else {\n      onStop();\n    }\n  }\n\n  function handlePlaying(e) {\n    dispatch({\n      type: \"loaded\",\n    });\n  }\n\n  function handleDurationChange(e) {\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    media.setDuration({\n      duration: el.duration,\n    });\n    dispatch({\n      type: \"duration\",\n      payload: {\n        duration: el.duration * 1000,\n      },\n    });\n  }\n\n  function handleProgress(e) {\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    dispatch({\n      type: \"position\",\n      payload: {\n        position: el.currentTime * 1000,\n      },\n    });\n  }\n\n  useEffect(() => {\n    async function updatePlayer() {\n      const player = audioRef.current;\n\n      if (!player) return;\n\n      if (track && state === audioStates.loading) {\n        // This is not a resume so we need to load the file\n        const fileLink = await dbx.filesGetTemporaryLink({\n          path: track.path_lower,\n        });\n        player.setAttribute(\"src\", fileLink.link);\n\n        player.play();\n        media.setState(\"playing\");\n      } else if (track && state === audioStates.playing) {\n        player.play();\n        media.setState(\"playing\");\n      } else if (state === audioStates.paused) {\n        player.pause();\n        media.setState(\"paused\");\n      } else if (state === audioStates.stopped) {\n        player.pause();\n        media.setState(\"none\");\n        // clear time so we restart at beginning\n        player.currentTime = 0;\n      }\n    }\n\n    updatePlayer();\n    // eslint-disable-next-line\n  }, [state, trackId, playlistId]);\n\n  useEffect(() => {\n    if (state === \"playing\") {\n      const interval = setInterval(() => {\n        dispatch({\n          type: \"tick\",\n        });\n      }, 1000);\n\n      return () => clearInterval(interval);\n    }\n  });\n\n  function onMute() {\n    dispatch({\n      type: \"mute\",\n    });\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    el.muted = true;\n  }\n\n  function onNext() {\n    if (hasNext) {\n      dispatch({\n        type: \"play\",\n        payload: {\n          playlistId,\n          trackId: playlist.data.data.tracks[trackIndex + 1].id,\n        },\n      });\n    }\n  }\n\n  function onPrevious() {\n    if (hasPrevious) {\n      dispatch({\n        type: \"play\",\n        payload: {\n          playlistId,\n          trackId: playlist.data.data.tracks[trackIndex - 1].id,\n        },\n      });\n    }\n  }\n\n  function onPause() {\n    if (state !== audioStates.paused) {\n      dispatch({ type: \"pause\" });\n    }\n  }\n\n  function onPlay({ playlistId, trackId }) {\n    dispatch({ type: \"play\", payload: { playlistId, trackId } });\n  }\n\n  function onResume() {\n    if (state === audioStates.paused) {\n      dispatch({ type: \"resume\" });\n    }\n  }\n\n  function onSeek(positionMs, isForward) {\n    if (track) {\n      const player = audioRef.current;\n\n      let nextPosition = positionMs;\n\n      if (positionMs === undefined) {\n        // Handles bumping the position +/- 10 seconds if\n        // the user presses the seek buttons instead of using\n        // the position bar\n        nextPosition = position + (isForward ? 10000 : -10000);\n      }\n\n      player.currentTime = nextPosition / 1000;\n\n      media.setDuration({\n        duration: duration,\n        position: nextPosition,\n      });\n\n      dispatch({\n        type: \"position\",\n        payload: {\n          position: nextPosition,\n        },\n      });\n    }\n  }\n\n  function onStop() {\n    if (state !== audioStates.stopped) {\n      dispatch({ type: \"stop\" });\n    }\n  }\n\n  function onUnmute() {\n    dispatch({\n      type: \"unmute\",\n    });\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    el.muted = false;\n  }\n\n  function onVolumeChange(vol) {\n    dispatch({\n      type: \"volume\",\n      payload: {\n        volume: vol,\n      },\n    });\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    el.volume = vol;\n    el.muted = vol === 0;\n  }\n\n  media.setHandlers({\n    onNext,\n    onPrevious,\n    onPause,\n    onPlay: onResume,\n    onSeek,\n  });\n\n  const value = {\n    duration,\n    hasNext,\n    hasPrevious,\n    isMuted,\n    onMute,\n    onNext,\n    onPause,\n    onPlay,\n    onPrevious,\n    onResume,\n    onSeek,\n    onStop,\n    onUnmute,\n    onVolumeChange,\n    playlist,\n    position,\n    state,\n    track,\n    volume,\n  };\n\n  return (\n    <AudioContext.Provider value={value}>\n      {children}\n      {(track || state !== audioStates.stopped) && (\n        <audio\n          onDurationChange={handleDurationChange}\n          onEnded={handleEnded}\n          onPlay={handlePlaying}\n          onProgress={handleProgress}\n          ref={audioRef}\n        />\n      )}\n    </AudioContext.Provider>\n  );\n}\n\nfunction useAudio() {\n  const context = useContext(AudioContext);\n  if (context === undefined) {\n    throw new Error(\"useAudio must be used within a AudioProvider\");\n  }\n  return context;\n}\n\nexport { AudioProvider, useAudio };\n","export const HOME =\n  process.env.NODE_ENV === \"production\" ? \"/dropbox-demo-tape-web\" : \"/\";\n\nexport const ERROR_URL = \"https://hooks.zapier.com/hooks/catch/3498170/os51faz\";\n\nexport function makeRelativeUrl(url) {\n  if (process.env.NODE_ENV === \"production\") {\n    return `${HOME}${url}`;\n  }\n  return url;\n}\n","import * as React from \"react\";\nimport { ERROR_URL } from \"./constants\";\n\nfunction createParams(url, data) {\n  const params = new URLSearchParams();\n  Object.entries(data).forEach(([key, value]) => {\n    params.append(key, value);\n  });\n  return `${url}?${params.toString()}`;\n}\n\nfunction logError(error, info) {\n  const data = {\n    env: process.env.NODE_ENV,\n    error: error.toString(),\n    info: JSON.stringify(info),\n    url: window.location.href,\n  };\n\n  const url = createParams(ERROR_URL, data);\n\n  // fetch(url, { method: \"GET\" });\n}\n\nexport class ErrorBoundary extends React.Component {\n  componentDidCatch(error, info) {\n    logError(error, info);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n","import { css } from \"styled-components\";\n\nconst color = {\n  background: \"#242A31\",\n  backgroundLight: \"#2D323C\",\n  disabled: \"#656565\",\n  error: \"#E7777F\",\n  inherit: \"inherit\",\n  primary: \"#D2D2D2\",\n  secondary: \"#b3b3b3\",\n  success: \"#A1CA7E\",\n  transparent: \"transparent\",\n  white: \"#FFFFFF\"\n};\n\nconst space = 5;\n\nexport default {\n  color: {\n    ...color,\n    highlight: \"#5EB1BF\",\n    bgHighlight: color.primary + \"11\"\n  },\n  typography: {\n    base: css`\n      font-size: 16px;\n    `,\n    sub: css`\n      font-size: 14px;\n      font-weight: 400;\n    `\n  },\n  space: {\n    small: space,\n    medium: space * 2,\n    large: space * 4\n  },\n  transition: \"all 250ms ease-in\"\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"@reach/router\";\n\nconst Base = styled.a`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.background};\n  border-radius: 10px;\n  border: 1px solid ${(p) => p.theme.color.white};\n  color: ${(p) => p.theme.color.white};\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ${(p) => p.theme.transition};\n\n  :hover {\n    background-color: ${(p) => p.theme.color.white};\n    color: ${(p) => p.theme.color.background};\n  }\n\n  ${(p) =>\n    p.disabled\n      ? `\n  color: ${p.theme.color.disabled};\n  cursor: unset;\n  border-color: ${p.theme.color.disabled};\n\n  :hover {\n    background-color: ${p.theme.color.background};\n    color: ${p.theme.color.disabled};\n  }\n`\n      : \"\"}\n`;\n\nfunction ButtonLink(props) {\n  return <Base as={props.to ? Link : undefined} {...props} />;\n}\n\nexport default ButtonLink;\n","import React, { Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport { Redirect } from \"@reach/router\";\n\nimport { useDropbox } from \"./dropboxContext\";\nimport { HOME } from \"./constants\";\n\nimport ButtonLink from \"./ButtonLink\";\n\nconst Wrapper = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n`;\n\nfunction Auth() {\n  const { authHref, isAuthenticated, parseAcessToken } = useDropbox();\n\n  if (!isAuthenticated && window.location.hash.includes(\"access_token\")) {\n    parseAcessToken();\n  }\n\n  if (isAuthenticated) {\n    return <Redirect noThrow={true} to={HOME} />;\n  }\n\n  return (\n    <Wrapper>\n      <h1>Welcome</h1>\n      <Fragment>\n        <ButtonLink href={authHref}>Authenticate With Dropbox</ButtonLink>\n      </Fragment>\n    </Wrapper>\n  );\n}\n\nexport default Auth;\n","import styled from \"styled-components\";\n\nexport default styled.button`\n  background-color: ${p => p.theme.color.background};\n  border-radius: 10px;\n  border: 1px solid ${p => p.theme.color.white};\n  color: ${p => p.theme.color.white};\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ${p => p.theme.transition};\n\n  :hover,\n  :focus {\n    background-color: ${p => p.theme.color.white};\n    color: ${p => p.theme.color.background};\n  }\n\n  ${p =>\n    p.disabled\n      ? `\n    color: ${p.theme.color.disabled};\n    cursor: unset;\n    border-color: ${p.theme.color.disabled};\n\n    :hover, :focus {\n      background-color: ${p.theme.color.background};\n      color: ${p.theme.color.disabled};\n    }\n  `\n      : \"\"}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.button`\n  background-color: transparent;\n  border: none;\n  color: ${p => p.theme.color.primary};\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ${p => p.theme.color.highlight};\n  }\n`;\n\nconst Breadcrumb = ({ name = \"Home\", onClick, path }) => {\n  return <Wrapper onClick={() => onClick(path)}>{name}</Wrapper>;\n};\n\nexport default Breadcrumb;\n","import React, { Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\n\nimport Breadcrumb from \"./Breadcrumb\";\n\nconst Trail = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n`;\n\nfunction BreadcrumbTrail({ onClick, onSort, path = \"\" }) {\n  const trail = path.split(\"/\").map((folder, i, pathArray) => {\n    const subPath = pathArray.slice(0, i + 1).join(\"/\");\n    return (\n      <Fragment key={i}>\n        {i !== 0 && <span>/</span>}\n        <Breadcrumb name={folder || \"Home\"} onClick={onClick} path={subPath} />\n      </Fragment>\n    );\n  });\n\n  return (\n    <Trail>\n      <ChevronRight /> {trail}\n    </Trail>\n  );\n}\n\nexport default BreadcrumbTrail;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\nimport Audiotrack from \"@material-ui/icons/Audiotrack\";\nimport CheckBox from \"@material-ui/icons/CheckBox\";\nimport Folder from \"@material-ui/icons/Folder\";\n\nconst Inner = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n`;\n\nconst Name = styled.span`\n  ${p => p.theme.typography.base}\n`;\n\nconst Subtitle = styled.span`\n  ${p => p.theme.typography.sub}\n`;\n\nconst Wrapper = styled.button`\n  background-color: ${p =>\n    p.theme.color[p.isSelected ? \"bgHighlight\" : \"background\"]};\n  border: none;\n  border-top: 1px solid ${p => p.theme.color.bgHighlight};\n  color: ${p => p.theme.color[p.isSelected ? \"highlight\" : \"inherit\"]};\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ${p => p.theme.space.medium}px ${p => p.theme.space.large}px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ${p => p.theme.color.primary}11;\n  }\n`;\n\nfunction Entry({ entry, onClick, isSelected = false }) {\n  const Icon = isSelected ? CheckBox : entry.isFolder ? Folder : Audiotrack;\n\n  return (\n    <Wrapper isSelected={isSelected} onClick={() => onClick(entry)}>\n      <Inner>\n        <Icon />\n        <Name>{entry.name}</Name>\n        {entry.type === \"file\" && (\n          <Subtitle>\n            {formatDistanceToNow(new Date(entry.server_modified))} ago\n          </Subtitle>\n        )}\n        {entry.type === \"file\" && (\n          <Subtitle>{entry.user?.name?.display_name}</Subtitle>\n        )}\n      </Inner>\n    </Wrapper>\n  );\n}\n\nexport default Entry;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst getKeyDefault = (_item, index) => index;\n\nconst EmptyMessage = styled.div`\n  ${p => p.theme.typography.base}\n  color: ${p => p.theme.color.secondary};\n  font-size: 18px;\n  padding: 20px;\n`;\n\nconst gapStyle = gap =>\n  gap\n    ? `\n        display: grid;\n        grid-gap: ${gap}px;\n      `\n    : \"\";\n\nconst StyledList = styled.ul`\n  liststyletype: none;\n  margin: 0;\n  marginblockend: 0;\n  marginblockstart: 0;\n  padding: 0;\n  paddinginlinestart: 0;\n  webkitmarginafter: 0;\n  webkitmarginbefore: 0;\n  webkitpaddingstart: 0;\n  ${p => gapStyle(p.gap)}\n`;\n\nfunction List({\n  emptyMessage,\n  isLoading,\n  itemRenderer,\n  items,\n  gap,\n  getKey = getKeyDefault\n}) {\n  if (!isLoading && items.length === 0 && emptyMessage) {\n    return <EmptyMessage>{emptyMessage}</EmptyMessage>;\n  }\n\n  const listItems = items.map((item, i) => (\n    <li key={getKey(item, i)}>{itemRenderer(item, i)}</li>\n  ));\n\n  return <StyledList gap={gap}>{listItems}</StyledList>;\n}\n\nList.defaultProps = {\n  getKey: getKeyDefault\n};\n\nexport default List;\n","import styled from \"styled-components\";\n\nexport default styled.div`\n  height: ${p => p.height};\n  width: ${p => p.width};\n`;\n","import React from \"react\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport styled from \"styled-components\";\n\nimport Spacer from \"./Spacer\";\n\nconst Wrapper = styled.div`\n  margin-bottom: -4px;\n`;\n\nfunction Loader({ isLoading }) {\n  return (\n    <Wrapper>\n      {isLoading ? <LinearProgress /> : <Spacer height=\"4px\" />}\n    </Wrapper>\n  );\n}\n\nexport default Loader;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\n\nconst Wrapper = styled.button`\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ${p => p.theme.color.primary};\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ${p => p.theme.color.highlight};\n  }\n`;\n\nfunction SortableHeader({ children, onClick, sortDir }) {\n  const Icon =\n    sortDir === \"asc\" ? ExpandMore : sortDir === \"desc\" ? ExpandLess : null;\n\n  return (\n    <Wrapper onClick={onClick}>\n      <span>{children}</span>\n      {Icon && <Icon />}\n    </Wrapper>\n  );\n}\n\nexport default SortableHeader;\n","import { useEffect, useState } from \"react\";\nimport { useDropbox } from \"../dropboxContext\";\nimport useUsers from \"../useUsers\";\nimport {\n  getFiles,\n  getModifiedBy,\n  getModifiedUsersFromEntries,\n  sortByTypeAndName,\n  sortByTypeAndModified,\n  sortByTypeAndModifiedBy,\n} from \"./fileUtils\";\n\nfunction useFiles({\n  folder = \"\",\n  showFiles = false,\n  showImages = false,\n  sortBy = \"\",\n  sortDir = \"\",\n}) {\n  const { dbx } = useDropbox();\n  const [folderFileMap, setFolderFileMap] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const { fetchUsers } = useUsers();\n\n  useEffect(() => {\n    async function fetchFiles() {\n      setIsLoading(true);\n      const files = await getFiles(dbx, folder, showFiles, showImages);\n\n      // Get all user ids of users who have modified listed files\n      const userIds = getModifiedUsersFromEntries(files.data);\n      const users = await fetchUsers(userIds);\n\n      const filesWithUsers = {\n        ...files,\n        data: files.data.map((f) => ({\n          ...f,\n          user: users[getModifiedBy(f)],\n        })),\n      };\n\n      setFolderFileMap({\n        [folder]: filesWithUsers,\n      });\n      setIsLoading(false);\n    }\n\n    if (dbx) {\n      fetchFiles();\n    }\n    // eslint-disable-next-line\n  }, [dbx, folder]);\n\n  const { cursor, data = [], hasMore } = folderFileMap[folder] || {};\n\n  let sortedData = data;\n\n  if (sortBy && sortDir) {\n    if (sortBy === \"name\") {\n      sortedData = data.sort(sortByTypeAndName(sortDir));\n    } else if (sortBy === \"modified\") {\n      sortedData = data.sort(sortByTypeAndModified(sortDir));\n    } else if (sortBy === \"modifiedBy\") {\n      sortedData = data.sort(sortByTypeAndModifiedBy(sortDir));\n    }\n  }\n\n  return {\n    cursor,\n    files: sortedData,\n    folder,\n    hasMore,\n    isLoading,\n  };\n}\n\nexport default useFiles;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport BreadcrumbTrail from \"./BreadcrumbTrail\";\nimport Entry from \"./Entry\";\nimport List from \"../List\";\nimport Loader from \"../Loader\";\nimport SortableHeader from \"./SortableHeader\";\nimport Spacer from \"../Spacer\";\nimport useFiles from \"./useFiles\";\n\nconst Header = styled.div`\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n`;\n\nfunction Explorer({\n  onPathChange,\n  onSelectionChange,\n  selectedEntries = [],\n  singleSelection = false,\n  showFiles = false,\n  showImages = false,\n}) {\n  const [folder, setFolder] = useState(\"\");\n  const [sortBy, setSortBy] = useState(\"\");\n  const [sortDir, setSortDir] = useState(\"\");\n  const { files, isLoading } = useFiles({\n    folder,\n    showFiles,\n    showImages,\n    sortBy,\n    sortDir,\n  });\n\n  function handleClick(entry) {\n    if (entry.type === \"folder\") {\n      setFolder(entry.path);\n      if (onPathChange) {\n        onPathChange(entry.path);\n      }\n    } else if (showFiles || showImages) {\n      if (singleSelection) {\n        if (selectedEntries.some((e) => e.id === entry.id)) {\n          onSelectionChange([null]);\n        } else {\n          onSelectionChange([entry]);\n        }\n      } else {\n        if (selectedEntries.some((e) => e.id === entry.id)) {\n          onSelectionChange(selectedEntries.filter((e) => e.id !== entry.id));\n        } else {\n          onSelectionChange([...selectedEntries, entry]);\n        }\n      }\n    }\n  }\n\n  function handleSort(column) {\n    if (column !== sortBy) {\n      setSortBy(column);\n      setSortDir(\"desc\");\n    } else {\n      if (sortDir === \"desc\") {\n        setSortDir(\"asc\");\n      } else {\n        setSortDir(\"\");\n        setSortBy(\"\");\n      }\n    }\n  }\n\n  return (\n    <Wrapper>\n      <BreadcrumbTrail onClick={setFolder} path={folder} />\n      <Spacer height=\"10px\" />\n      <Header>\n        <span />\n        <SortableHeader\n          onClick={() => handleSort(\"name\")}\n          sortDir={sortBy === \"name\" ? sortDir : null}\n        >\n          Name\n        </SortableHeader>\n        <SortableHeader\n          onClick={() => handleSort(\"modified\")}\n          sortDir={sortBy === \"modified\" ? sortDir : null}\n        >\n          Modified\n        </SortableHeader>\n        <SortableHeader\n          onClick={() => handleSort(\"modifiedBy\")}\n          sortDir={sortBy === \"modifiedBy\" ? sortDir : null}\n        >\n          Modified By\n        </SortableHeader>\n      </Header>\n      <Loader isLoading={isLoading} />\n      <List\n        emptyMessage=\"There are no files here\"\n        isLoading={isLoading}\n        items={files}\n        itemRenderer={(entry) => (\n          <Entry\n            entry={entry}\n            isSelected={selectedEntries.some(\n              (e) => e.path_lower === entry.path_lower\n            )}\n            onClick={handleClick}\n          />\n        )}\n      />\n    </Wrapper>\n  );\n}\n\nexport default Explorer;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\n\nconst errorStyle = css`\n  border-color: ${p => p.theme.color.error};\n  color: ${p => p.theme.color.error};\n`;\n\nconst Error = styled.span`\n  ${errorStyle}\n  font-size: 14px;\n  font-weight: 700;\n`;\n\nconst StyledInput = styled.input`\n  background-color: ${p => p.theme.color.background};\n  border: 1px solid ${p => p.theme.color.primary};\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n`;\n\nconst Title = styled.div`\n  background-color: ${p => p.theme.color.background};\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n`;\n\nconst Wrapper = styled.label`\n  color: ${p => p.theme.color.secondary};\n  position: relative;\n\n  :focus-within {\n    color: ${p => p.theme.color.white};\n  }\n\n  ${p => (p.hasError ? errorStyle : \"\")}\n`;\n\nfunction TextInput({ error, hasError, onChange, title, value, ...props }) {\n  return (\n    <Wrapper hasError={hasError}>\n      <StyledInput\n        {...props}\n        hasError={hasError}\n        onChange={e => onChange(e.target.value)}\n        type=\"text\"\n        value={value}\n      />\n      <Title>{title}</Title>\n      {error && <Error>{error}</Error>}\n    </Wrapper>\n  );\n}\n\nexport default TextInput;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport { HOME } from \"./constants\";\nimport Button from \"./Button\";\nimport ButtonLink from \"./ButtonLink\";\nimport Explorer from \"./Explorer\";\nimport TextInput from \"./TextInput\";\n\nimport usePlaylists from \"./usePlaylists\";\nimport { makeRelativeUrl } from \"./constants\";\n\nconst ExplorerInner = styled.div`\n  overflow-y: scroll;\n  height: 470px;\n`;\n\nconst ExplorerTitle = styled.div`\n  background-color: ${(p) => p.theme.color.background};\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n`;\n\nconst ExplorerWrapper = styled.div`\n  border: 1px solid ${(p) => p.theme.color.primary};\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n`;\n\nconst Header = styled.div`\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n`;\n\nconst Title = styled.h2``;\n\nconst Wrapper = styled.form`\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n`;\n\nfunction AddPlaylist({ navigate }) {\n  const [artist, setArtist] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [path, setPath] = useState(\"/\");\n  const { onCreatePlaylist } = usePlaylists({});\n\n  const canSave = !!artist && !!title && !!path;\n\n  async function handleSave(e) {\n    e.preventDefault();\n\n    const playlistId = await onCreatePlaylist(`${path}/${title}.mix`, {\n      artist,\n      title,\n      tracks: [],\n    });\n\n    navigate(makeRelativeUrl(`/playlist/${playlistId}`));\n\n    return false;\n  }\n\n  return (\n    <Wrapper onSubmit={canSave ? handleSave : undefined}>\n      <Header>\n        <Title>Add Playlist</Title>\n        <Button disabled={!canSave} type=\"submit\">\n          Save\n        </Button>\n        <ButtonLink to={HOME}>Cancel</ButtonLink>\n      </Header>\n      <TextInput onChange={setTitle} title=\"Title\" value={title} />\n      <TextInput onChange={setArtist} title=\"Artist\" value={artist} />\n      <ExplorerWrapper>\n        <ExplorerInner>\n          <Explorer onPathChange={setPath} />\n        </ExplorerInner>\n        <ExplorerTitle>Location</ExplorerTitle>\n      </ExplorerWrapper>\n    </Wrapper>\n  );\n}\n\nexport default AddPlaylist;\n","import React, { useEffect, useState } from \"react\";\nimport { useDropbox } from \"./dropboxContext\";\nimport useLocalStorage from \"./useLocalStorage\";\n\nconst imgState = {\n  none: \"none\",\n  fetched: \"fetched\",\n  error: \"error\",\n};\n\nfunction PlaylistImage({ playlist, size = 50 }) {\n  const [url, setUrl] = useState();\n  const [imageState, setImageState] = useState(imgState.none);\n  const { dbx } = useDropbox();\n  const [imageMap = {}, setImageMap] = useLocalStorage(\"playlistImages\");\n  const imageId = playlist?.data?.image?.id;\n\n  useEffect(() => {\n    if (url && imageState !== imgState.error) return;\n\n    async function getImageUrl() {\n      if (playlist?.data?.image) {\n        const fileLink = await dbx.filesGetTemporaryLink({\n          path: playlist.data.image?.path_lower,\n        });\n        setUrl(fileLink?.link);\n        setImageMap({\n          ...imageMap,\n          [playlist?.data?.image?.id]: fileLink?.link,\n        });\n        setImageState(imgState.fetched);\n      }\n    }\n\n    const mappedImage = imageMap[imageId];\n\n    if (imageState !== imgState.error && mappedImage) {\n      setUrl(mappedImage);\n    } else {\n      getImageUrl();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [imageId, imageState]);\n\n  function handleError(er) {\n    if (url && imgState !== imgState.fetched) {\n      // we didn't fetch the image and there's an error\n      // so force the fetch again\n      setImageState(imgState.error);\n    }\n  }\n\n  return (\n    <img\n      alt={playlist?.data?.title}\n      height={size}\n      onError={handleError}\n      src={url || `${process.env.PUBLIC_URL}/android-icon-96x96.png`}\n      width={size}\n    />\n  );\n}\n\nexport default PlaylistImage;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport PlaylistImage from \"./PlaylistImage\";\n\nconst Artist = styled.div`\n  ${(p) => p.theme.typography.sub}\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst Info = styled.div`\n  display: grid;\n`;\n\nconst White = styled.span`\n  color: ${(p) => p.theme.color.primary};\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr;\n`;\n\nfunction PlaylistHeader({ playlist }) {\n  return (\n    <Wrapper>\n      <PlaylistImage playlist={playlist} />\n      <Info>\n        <h1>{playlist.data.title}</h1>\n        {playlist.data.artist && (\n          <Artist>\n            By <White>{playlist.data.artist}</White>\n          </Artist>\n        )}\n      </Info>\n    </Wrapper>\n  );\n}\n\nexport default PlaylistHeader;\n","import { useEffect, useState } from \"react\";\n\nexport const queries = {\n  phone: `(min-width: 0) and (max-width: 419px)`,\n  phablet: `(min-width: 420px) and (max-width: 659px)`,\n  tablet: `(min-width: 660px) and (max-width: 1023px)`,\n  desktop: `(min-width: 1024px)`,\n};\n\nexport function useMedia(queries, values, defaultValue) {\n  // Array containing a media query list for each query\n  const mediaQueryLists = queries.map((q) => window.matchMedia(q));\n\n  // Function that gets value based on matching media query\n  const getValue = () => {\n    // Get index of first media query that matches\n    const index = mediaQueryLists.findIndex((mql) => mql.matches);\n    // Return related value or defaultValue if none\n    return typeof values[index] !== \"undefined\" ? values[index] : defaultValue;\n  };\n\n  // State and setter for matched value\n  const [value, setValue] = useState(getValue);\n\n  useEffect(\n    () => {\n      // Event listener callback\n      // Note: By defining getValue outside of useEffect we ensure that it has ...\n      // ... current values of hook args (as this hook callback is created once on mount).\n      const handler = () => setValue(getValue);\n      // Set a listener for each media query with above handler as callback.\n      mediaQueryLists.forEach((mql) => mql.addListener(handler));\n      // Remove listeners on cleanup\n      return () =>\n        mediaQueryLists.forEach((mql) => mql.removeListener(handler));\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [] // Empty array ensures effect is only run on mount and unmount\n  );\n\n  return value;\n}\n\nfunction useSize() {\n  return useMedia(\n    [queries.tablet, queries.desktop],\n    [\"medium\", \"large\"],\n    \"small\"\n  );\n}\n\nexport default useSize;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"@reach/router\";\n\nimport Button from \"./Button\";\nimport ButtonLink from \"./ButtonLink\";\nimport Explorer from \"./Explorer\";\nimport PlaylistHeader from \"./PlaylistHeader\";\nimport { makeRelativeUrl } from \"./constants\";\n\nimport usePlaylist from \"./usePlaylist\";\nimport useSize from \"./useSize\";\n\nconst Actions = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n`;\n\nconst Header = styled.div`\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? \"1fr\" : \"1fr auto\")};\n  padding: 20px;\n`;\n\nfunction ImageExplorer({ playlistId }) {\n  const { data: playlist, isLoading, onSave } = usePlaylist({ playlistId });\n  const [selectedImage, setSelectedImage] = useState([]);\n  const [isDirty, setIsDirty] = useState(false);\n  const navigate = useNavigate();\n  const size = useSize();\n\n  const playlistUrl = makeRelativeUrl(`/playlist/${playlistId}`);\n\n  useEffect(() => {\n    setSelectedImage(playlist?.data?.image);\n  }, [isLoading, playlist]);\n\n  function handleSave() {\n    onSave({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        image: selectedImage,\n      },\n    });\n    navigate(playlistUrl);\n  }\n\n  function handleSelectionChange([image]) {\n    setSelectedImage(image);\n    if (!isDirty) {\n      setIsDirty(true);\n    }\n  }\n\n  return (\n    <div>\n      <Header size={size}>\n        <PlaylistHeader playlist={playlist} />\n        <Actions>\n          <Button disabled={!isDirty} onClick={handleSave}>\n            Save\n          </Button>\n          <ButtonLink to={playlistUrl}>Cancel</ButtonLink>\n        </Actions>\n      </Header>\n      <Explorer\n        onSelectionChange={handleSelectionChange}\n        selectedEntries={selectedImage ? [selectedImage] : []}\n        showImages={true}\n      />\n    </div>\n  );\n}\n\nexport default ImageExplorer;\n","import styled from \"styled-components\";\nimport { Link } from \"@reach/router\";\n\nexport default styled(Link)`\n  color: ${p => p.theme.color.primary};\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ${p => p.theme.color.highlight};\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport formatRelative from \"date-fns/formatRelative\";\n\nimport ButtonLink from \"./ButtonLink\";\nimport Link from \"./Link\";\nimport List from \"./List\";\nimport Loader from \"./Loader\";\nimport PlaylistImage from \"./PlaylistImage\";\n\nimport usePlaylists from \"./usePlaylists\";\nimport useSize from \"./useSize\";\n\nconst Actions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n`;\n\nconst Name = styled.h2``;\n\nconst Modified = styled.div`\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst Updated = styled.span`\n  ${(p) => p.theme.typography.sub}\n  text-align: right;\n`;\n\nconst Path = styled.span`\n  ${(p) => p.theme.typography.sub}\n  color: ${(p) => p.theme.color.secondary};\n`;\n\nconst Playlist = styled.div`\n  ${(p) => p.theme.typography.base}\n  align-items: center;\n  background-color: ${(p) =>\n    p.theme.color[p.isPlaying ? \"bgHighlight\" : \"background\"]};\n  border: none;\n  border-top: 1px solid ${(p) => p.theme.color.bgHighlight};\n  color: ${(p) => p.theme.color[p.isPlaying ? \"highlight\" : \"inherit\"]};\n  cursor: pointer;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ${(p) => p.theme.space.medium}px ${(p) => p.theme.space.large}px;\n  text-align: left;\n\n  :hover {\n    background-color: ${(p) => p.theme.color.primary}11;\n  }\n`;\n\nconst Title = styled.div`\n  display: grid;\n`;\n\nfunction Playlists() {\n  const playlists = usePlaylists({ forceRefresh: true });\n  const size = useSize();\n\n  const test = playlists.something.that.does.not.exists;\n  // eslint-disable-next-line no-console\n  console.log(test);\n\n  return (\n    <div>\n      <Actions>\n        <ButtonLink to=\"new\">Add</ButtonLink>\n      </Actions>\n      <Loader isLoading={playlists.isLoading} />\n      <List\n        getKey={(playlist) => playlist.meta.id}\n        items={playlists.data}\n        itemRenderer={(playlist) => {\n          const modifiedBy = playlist.meta.user?.name?.display_name;\n          return (\n            <Link to={`playlist/${playlist.meta.id}`}>\n              <Playlist>\n                <PlaylistImage playlist={playlist} />\n                <Title>\n                  <Name>{playlist.data.title}</Name>\n                  {\n                    <Path>\n                      {playlist.data.artist || playlist.meta.path_display}\n                    </Path>\n                  }\n                </Title>\n                {size !== \"small\" && (\n                  <Updated>\n                    Updated{\" \"}\n                    {formatRelative(\n                      new Date(playlist.meta.server_modified),\n                      new Date()\n                    )}\n                    <Modified>\n                      {Boolean(modifiedBy) ? \"by \" : \"\"}\n                      {modifiedBy}\n                    </Modified>\n                  </Updated>\n                )}\n              </Playlist>\n            </Link>\n          );\n        }}\n      />\n    </div>\n  );\n}\n\nexport default Playlists;\n","import React from \"react\";\n\nimport Playlists from \"./Playlists\";\n\nfunction Home() {\n  return <Playlists />;\n}\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\nconst Image = styled.img``;\n\nconst Name = styled.span`\n  font-size: 16px;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.primary};\n  border-radius: 50%;\n  color: ${(p) => p.theme.color.background};\n  display: flex;\n  justify-content: center;\n  height: ${(p) => p.size}px;\n  overflow: hidden;\n  position: relative;\n  width: ${(p) => p.size}px;\n`;\n\nfunction Avatar({ initials, name, size = 36, url }) {\n  const [hasError, setHasError] = useState(false);\n\n  useEffect(() => {\n    if (url && hasError) {\n      setHasError(false);\n    }\n    // eslint-disable-next-line\n  }, [url]);\n\n  return (\n    <Wrapper size={size}>\n      {url && !hasError ? (\n        <Image\n          alt={name || initials}\n          height={size}\n          onError={() => setHasError(true)}\n          src={url}\n          width={size}\n        />\n      ) : (\n        <Name>{initials}</Name>\n      )}\n    </Wrapper>\n  );\n}\n\nexport default Avatar;\n","import React, { Fragment, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Voicemail from \"@material-ui/icons/Voicemail\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport { useDropbox } from \"../dropboxContext\";\nimport { HOME } from \"../constants\";\nimport Avatar from \"../Avatar\";\nimport Link from \"../Link\";\n\nconst Inner = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst Title = styled.h1`\n  padding-left: 10px;\n`;\n\nconst UserMenu = styled.button`\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  background-color: ${p => p.theme.color.backgroundLight};\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n`;\nfunction Header({ location }) {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { currentUser, onLogout } = useDropbox();\n\n  function closeMenu() {\n    setAnchorEl(null);\n  }\n\n  function handleLogout() {\n    onLogout();\n  }\n\n  function showMenu(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  return (\n    <Wrapper>\n      <Link to={HOME}>\n        <Inner>\n          <Voicemail fontSize=\"large\" />\n          <Title>Demo Tape</Title>\n        </Inner>\n      </Link>\n      <span />\n      {currentUser && (\n        <Fragment>\n          <UserMenu\n            aria-controls=\"user-menu\"\n            aria-haspopup=\"true\"\n            onClick={showMenu}\n          >\n            <Avatar\n              initials={currentUser?.name.abbreviated_name}\n              name={currentUser?.name.display_name}\n              url={currentUser?.profile_photo_url}\n            />\n          </UserMenu>\n          <Menu\n            elevation={0}\n            getContentAnchorEl={null}\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"center\"\n            }}\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"center\"\n            }}\n            id=\"user-menu\"\n            anchorEl={anchorEl}\n            keepMounted={true}\n            open={Boolean(anchorEl)}\n            onClose={closeMenu}\n          >\n            <MenuItem onClick={() => handleLogout()}>Logout</MenuItem>\n          </Menu>\n        </Fragment>\n      )}\n    </Wrapper>\n  );\n}\n\nexport default Header;\n","import styled from \"styled-components\";\n\nconst size = 30;\n\nexport default styled.button`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.background};\n  border: ${(p) => (p.hideBorder ? \"none\" : \"1px solid white\")};\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ${(p) => p.size || size}px;\n  justify-content: center;\n  outline: none;\n  transition: ${(p) => p.theme.transition};\n  width: ${(p) => p.size || size}px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ${(p) => p.theme.color.background};\n  }\n\n  ${(p) =>\n    p.disabled\n      ? `\n    color: ${p.theme.color.disabled};\n    cursor: unset;\n    border-color: ${p.theme.color.transparent};\n\n    :hover, :focus {\n      background-color: ${p.theme.color.background};\n      color: ${p.theme.color.disabled};\n    }\n  `\n      : \"\"}\n`;\n","export function getMMSSFromMs(millis) {\n  const totalSeconds = millis / 1000;\n  const seconds = Math.floor(totalSeconds % 60);\n  const minutes = Math.floor(totalSeconds / 60);\n  return padWithZero(minutes) + \":\" + padWithZero(seconds);\n}\n\nfunction padWithZero(number) {\n  const string = number.toString();\n  if (number < 10) {\n    return \"0\" + string;\n  }\n  return string;\n}\n","import React, { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport { useAudio } from \"../../audioContext\";\nimport { getMMSSFromMs } from \"./utils\";\n\nconst LeftTime = styled.span`\n  text-align: right;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  color: ${p => p.theme.color[p.isDisabled ? \"disabled\" : \"primary\"]};\n  display: grid;\n  grid-template-columns: 80px 1fr 80px;\n  grid-gap: 5px;\n`;\n\nfunction Position() {\n  const audio = useAudio();\n  const [seekPosition, setSeekPosition] = useState(0);\n  const [isSeeking, setIsSeeking] = useState(false);\n  const inputRef = useRef();\n\n  function handleChange(e) {\n    setSeekPosition(inputRef.current.value);\n  }\n\n  function handleSeek(e) {\n    setIsSeeking(false);\n    const nextPosition = parseInt(inputRef.current.value);\n    if (!isNaN(nextPosition)) {\n      audio.onSeek(nextPosition);\n    }\n  }\n\n  const displayPos = isSeeking ? seekPosition : audio.position;\n\n  return (\n    <Wrapper isDisabled={!audio.track}>\n      <LeftTime>{getMMSSFromMs(displayPos)}</LeftTime>\n      <input\n        type=\"range\"\n        disabled={!audio.track}\n        min={0}\n        max={audio.duration}\n        onChange={handleChange}\n        onMouseDown={e => {\n          setIsSeeking(true);\n        }}\n        onMouseUp={e => {\n          handleSeek(e);\n        }}\n        ref={inputRef}\n        value={displayPos}\n      />\n      <span>{getMMSSFromMs(audio.duration)}</span>\n    </Wrapper>\n  );\n}\n\nexport default Position;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport PlaylistImage from \"../../PlaylistImage\";\nimport { removeExtension } from \"../../utils\";\n\nconst Artist = styled.div`\n  ${(p) => p.theme.typography.sub}\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst Info = styled.div`\n  display: grid;\n  grid-gap: 2px;\n`;\n\nconst TrackName = styled.div`\n  ${(p) => p.theme.typography.base}\n  font-weight: 500;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 50px 1fr;\n`;\n\nfunction SongDetails({ playlist, track }) {\n  return (\n    <Wrapper>\n      <PlaylistImage playlist={playlist?.data} />\n      <Info>\n        <TrackName>{removeExtension(track?.name)}</TrackName>\n        <Artist>\n          {playlist?.data?.data?.artist || playlist?.data?.data?.title}\n        </Artist>\n      </Info>\n    </Wrapper>\n  );\n}\n\nexport default SongDetails;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport VolumeMute from \"@material-ui/icons/VolumeMute\";\nimport VolumeUp from \"@material-ui/icons/VolumeUp\";\n\nimport { useAudio } from \"../../audioContext\";\n\nconst Icon = styled.div`\n  cursor: pointer;\n\n  :hover {\n    color: ${p => p.theme.color.highlight};\n  }\n`;\n\nconst Input = styled.input`\n  width: 100%;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 20px 1fr;\n  padding: 0 10px;\n`;\n\nfunction Volume() {\n  const { isMuted, onMute, onUnmute, onVolumeChange, volume } = useAudio();\n\n  const IconName = volume === 0 || isMuted ? VolumeMute : VolumeUp;\n\n  return (\n    <Wrapper>\n      <Icon\n        as={IconName}\n        fontSize=\"small\"\n        onClick={isMuted ? onUnmute : onMute}\n      />\n      <Input\n        max={1}\n        min={0}\n        onChange={e => onVolumeChange(e.currentTarget.value)}\n        step={0.01}\n        type=\"range\"\n        value={isMuted ? 0 : volume}\n      />\n    </Wrapper>\n  );\n}\n\nexport default Volume;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport Pause from \"@material-ui/icons/Pause\";\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\nimport SkipNext from \"@material-ui/icons/SkipNext\";\nimport SkipPrevious from \"@material-ui/icons/SkipPrevious\";\n\nimport { audioStates, useAudio } from \"../../audioContext\";\nimport useSize from \"../../useSize\";\n\nimport IconButton from \"../../IconButton\";\nimport Position from \"./Position\";\nimport SongDetails from \"./SongDetails\";\nimport Volume from \"./Volume\";\n\nconst Buttons = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n`;\n\nconst Controls = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst ControlsInner = styled.div`\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.backgroundLight};\n  bottom: 0;\n  display: grid;\n  grid-template-columns: ${(p) =>\n    p.isSmall ? \"60px 1fr\" : \"minmax(200px, 0.5fr) 1fr 150px\"};\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n`;\n\nfunction Player() {\n  const audio = useAudio();\n  const size = useSize();\n\n  const hasTrack = !!audio.track;\n  const isPlaying = audio.state === audioStates.playing;\n  const isLoading = audio.state === audioStates.loading;\n\n  const isSmall = size === \"small\";\n\n  if (isSmall && !hasTrack) return null;\n\n  const playButton = isPlaying ? (\n    <IconButton aria-label=\"Pause\" onClick={audio.onPause} size={40}>\n      <Pause />\n    </IconButton>\n  ) : (\n    <IconButton\n      aria-label=\"Play\"\n      disabled={isLoading || !hasTrack}\n      onClick={() => audio.onResume()}\n      size={40}\n    >\n      <PlayArrow />\n    </IconButton>\n  );\n\n  return (\n    <Wrapper isSmall={isSmall}>\n      {isSmall && playButton}\n      <SongDetails playlist={audio.playlist} track={audio.track} />\n      {!isSmall && (\n        <Controls>\n          <ControlsInner>\n            <Buttons>\n              <IconButton\n                aria-label=\"Previous\"\n                disabled={!audio.hasPrevious}\n                hideBorder\n                onClick={audio.onPrevious}\n              >\n                <SkipPrevious fontSize=\"small\" />\n              </IconButton>\n              {playButton}\n              <IconButton\n                aria-label=\"Next\"\n                disabled={!audio.hasNext}\n                hideBorder\n                onClick={audio.onNext}\n              >\n                <SkipNext fontSize=\"small\" />\n              </IconButton>\n            </Buttons>\n            <Position />\n          </ControlsInner>\n        </Controls>\n      )}\n      {!isSmall && <Volume />}\n    </Wrapper>\n  );\n}\n\nexport default Player;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Redirect } from \"@reach/router\";\n\nimport Header from \"./Header\";\nimport Player from \"./Player\";\nimport { useDropbox } from \"../dropboxContext\";\n\nconst Content = styled.main`\n  background-color: ${(p) => p.theme.color.background};\n  overflow-y: scroll;\n  padding-bottom: 113px;\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n`;\n\nfunction Main({ children, location }) {\n  const { isAuthenticated } = useDropbox();\n\n  if (!isAuthenticated && !location.pathname.includes(\"/auth\")) {\n    return <Redirect noThrow={true} to=\"auth\" />;\n  }\n\n  return (\n    <Wrapper>\n      <Header location={location} />\n      <Content>{children}</Content>\n      <Player />\n    </Wrapper>\n  );\n}\n\nexport default Main;\n","import React, { useEffect, useState } from \"react\";\n\nimport Button from \"./Button\";\n\nfunction ConfirmationButton({ message, onClick, ...props }) {\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setIsConfirming(false);\n    }, 2000);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [isConfirming]);\n\n  function onConfirm() {\n    setIsConfirming(true);\n  }\n\n  return isConfirming ? (\n    <Button onBlur={() => setIsConfirming(false)} onClick={onClick}>\n      {message || \"Are you sure?\"}\n    </Button>\n  ) : (\n    <Button onClick={onConfirm} {...props} />\n  );\n}\n\nexport default ConfirmationButton;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport formatRelative from \"date-fns/formatRelative\";\n\nimport IconButton from \"../IconButton\";\n\nimport Delete from \"@material-ui/icons/Delete\";\nimport Headset from \"@material-ui/icons/Headset\";\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\n\nimport { removeExtension } from \"../utils\";\nimport useSize from \"../useSize\";\n\nconst Inner = styled.div`\n  align-items: center;\n  display: grid;\n  line-height: 30px;\n  grid-gap: 5px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? 35 : 40)}px 20px 1fr ${(\n      p\n    ) => (p.size === \"small\" || p.isEditable ? \"\" : \"auto\")};\n  padding: ${(p) =>\n    p.size === \"small\"\n      ? `${p.theme.space.medium}px ${p.theme.space.small}`\n      : p.theme.space.medium}px;\n`;\n\nconst Play = styled.span`\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ${(p) => (p.isPlaying ? \"white\" : \"transparent\")};\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 30px;\n  width: 30px;\n`;\n\nconst Updated = styled.span`\n  color: ${(p) => p.theme.color.secondary};\n  display: grid;\n  font-size: 11px;\n  line-height: 15px;\n  text-align: right;\n`;\n\nconst UpdatedBy = styled.span`\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst Wrapper = styled.button`\n${(p) => p.theme.typography.base}\nbackground-color: ${(p) =>\n  p.theme.color[p.isPlaying ? \"bgHighlight\" : \"background\"]};\n  border: none;\n  border-top: 1px solid ${(p) => p.theme.color.bgHighlight};\n  color: ${(p) => p.theme.color[p.isPlaying ? \"highlight\" : \"inherit\"]};\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n  \n  :hover {\n    background-color: ${(p) => p.theme.color.primary}11;\n    \n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n`;\n\nfunction Track({\n  index,\n  isEditable,\n  isPlaying,\n  onClick,\n  onDelete,\n  track,\n  user,\n}) {\n  const size = useSize();\n\n  return (\n    <Wrapper\n      isPlaying={isPlaying}\n      onClick={isEditable ? undefined : () => onClick(track)}\n    >\n      <Inner isEditable={isEditable} size={size}>\n        {isEditable ? (\n          <IconButton onClick={() => onDelete(track)}>\n            <Delete fontSize=\"small\" />\n          </IconButton>\n        ) : (\n          <Play id=\"play\" isPlaying={isPlaying}>\n            {isPlaying ? (\n              <Headset fontSize=\"small\" />\n            ) : (\n              <PlayArrow fontSize=\"small\" />\n            )}\n          </Play>\n        )}\n        <span>{index}.</span>\n        <span>{removeExtension(track.name)}</span>\n        {size !== \"small\" && !isEditable && (\n          <Updated>\n            <span>\n              Updated{\" \"}\n              {formatRelative(new Date(track.server_modified), new Date())}\n            </span>\n            {user && <UpdatedBy>by {user.name.display_name}</UpdatedBy>}\n          </Updated>\n        )}\n      </Inner>\n    </Wrapper>\n  );\n}\n\nexport default Track;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport DragIndicator from \"@material-ui/icons/DragIndicator\";\n\nimport List from \"../List\";\nimport Track from \"./Track\";\n\nimport { reorderList } from \"../utils\";\nimport { getModifiedBy } from \"../Explorer/fileUtils\";\n\nconst DragHandle = styled.div`\n  align-items: center;\n  color: ${p => p.theme.color.primary};\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n`;\n\nconst TrackWrapper = styled.div`\n  position: relative;\n`;\n\nfunction trackListPropsAreEqual(prev, next) {\n  return (\n    prev.playingId === next.playingId &&\n    prev.tracks.map(t => t.id).join() === next.tracks.map(t => t.id).join()\n  );\n}\n\nconst EditableTrackList = React.memo(function EditableTrackList({\n  onTrackClick,\n  onTrackDelete,\n  playingId,\n  tracks\n}) {\n  return (\n    <List\n      getKey={t => t.id}\n      items={tracks}\n      itemRenderer={(track, index) => (\n        <Draggable draggableId={track.id} index={index}>\n          {provided => (\n            <TrackWrapper ref={provided.innerRef} {...provided.draggableProps}>\n              <Track\n                index={index + 1}\n                isEditable={true}\n                isPlaying={playingId === track.id}\n                onClick={onTrackClick}\n                onDelete={onTrackDelete}\n                track={track}\n              />\n              <DragHandle {...provided.dragHandleProps}>\n                <DragIndicator />\n              </DragHandle>\n            </TrackWrapper>\n          )}\n        </Draggable>\n      )}\n    />\n  );\n},\ntrackListPropsAreEqual);\n\nfunction TrackList({\n  isEditing,\n  onTrackChange,\n  onTrackClick,\n  onTrackDelete,\n  playingId,\n  tracks,\n  users\n}) {\n  function handleSort(result) {\n    if (\n      !result.destination ||\n      result.destination.index === result.source.index\n    ) {\n      return;\n    }\n\n    const reordered = reorderList(\n      tracks,\n      result.source.index,\n      result.destination.index\n    );\n\n    onTrackChange(reordered);\n  }\n\n  function handleDelete(track) {\n    onTrackChange(tracks.filter(t => t.id !== track.id));\n  }\n\n  return isEditing ? (\n    <DragDropContext onDragEnd={handleSort}>\n      <Droppable droppableId=\"tracks\">\n        {provided => (\n          <div ref={provided.innerRef} {...provided.droppableProps}>\n            <EditableTrackList\n              onTrackClick={onTrackClick}\n              onTrackDelete={handleDelete}\n              playingId={playingId}\n              tracks={tracks}\n            />\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  ) : (\n    <List\n      getKey={t => t.id}\n      items={tracks}\n      itemRenderer={(track, index) => (\n        <Track\n          index={index + 1}\n          isPlaying={playingId === track.id}\n          onClick={onTrackClick}\n          track={track}\n          user={users[getModifiedBy(track)]}\n        />\n      )}\n    />\n  );\n}\n\nexport default TrackList;\n","import React, { Fragment, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport { HOME } from \"../constants\";\nimport Button from \"../Button\";\nimport ButtonLink from \"../ButtonLink\";\nimport ConfirmationButton from \"../ConfirmationButton\";\nimport Loader from \"../Loader\";\nimport PlaylistHeader from \"../PlaylistHeader\";\nimport PlaylistImage from \"../PlaylistImage\";\nimport TextInput from \"../TextInput\";\nimport TrackList from \"./TrackList\";\n\nimport { useAudio } from \"../audioContext\";\nimport usePlaylist from \"../usePlaylist\";\nimport useSize from \"../useSize\";\n\nconst Actions = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n`;\n\nconst Add = styled.div`\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: ${(p) =>\n    p.size === \"small\" ? \"space-between\" : \"flex-start\"};\n  padding: 20px;\n`;\n\nconst Header = styled.div`\n  align-items: ${(p) => (p.isEditing ? \"flex-start\" : \"center\")};\n  display: grid;\n  grid-gap: ${(p) => (p.isEditing ? 40 : 20)}px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? \"1fr\" : \"1fr auto\")};\n  padding: 20px;\n`;\n\nconst ImageEdit = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr;\n`;\n\nconst Inputs = styled.div`\n  display: grid;\n  grid-gap: 20px;\n`;\n\nfunction Playlist({ navigate, playlistId }) {\n  const { data, isLoading, onDelete, onSave, users } = usePlaylist({\n    playlistId,\n  });\n  const [isDirty, setIsDirty] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [playlist, setPlaylist] = useState(data);\n  const audio = useAudio();\n  const size = useSize();\n\n  function handleCancelEdit() {\n    setIsDirty(false);\n    setIsEditing(false);\n    setPlaylist(data);\n  }\n\n  async function handleDelete() {\n    await onDelete(playlist);\n    navigate(HOME);\n  }\n\n  function handleTrackChange(tracks) {\n    setPlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        tracks,\n      },\n    });\n    setIsDirty(true);\n  }\n\n  function handleToggleEdit() {\n    if (isEditing) {\n      if (isDirty) {\n        onSave(playlist);\n      }\n      setIsDirty(false);\n      setIsEditing(false);\n    } else {\n      setIsEditing(true);\n      setPlaylist(data);\n    }\n  }\n\n  function handleArtistChange(artist) {\n    setPlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        artist,\n      },\n    });\n    setIsDirty(true);\n  }\n\n  function handleTitleChange(title) {\n    setPlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        title,\n      },\n    });\n    setIsDirty(true);\n  }\n\n  function handleTrackClick(track) {\n    audio.onPlay({ playlistId, trackId: track.id });\n  }\n\n  return (\n    <div>\n      {isEditing ? (\n        <Header isEditing={isEditing} size={size}>\n          <Inputs>\n            <ImageEdit>\n              <PlaylistImage playlist={playlist} />\n              <ButtonLink to=\"image\">Edit Image</ButtonLink>\n            </ImageEdit>\n            <TextInput\n              onChange={handleTitleChange}\n              title=\"Title\"\n              value={playlist.data.title}\n            />\n            <TextInput\n              onChange={handleArtistChange}\n              title=\"Artist\"\n              value={playlist.data.artist || \"\"}\n            />\n          </Inputs>\n          <Actions>\n            <Fragment>\n              <Button disabled={!isDirty} onClick={handleToggleEdit}>\n                Save\n              </Button>\n              <Button onClick={handleCancelEdit}>Cancel</Button>\n            </Fragment>\n          </Actions>\n        </Header>\n      ) : (\n        <Header isEditing={isEditing} size={size}>\n          <PlaylistHeader playlist={playlist} />\n          <Actions>\n            <Button onClick={handleToggleEdit}>Edit</Button>\n            <ConfirmationButton message=\"Really Delete?\" onClick={handleDelete}>\n              Delete\n            </ConfirmationButton>\n          </Actions>\n        </Header>\n      )}\n      {isEditing && (\n        <Add size={size}>\n          <h2>Tracks</h2>\n          <ButtonLink to=\"tracks\">Add Tracks</ButtonLink>\n        </Add>\n      )}\n      <Loader isLoading={isLoading} />\n      <TrackList\n        isEditing={isEditing}\n        onTrackChange={handleTrackChange}\n        onTrackClick={handleTrackClick}\n        playingId={audio.track?.id}\n        tracks={playlist.data.tracks}\n        users={users}\n      />\n    </div>\n  );\n}\n\nexport default Playlist;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"@reach/router\";\n\nimport Button from \"./Button\";\nimport ButtonLink from \"./ButtonLink\";\nimport Explorer from \"./Explorer\";\nimport PlaylistHeader from \"./PlaylistHeader\";\nimport { makeRelativeUrl } from \"./constants\";\n\nimport usePlaylist from \"./usePlaylist\";\nimport useSize from \"./useSize\";\n\nconst Actions = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n`;\n\nconst Header = styled.div`\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? \"1fr\" : \"1fr auto\")};\n  padding: 20px;\n`;\n\nfunction Tracks({ playlistId }) {\n  const { data: playlist, isLoading, onSave } = usePlaylist({ playlistId });\n  const [selectedTracks, setSelectedTracks] = useState([]);\n  const [isDirty, setIsDirty] = useState(false);\n  const navigate = useNavigate();\n  const size = useSize();\n\n  const playlistUrl = makeRelativeUrl(`/playlist/${playlistId}`);\n\n  useEffect(() => {\n    setSelectedTracks(playlist?.data?.tracks || []);\n  }, [isLoading, playlist]);\n\n  function handleSave() {\n    onSave({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        tracks: selectedTracks,\n      },\n    });\n    navigate(playlistUrl);\n  }\n\n  function handleSelectionChange(tracks) {\n    setSelectedTracks(tracks);\n    if (!isDirty) {\n      setIsDirty(true);\n    }\n  }\n\n  return (\n    <div>\n      <Header size={size}>\n        <PlaylistHeader playlist={playlist} />\n        <Actions>\n          <Button disabled={!isDirty} onClick={handleSave}>\n            Save\n          </Button>\n          <ButtonLink to={playlistUrl}>Cancel</ButtonLink>\n        </Actions>\n      </Header>\n      <Explorer\n        onSelectionChange={handleSelectionChange}\n        selectedEntries={selectedTracks}\n        showFiles={true}\n      />\n    </div>\n  );\n}\n\nexport default Tracks;\n","import React from \"react\";\nimport { Router } from \"@reach/router\";\nimport { ThemeProvider } from \"styled-components\";\nimport {\n  ThemeProvider as MuiThemeProvider,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport blue from \"@material-ui/core/colors/blue\";\n\nimport { AudioProvider } from \"./audioContext\";\nimport { CacheProvider } from \"./cacheContext\";\nimport { DropboxProvider } from \"./dropboxContext\";\nimport { ErrorBoundary } from \"./useErrorTracking\";\nimport { HOME } from \"./constants\";\nimport theme from \"./theme\";\n\nimport Auth from \"./Auth\";\nimport AddPlaylist from \"./AddPlaylist\";\nimport ImageExplorer from \"./ImageExplorer\";\nimport Home from \"./Home\";\nimport Main from \"./Main\";\nimport Playlist from \"./Playlist\";\nimport Tracks from \"./Tracks\";\n\nconst muiTheme = createMuiTheme({\n  palette: {\n    primary: blue,\n  },\n});\n\nfunction getAuthUrl() {\n  // /auth will be in prod but not local so try to strip it\n  // and the trailing slash that could be there\n  const base = window.location.href.replace(\"/auth\", \"\").replace(/\\/$/, \"\");\n  return `${base}/auth`;\n}\n\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <MuiThemeProvider theme={muiTheme}>\n        <ThemeProvider theme={theme}>\n          <CacheProvider>\n            <DropboxProvider authUrl={getAuthUrl()}>\n              <AudioProvider>\n                <Router basepath={HOME}>\n                  <Main path=\"/\">\n                    <Auth path=\"auth\" />\n                    <AddPlaylist path=\"new\" />\n                    <Playlist path=\"playlist/:playlistId\" />\n                    <ImageExplorer path=\"playlist/:playlistId/image\" />\n                    <Tracks path=\"playlist/:playlistId/tracks\" />\n                    <Home path=\"/\" />\n                  </Main>\n                </Router>\n              </AudioProvider>\n            </DropboxProvider>\n          </CacheProvider>\n        </ThemeProvider>\n      </MuiThemeProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}