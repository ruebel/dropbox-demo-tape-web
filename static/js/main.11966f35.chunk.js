(this["webpackJsonpdropbox-demo-tape-web"]=this["webpackJsonpdropbox-demo-tape-web"]||[]).push([[0],{208:function(e,n,t){},221:function(e,n){},223:function(e,n){},234:function(e,n){},236:function(e,n){},265:function(e,n){},266:function(e,n){},271:function(e,n){},273:function(e,n){},280:function(e,n){},299:function(e,n){},325:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(12),c=t.n(a),o=(t(208),t(28)),s=t(2),l=t(197),u=t(355),d=t(196),p=t.n(d),b=t(10),j=t.n(b),h=t(14),f=t(6),g=t(5),O=t(73),x=t(35),v=t(178),m=t(179),y=t(200),k=t(199),w="/dropbox-demo-tape-web",S="https://hooks.zapier.com/hooks/catch/3498170/os51faz";function C(e){return"".concat(w).concat(e)}function z(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var t={env:"production",error:e.toString(),info:JSON.stringify(n),url:window.location.href,timestamp:new Date};fetch(S,{body:JSON.stringify(t),method:"POST"}),console.error("Error",t)}catch(r){console.error("Error logging error",{originalError:e,logginError:r})}}var P=function(e){Object(y.a)(t,e);var n=Object(k.a)(t);function t(){return Object(v.a)(this,t),n.apply(this,arguments)}return Object(m.a)(t,[{key:"componentDidCatch",value:function(e,n){z(e,n)}},{key:"render",value:function(){return this.props.children}}]),t}(r.Component);function E(e,n){var t=Object(r.useState)((function(){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):n}catch(r){return z(r),n}})),i=Object(f.a)(t,2),a=i[0],c=i[1];return[a,function(n){try{var t=n instanceof Function?n(a):n;c(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(r){z(r)}}]}var I=t(1),A=Object(r.createContext)();function D(e){var n=e.children,t=e.initialState,i=void 0===t?{}:t,a=E("ddt",i),c=Object(f.a)(a,2),o=c[0],s=c[1],l=Object(r.useState)(o),u=Object(f.a)(l,2),d=u[0],p=u[1];Object(r.useEffect)((function(){s(d)}),[d]);var b={getValue:function(e){return d[e]},setValue:function(e,n){p((function(t){return Object(g.a)(Object(g.a)({},t),{},Object(x.a)({},e,n))}))},resetCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p((function(){return Object(g.a)(Object(g.a)({},i),e)}))},state:d};return Object(I.jsx)(A.Provider,{value:b,children:n})}function T(){var e=Object(r.useContext)(A);if(void 0===e)throw new Error("useCache must be used within a CacheProvider");return e}var _=r.createContext(),B="ie394xarjsfdxr0",L=new O.DropboxAuth({clientId:B}),M="".concat(window.location.origin).concat(C("/auth"));function R(e){e.authUrl;var n=e.children,t=T(),i=r.useState(null),a=Object(f.a)(i,2),c=a[0],o=a[1],s=r.useState(null),l=Object(f.a)(s,2),u=l[0],d=l[1],p=r.useRef(new O.Dropbox({clientId:B})),b=r.useState(!1),g=Object(f.a)(b,2),x=g[0],v=g[1],m=r.useState(t.getValue("accessToken")),y=Object(f.a)(m,2),k=y[0],w=y[1],S=r.useState(t.getValue("refreshToken")),C=Object(f.a)(S,2),z=C[0],P=C[1],E=r.useCallback((function(){function e(){return(e=Object(h.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAuthenticationUrl(M,void 0,"code","offline",void 0,void 0,!0);case 2:(n=e.sent)?(t.setValue("codeVerifier",L.codeVerifier),window.location.href=n):d("Invalid Dropbox Id");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);function A(){return(A=Object(h.a)(j.a.mark((function e(){var n,r,i,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new URLSearchParams(window.location.search),r=n.get("code"),(i=t.getValue("codeVerifier"))&&r){e.next=5;break}return e.abrupt("return");case 5:return L.setCodeVerifier(i),e.next=8,L.getAccessTokenFromCode(M,r);case 8:a=e.sent,L.setAccessToken(a.result.access_token),L.setRefreshToken(a.result.refresh_token),p.current=new O.Dropbox({auth:L}),t.setValue("accessToken",a.result.access_token),t.setValue("refreshToken",a.result.refresh_token),P(z),w(k),v(!0);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.useEffect((function(){function e(){return n.apply(this,arguments)}function n(){return(n=Object(h.a)(j.a.mark((function e(){var n,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.current.usersGetCurrentAccount();case 3:n=e.sent,i=null===n||void 0===n?void 0:n.result,o(i),t.setValue("currentUser",i),v(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error getting user",e.t0),r();case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function r(){return i.apply(this,arguments)}function i(){return(i=Object(h.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,L.setAccessToken(k),L.setRefreshToken(z),L.setCodeVerifier(t.getValue("codeVerifier")),r=new O.Dropbox({auth:L}),p.current=r,n.next=8,L.checkAndRefreshAccessToken();case 8:e(),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("Error refreshing token",n.t0),d(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}x&&!c?e():!x&&z&&r()}),[x,z]);var D={accessToken:k,currentUser:c,dbx:p.current,error:u,isAuthenticated:x,onAuth:E,onLogout:function(){v(!1),o(null),t.resetCache({clientId:B})},onAuthError:function(e){console.error("onAuthError",e),v(!1)},parseAcessToken:function(){return A.apply(this,arguments)}};return Object(I.jsx)(_.Provider,{value:D,children:n})}function F(){var e=r.useContext(_);if(void 0===e)throw new Error("useCache must be used within a DropboxContext");return e}var V="mediaSession"in navigator,N=[{src:"".concat("/dropbox-demo-tape-web","/android-icon-96x96.png"),sizes:"96x96",type:"image/png"},{src:"".concat("/dropbox-demo-tape-web","/android-icon-144x144.png"),sizes:"144x144",type:"image/png"},{src:"".concat("/dropbox-demo-tape-web","/android-icon-180x180.png"),sizes:"180x180",type:"image/png"}];var H=t(58);function U(){var e=T(),n=F(),t=n.dbx,i=n.isAuthenticated,a=Object(r.useState)(!1),c=Object(f.a)(a,2),o=c[0],s=c[1],l=Object(r.useState)(e.getValue("users")||{}),u=Object(f.a)(l,2),d=u[0],p=u[1];function b(){return(b=Object(h.a)(j.a.mark((function e(n){var r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=n.filter((function(e){return!d[e]}))).length>0&&t&&i)){e.next=16;break}return s(!0),e.prev=3,e.next=6,t.usersGetAccountBatch({account_ids:r});case 6:return a=e.sent,O(c=((null===a||void 0===a?void 0:a.result)||a).reduce((function(e,n){return Object(g.a)(Object(g.a)({},e),{},Object(x.a)({},n.account_id,n))}),d)),s(!1),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(3),z(e.t0);case 16:return e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function O(n){p(n),e.setValue("users",n)}return{data:d,isLoading:o,fetchUsers:function(e){return b.apply(this,arguments)}}}function J(e,n,t){return K.apply(this,arguments)}function K(){return(K=Object(h.a)(j.a.mark((function e(n,t,r){var i,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filesUpload({autorename:!1,contents:JSON.stringify(t),mode:{".tag":"overwrite"},mute:!0,path:r});case 2:return i=e.sent,a=i.result,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(".").pop()}function W(e){var n;return null===e||void 0===e||null===(n=e.sharing_info)||void 0===n?void 0:n.modified_by}function $(e){return Object(H.a)(new Set(e.map(W))).filter(Boolean)}function q(e){return["mp3","m4a","ovw","wav"].includes(G(e))}function Q(e){return"file"===e[".tag"]}function X(e){return"folder"===e[".tag"]}function Y(e){return X(e)||Q(e)&&q(e.name)}function Z(e){return X(e)||Q(e)&&(n=e.name,["png","jpg","jpeg"].includes(G(n)));var n}function ee(e){return Object(g.a)(Object(g.a)({},e),{},{isAudioFile:q(e.name),isFolder:"folder"===e[".tag"],isPlaylist:(n=e.name,"mix"===G(n)),path:e.path_display,type:e[".tag"],user:W(e)});var n}function ne(e){return te.apply(this,arguments)}function te(){return te=Object(h.a)(j.a.mark((function e(n){var t,r,i,a,c,o,s,l,u,d,p=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>1&&void 0!==p[1]?p[1]:"",r=p.length>2?p[2]:void 0,i=p.length>3?p[3]:void 0,e.next=5,n.filesListFolder({path:t});case 5:return a=e.sent,c=a.result,o=c.cursor,s=c.entries,l=c.hasMore,u=r?Y:i?Z:X,d={cursor:o,data:s.filter(u).map(ee),hasMore:l,path:t},e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.substring(0,e.lastIndexOf("."))}function ie(e,n,t,r){return e.map((function(e){return t(e)===n?r:e}))}function ae(e){return e.meta.id}function ce(e){var n=e.forceRefresh,t=e.playlistId,i=T(),a=F(),c=a.dbx,o=a.isAuthenticated,s=U().fetchUsers,l=Object(r.useState)(!1),u=Object(f.a)(l,2),d=u[0],p=u[1],b=Object(r.useState)(!1),O=Object(f.a)(b,2),x=O[0],v=O[1],m=Object(r.useState)({}),y=Object(f.a)(m,2),k=y[0],w=y[1],S=i.getValue("playlists")||[],C=t&&Array.isArray(S)?S.find((function(e){return e.meta.id===t})):null;function P(){return P=Object(h.a)(j.a.mark((function e(n,t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(c,t,n);case 2:return r=e.sent,D({data:t,meta:r},!0),e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function E(){return E=Object(h.a)(j.a.mark((function e(n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.next=5,c.filesDelete({path:n.meta.path_lower});case 5:t=S.filter((function(e){return e.meta.id!==n.meta.id})),i.setValue("playlists",t),p(!1);case 8:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function I(){return I=Object(h.a)(j.a.mark((function e(n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),D(n),e.next=4,J(c,n.data,n.meta.path_lower);case 4:t=e.sent,D(Object(g.a)(Object(g.a)({},n),{},{meta:t})),v(!1);case 7:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.sort((function(e,n){return e.data.title.localeCompare(n.data.title)}));i.setValue("playlists",n)}function D(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?[].concat(Object(H.a)(S),[e]):ie(S,ae(e),ae,e);A(t)}return Object(r.useEffect)((function(){if(o&&c&&!d&&(n||0===S.length)){var e=function(){var e=Object(h.a)(j.a.mark((function e(){var n,t,r,i,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.filesSearch({path:"",query:".mix"});case 2:return t=e.sent,e.next=5,Promise.all(null===t||void 0===t||null===(n=t.result)||void 0===n?void 0:n.matches.map((function(e){return c.filesDownload({path:e.metadata.path_display})})));case 5:return r=e.sent,e.next=8,Promise.all(r.map((function(e){return new Promise((function(n){var t=new FileReader;t.addEventListener("loadend",(function(t){try{var r=t.srcElement.result,i=JSON.parse(r);n({data:i,meta:e.result})}catch(t){z(t),n(null)}})),t.readAsText(e.result.fileBlob)}))})));case 8:return i=e.sent,a=$(r),e.next=12,s(a);case 12:o=e.sent,A((i||[]).filter(Boolean).map((function(e){return Object(g.a)(Object(g.a)({},e),{},{meta:Object(g.a)(Object(g.a)({},e.meta),{},{user:o[W(e.meta)]})})}))),p(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();p(!0),e()}}),[c,o]),Object(r.useEffect)((function(){var e;function n(){return n=Object(h.a)(j.a.mark((function e(n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:t=e.sent,w(t);case 4:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}if(null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.tracks){var t=$(C.data.tracks);t.length>0&&function(e){n.apply(this,arguments)}(t)}}),[C]),{isLoading:d,isSaving:x,onCreatePlaylist:function(e,n){return P.apply(this,arguments)},onDeletePlaylist:function(e){return E.apply(this,arguments)},onSavePlaylist:function(e){return I.apply(this,arguments)},playlist:C,playlists:S,users:k}}var oe=Object(r.createContext)(),se="loading",le="paused",ue="playing",de="stopped",pe={duration:0,isMuted:!1,playlistId:null,position:0,trackId:null,state:de,volume:1};function be(e,n){switch(n.type){case"duration":case"position":return Object(g.a)(Object(g.a)({},e),n.payload);case"loaded":return"loading"===e.state?Object(g.a)(Object(g.a)({},e),{},{position:0,state:ue}):e;case"mute":return Object(g.a)(Object(g.a)({},e),{},{isMuted:!0});case"pause":return e.state===ue?Object(g.a)(Object(g.a)({},e),{},{state:le}):e;case"play":return Object(g.a)(Object(g.a)(Object(g.a)({},e),n.payload),{},{state:se});case"resume":return Object(g.a)(Object(g.a)({},e),{},{state:ue});case"stop":return Object(g.a)(Object(g.a)({},e),{},{position:0,state:de});case"tick":return Object(g.a)(Object(g.a)({},e),{},{position:e.position+1e3});case"unmute":return Object(g.a)(Object(g.a)({},e),{},{isMuted:!1});case"volume":return Object(g.a)(Object(g.a)(Object(g.a)({},e),n.payload),{},{isMuted:0===n.payload.volume});default:throw new Error}}function je(e){var n,t,i,a=e.children,c=e.initialState,o=void 0===c?{}:c,s=Object(r.useReducer)(be,Object(g.a)(Object(g.a)({},pe),o)),l=Object(f.a)(s,2),u=l[0],d=u.duration,p=u.isMuted,b=u.playlistId,O=u.position,x=u.state,v=u.trackId,m=u.volume,y=l[1],k=Object(r.useRef)(),w=F(),S=w.dbx,C=w.isAuthenticated,z=ce({playlistId:b}),P={setDuration:function(e){var n=e.duration,t=e.position,r=void 0===t?0:t,i=e.playbackRate,a=void 0===i?1:i;V&&"setPositionState"in navigator.mediaSession&&window.navigator.mediaSession.setPositionState({duration:n,position:r,playbackRate:a})},setHandlers:function(e){var n=e.onNext,t=e.onPause,r=e.onPlay,i=e.onPrevious,a=e.onSeek;if(V){try{navigator.mediaSession.setActionHandler("play",r)}catch(c){}try{navigator.mediaSession.setActionHandler("pause",t)}catch(c){}try{navigator.mediaSession.setActionHandler("nexttrack",n)}catch(c){}try{navigator.mediaSession.setActionHandler("previoustrack",i)}catch(c){}try{navigator.mediaSession.setActionHandler("seekbackward",(function(){return a(void 0,!1)}))}catch(c){}try{navigator.mediaSession.setActionHandler("seekforward",(function(){return a(void 0,!0)}))}catch(c){}try{navigator.mediaSession.setActionHandler("seekto",(function(e){var n=e.seekTime;return a(n)}))}catch(c){}}},setState:function(e){V&&(navigator.mediaSession.playbackState=e)},setTrack:function(e){var n=e.album,t=e.artist,r=void 0===t?"Demo Tape":t,i=e.artwork,a=void 0===i?N:i,c=e.title;V&&(navigator.mediaSession.metadata=new MediaMetadata({title:c,artist:r,album:n,artwork:a}))}},A=E("playlistImages"),D=Object(f.a)(A,1)[0],T=void 0===D?{}:D,_=null===z||void 0===z||null===(n=z.playlist)||void 0===n?void 0:n.data,B=(null===_||void 0===_?void 0:_.tracks)||[],L=null===z||void 0===z||null===(t=z.playlist)||void 0===t||null===(i=t.meta)||void 0===i?void 0:i.rev,M=Object(r.useMemo)((function(){var e=v?B.findIndex((function(e){return e.id===v})):_?0:-1,n=e>=0?B[e]:null,t=!!n&&e<B.length-1,r=!!n&&e>0;if(n){var i,a=T[null===_||void 0===_||null===(i=_.image)||void 0===i?void 0:i.id];P.setTrack({title:re(null===n||void 0===n?void 0:n.name),artist:(null===_||void 0===_?void 0:_.artist)||(null===_||void 0===_?void 0:_.title),album:null===_||void 0===_?void 0:_.title,artwork:a?[{src:a,sizes:"50x50",type:"image/png"}]:void 0})}return{hasNext:t,hasPrevious:r,track:n,trackIndex:e}}),[L,v,b]),R=M.hasNext,H=M.hasPrevious,U=M.track,J=M.trackIndex;function K(){R&&y({type:"play",payload:{playlistId:b,trackId:B[J+1].id}})}function G(){H&&y({type:"play",payload:{playlistId:b,trackId:B[J-1].id}})}function W(){x!==le&&y({type:"pause"})}function $(){x===le&&y({type:"resume"})}function q(e,n){if(U){var t=k.current,r=e;void 0===e&&(r=O+(n?1e4:-1e4)),t.currentTime=r/1e3,P.setDuration({duration:d,position:r}),y({type:"position",payload:{position:r}})}}function Q(){x!==de&&y({type:"stop"})}Object(r.useEffect)((function(){function e(){return(e=Object(h.a)(j.a.mark((function e(){var n,t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=k.current)&&C){e.next=3;break}return e.abrupt("return");case 3:if(!U||x!==se){e.next=12;break}return e.next=6,S.filesGetTemporaryLink({path:U.path_lower});case 6:r=e.sent,n.setAttribute("src",null===r||void 0===r||null===(t=r.result)||void 0===t?void 0:t.link),n.play(),P.setState("playing"),e.next=13;break;case 12:U&&x===ue?(n.play(),P.setState("playing")):x===le?(n.pause(),P.setState("paused")):x===de&&(n.pause(),P.setState("none"),n.currentTime=0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x,v,b,C]),Object(r.useEffect)((function(){if("playing"===x){var e=setInterval((function(){y({type:"tick"})}),1e3);return function(){return clearInterval(e)}}})),P.setHandlers({onNext:K,onPrevious:G,onPause:W,onPlay:$,onSeek:q});var X={duration:d,hasNext:R,hasPrevious:H,isMuted:p,onMute:function(){y({type:"mute"});var e=k.current;e&&(e.muted=!0)},onNext:K,onPause:W,onPlay:function(e){var n=e.playlistId,t=e.trackId;y({type:"play",payload:{playlistId:n,trackId:t}})},onPrevious:G,onResume:$,onSeek:q,onStop:Q,onUnmute:function(){y({type:"unmute"});var e=k.current;e&&(e.muted=!1)},onVolumeChange:function(e){y({type:"volume",payload:{volume:e}});var n=k.current;n&&(n.volume=e,n.muted=0===e)},playlist:null===z||void 0===z?void 0:z.playlist,position:O,state:x,track:U,volume:m};return Object(I.jsxs)(oe.Provider,{value:X,children:[a,(U||x!==de)&&Object(I.jsx)("audio",{onDurationChange:function(e){var n=k.current;n&&(P.setDuration({duration:n.duration}),y({type:"duration",payload:{duration:1e3*n.duration}}))},onEnded:function(e){R?K():Q()},onPlay:function(e){y({type:"loaded"})},onProgress:function(e){var n=k.current;n&&y({type:"position",payload:{position:1e3*n.currentTime}})},ref:k})]})}function he(){var e=Object(r.useContext)(oe);if(void 0===e)throw new Error("useAudio must be used within a AudioProvider");return e}function fe(e){var n=e.folder,t=void 0===n?"":n,i=e.showFiles,a=void 0!==i&&i,c=e.showImages,o=void 0!==c&&c,s=e.sortBy,l=void 0===s?"":s,u=e.sortDir,d=void 0===u?"":u,p=F(),b=p.dbx,O=p.isAuthenticated,v=Object(r.useState)({}),m=Object(f.a)(v,2),y=m[0],k=m[1],w=Object(r.useState)(!1),S=Object(f.a)(w,2),C=S[0],z=S[1],P=U().fetchUsers;Object(r.useEffect)((function(){function e(){return(e=Object(h.a)(j.a.mark((function e(){var n,r,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.next=3,ne(b,t,a,o);case 3:return n=e.sent,r=$(n.data),e.next=7,P(r);case 7:i=e.sent,c=Object(g.a)(Object(g.a)({},n),{},{data:n.data.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{user:i[W(e)]})}))}),k(Object(x.a)({},t,c)),z(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b&&O&&function(){e.apply(this,arguments)}()}),[b,t,O]);var E=y[t]||{},I=E.cursor,A=E.data,D=void 0===A?[]:A,T=E.hasMore,_=D;return l&&d&&("name"===l?_=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?e.name.localeCompare(t.name):"folder"===t.type?1:-1)*n}}(d)):"modified"===l?_=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?new Date(t.server_modified)-new Date(e.server_modified):"folder"===t.type?1:-1)*n}}(d)):"modifiedBy"===l&&(_=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){var r,i,a,c;return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?null===(r=e.user)||void 0===r||null===(i=r.name)||void 0===i?void 0:i.display_name.localeCompare(null===(a=t.user)||void 0===a||null===(c=a.name)||void 0===c?void 0:c.display_name):"folder"===t.type?1:-1)*n}}(d)))),{cursor:I,files:_,folder:t,hasMore:T,isLoading:C}}var ge="(min-width: 660px) and (max-width: 1023px)",Oe="(min-width: 1024px)";function xe(){return function(e,n,t){var i=e.map((function(e){return window.matchMedia(e)})),a=function(){var e=i.findIndex((function(e){return e.matches}));return"undefined"!==typeof n[e]?n[e]:t},c=Object(r.useState)(a),o=Object(f.a)(c,2),s=o[0],l=o[1];return Object(r.useEffect)((function(){var e=function(){return l(a)};return i.forEach((function(n){return n.addListener(e)})),function(){return i.forEach((function(n){return n.removeListener(e)}))}}),[]),s}([ge,Oe],["medium","large"],"small")}var ve,me,ye,ke=t(3),we={background:"#242A31",backgroundLight:"#2D323C",disabled:"#656565",error:"#E7777F",inherit:"inherit",primary:"#D2D2D2",secondary:"#b3b3b3",success:"#A1CA7E",transparent:"transparent",white:"#FFFFFF"},Se={color:Object(g.a)(Object(g.a)({},we),{},{highlight:"#5EB1BF",bgHighlight:we.primary+"11"}),typography:{base:Object(s.b)(ve||(ve=Object(ke.a)(["\n      font-size: 16px;\n      line-height: 25px;\n    "]))),sub:Object(s.b)(me||(me=Object(ke.a)(["\n      font-size: 14px;\n      font-weight: 400;\n      lint-height: 20px;\n    "])))},space:{small:5,medium:10,large:20},transition:"all 250ms ease-in"},Ce=s.c.a(ye||(ye=Object(ke.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ",";\n\n  :hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"])),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n  color: ".concat(e.theme.color.disabled,";\n  cursor: unset;\n  border-color: ").concat(e.theme.color.disabled,";\n\n  :hover {\n    background-color: ").concat(e.theme.color.background,";\n    color: ").concat(e.theme.color.disabled,";\n  }\n"):""}));var ze,Pe=function(e){return Object(I.jsx)(Ce,Object(g.a)({as:e.to?o.a:void 0},e))},Ee=s.c.div(ze||(ze=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n"])));var Ie,Ae,De,Te=function(){var e=F(),n=e.isAuthenticated,t=e.onAuth,i=e.parseAcessToken,a=window.location.search.includes("code");return Object(r.useEffect)((function(){!n&&a&&i()}),[a,n,i]),n?Object(I.jsx)(o.b,{noThrow:!0,to:w}):Object(I.jsxs)(Ee,{children:[Object(I.jsx)("h1",{children:"Welcome"}),Object(I.jsx)(r.Fragment,{children:Object(I.jsx)(Pe,{onClick:t,children:"Authenticate With Dropbox"})})]})},_e=s.c.button(Ie||(Ie=Object(ke.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ",";\n\n  :hover,\n  :focus {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"])),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.disabled,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""})),Be=t(183),Le=t.n(Be),Me=s.c.button(Ae||(Ae=Object(ke.a)(["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"])),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight})),Re=function(e){var n=e.name,t=void 0===n?"Home":n,r=e.onClick,i=e.path;return Object(I.jsx)(Me,{onClick:function(){return r(i)},children:t})},Fe=s.c.div(De||(De=Object(ke.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n"])));var Ve,Ne,He,Ue,Je=function(e){var n=e.onClick,t=(e.onSort,e.path),i=(void 0===t?"":t).split("/").map((function(e,t,i){var a=i.slice(0,t+1).join("/");return Object(I.jsxs)(r.Fragment,{children:[0!==t&&Object(I.jsx)("span",{children:"/"}),Object(I.jsx)(Re,{name:e||"Home",onClick:n,path:a})]},t)}));return Object(I.jsxs)(Fe,{children:[Object(I.jsx)(Le.a,{})," ",i]})},Ke=t(198),Ge=t(186),We=t.n(Ge),$e=t(184),qe=t.n($e),Qe=t(185),Xe=t.n(Qe),Ye=s.c.div(Ve||(Ve=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n"]))),Ze=s.c.span(Ne||(Ne=Object(ke.a)(["\n  ","\n"])),(function(e){return e.theme.typography.base})),en=s.c.span(He||(He=Object(ke.a)(["\n  ","\n"])),(function(e){return e.theme.typography.sub})),nn=s.c.button(Ue||(Ue=Object(ke.a)(["\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ","11;\n  }\n"])),(function(e){return e.theme.color[e.isSelected?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isSelected?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary}));var tn,rn,an=function(e){var n,t,r=e.entry,i=e.onClick,a=e.isSelected,c=void 0!==a&&a,o=c?qe.a:r.isFolder?Xe.a:We.a;return Object(I.jsx)(nn,{isSelected:c,onClick:function(){return i(r)},children:Object(I.jsxs)(Ye,{children:[Object(I.jsx)(o,{}),Object(I.jsx)(Ze,{children:r.name}),"file"===r.type&&Object(I.jsxs)(en,{children:[Object(Ke.a)(new Date(r.server_modified))," ago"]}),"file"===r.type&&Object(I.jsx)(en,{children:null===(n=r.user)||void 0===n||null===(t=n.name)||void 0===t?void 0:t.display_name})]})})},cn=function(e,n){return n},on=s.c.div(tn||(tn=Object(ke.a)(["\n  ","\n  color: ",";\n  font-size: 18px;\n  padding: 20px;\n"])),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color.secondary})),sn=s.c.ul(rn||(rn=Object(ke.a)(["\n  list-style-type: none;\n  margin: 0;\n  margin-block-end: 0;\n  margin-block-start: 0;\n  padding: 0;\n  padding-inline-start: 0;\n  -webkit-margin-start: 0;\n  -webkit-padding-start: 0;\n  ","\n"])),(function(e){return(n=e.gap)?"\n        display: grid;\n        grid-gap: ".concat(n,"px;\n      "):"";var n}));function ln(e){var n=e.emptyMessage,t=e.isLoading,r=e.itemRenderer,i=e.items,a=e.gap,c=e.getKey,o=void 0===c?cn:c;if(!t&&0===i.length&&n)return Object(I.jsx)(on,{children:n});var s=i.map((function(e,n){return Object(I.jsx)("li",{children:r(e,n)},o(e,n))}));return Object(I.jsx)(sn,{gap:a,children:s})}ln.defaultProps={getKey:cn};var un,dn,pn=ln,bn=t(354),jn=s.c.div(un||(un=Object(ke.a)(["\n  height: ",";\n  width: ",";\n"])),(function(e){return e.height}),(function(e){return e.width})),hn=s.c.div(dn||(dn=Object(ke.a)(["\n  margin-bottom: -4px;\n"])));var fn,gn=function(e){var n=e.isLoading;return Object(I.jsx)(hn,{children:n?Object(I.jsx)(bn.a,{}):Object(I.jsx)(jn,{height:"4px"})})},On=t(187),xn=t.n(On),vn=t(88),mn=t.n(vn),yn=s.c.button(fn||(fn=Object(ke.a)(["\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"])),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight}));var kn,wn,Sn=function(e){var n=e.children,t=e.onClick,r=e.sortDir,i="asc"===r?mn.a:"desc"===r?xn.a:null;return Object(I.jsxs)(yn,{onClick:t,children:[Object(I.jsx)("span",{children:n}),i&&Object(I.jsx)(i,{})]})},Cn=s.c.div(kn||(kn=Object(ke.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n"]))),zn=s.c.div(wn||(wn=Object(ke.a)(["\n  display: grid;\n"])));var Pn,En,In,An,Dn,Tn=function(e){var n=e.onPathChange,t=e.onSelectionChange,i=e.selectedEntries,a=void 0===i?[]:i,c=e.singleSelection,o=void 0!==c&&c,s=e.showFiles,l=void 0!==s&&s,u=e.showImages,d=void 0!==u&&u,p=Object(r.useState)(""),b=Object(f.a)(p,2),j=b[0],h=b[1],g=Object(r.useState)(""),O=Object(f.a)(g,2),x=O[0],v=O[1],m=Object(r.useState)(""),y=Object(f.a)(m,2),k=y[0],w=y[1],S=fe({folder:j,showFiles:l,showImages:d,sortBy:x,sortDir:k}),C=S.files,z=S.isLoading;function P(e){"folder"===e.type?(h(e.path),n&&n(e.path)):(l||d)&&(o?a.some((function(n){return n.id===e.id}))?t([null]):t([e]):a.some((function(n){return n.id===e.id}))?t(a.filter((function(n){return n.id!==e.id}))):t([].concat(Object(H.a)(a),[e])))}function E(e){e!==x?(v(e),w("desc")):"desc"===k?w("asc"):(w(""),v(""))}return Object(I.jsxs)(zn,{children:[Object(I.jsx)(Je,{onClick:h,path:j}),Object(I.jsx)(jn,{height:"10px"}),Object(I.jsxs)(Cn,{children:[Object(I.jsx)("span",{}),Object(I.jsx)(Sn,{onClick:function(){return E("name")},sortDir:"name"===x?k:null,children:"Name"}),Object(I.jsx)(Sn,{onClick:function(){return E("modified")},sortDir:"modified"===x?k:null,children:"Modified"}),Object(I.jsx)(Sn,{onClick:function(){return E("modifiedBy")},sortDir:"modifiedBy"===x?k:null,children:"Modified By"})]}),Object(I.jsx)(gn,{isLoading:z}),Object(I.jsx)(pn,{emptyMessage:"There are no files here",isLoading:z,items:C,itemRenderer:function(e){return Object(I.jsx)(an,{entry:e,isSelected:a.some((function(n){return n.path_lower===e.path_lower})),onClick:P})}})]})},_n=t(94),Bn=["error","hasError","onChange","title","value"],Ln=Object(s.b)(Pn||(Pn=Object(ke.a)(["\n  border-color: ",";\n  color: ",";\n"])),(function(e){return e.theme.color.error}),(function(e){return e.theme.color.error})),Mn=s.c.span(En||(En=Object(ke.a)(["\n  ","\n  font-size: 14px;\n  font-weight: 700;\n"])),Ln),Rn=s.c.input(In||(In=Object(ke.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n"])),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.primary})),Fn=s.c.div(An||(An=Object(ke.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"])),(function(e){return e.theme.color.background})),Vn=s.c.label(Dn||(Dn=Object(ke.a)(["\n  color: ",";\n  position: relative;\n\n  :focus-within {\n    color: ",";\n  }\n\n  ","\n"])),(function(e){return e.theme.color.secondary}),(function(e){return e.theme.color.white}),(function(e){return e.hasError?Ln:""}));var Nn,Hn,Un,Jn,Kn,Gn,Wn=function(e){var n=e.error,t=e.hasError,r=e.onChange,i=e.title,a=e.value,c=Object(_n.a)(e,Bn);return Object(I.jsxs)(Vn,{hasError:t,children:[Object(I.jsx)(Rn,Object(g.a)(Object(g.a)({},c),{},{hasError:t,onChange:function(e){return r(e.target.value)},type:"text",value:a})),Object(I.jsx)(Fn,{children:i}),n&&Object(I.jsx)(Mn,{children:n})]})},$n=s.c.div(Nn||(Nn=Object(ke.a)(["\n  overflow-y: scroll;\n  height: 470px;\n"]))),qn=s.c.div(Hn||(Hn=Object(ke.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"])),(function(e){return e.theme.color.background})),Qn=s.c.div(Un||(Un=Object(ke.a)(["\n  border: 1px solid ",";\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n"])),(function(e){return e.theme.color.primary})),Xn=s.c.div(Jn||(Jn=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n"]))),Yn=s.c.h2(Kn||(Kn=Object(ke.a)([""]))),Zn=s.c.form(Gn||(Gn=Object(ke.a)(["\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n"])));var et=function(e){var n=e.navigate,t=Object(r.useState)(""),i=Object(f.a)(t,2),a=i[0],c=i[1],o=Object(r.useState)(""),s=Object(f.a)(o,2),l=s[0],u=s[1],d=Object(r.useState)("/"),p=Object(f.a)(d,2),b=p[0],g=p[1],O=ce({}).onCreatePlaylist,x=!!a&&!!l&&!!b;function v(){return(v=Object(h.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O("".concat(b,"/").concat(l,".mix"),{artist:a,title:l,tracks:[]});case 3:return r=e.sent,n(C("/playlist/".concat(r))),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(I.jsxs)(Zn,{onSubmit:x?function(e){return v.apply(this,arguments)}:void 0,children:[Object(I.jsxs)(Xn,{children:[Object(I.jsx)(Yn,{children:"Add Playlist"}),Object(I.jsx)(_e,{disabled:!x,type:"submit",children:"Save"}),Object(I.jsx)(Pe,{to:w,children:"Cancel"})]}),Object(I.jsx)(Wn,{onChange:u,title:"Title",value:l}),Object(I.jsx)(Wn,{onChange:c,title:"Artist",value:a}),Object(I.jsxs)(Qn,{children:[Object(I.jsx)($n,{children:Object(I.jsx)(Tn,{onPathChange:g})}),Object(I.jsx)(qn,{children:"Location"})]})]})},nt={none:"none",fetched:"fetched",error:"error"};var tt,rt,it,at,ct,ot=function(e){var n,t,i,a,c=e.playlist,o=e.size,s=void 0===o?50:o,l=Object(r.useState)(),u=Object(f.a)(l,2),d=u[0],p=u[1],b=Object(r.useState)(nt.none),O=Object(f.a)(b,2),v=O[0],m=O[1],y=F(),k=y.dbx,w=y.isAuthenticated,S=E("playlistImages"),C=Object(f.a)(S,2),z=C[0],P=void 0===z?{}:z,A=C[1],D=null===c||void 0===c||null===(n=c.data)||void 0===n||null===(t=n.image)||void 0===t?void 0:t.id;return Object(r.useEffect)((function(){if(!d||v===nt.error){var e=P[D];v!==nt.error&&e?p(e):function(){n.apply(this,arguments)}()}function n(){return(n=Object(h.a)(j.a.mark((function e(){var n,t,r,i,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.image)){e.next=9;break}return e.next=3,k.filesGetTemporaryLink({path:null===(t=c.data.image)||void 0===t?void 0:t.path_lower});case 3:o=e.sent,p(null===o||void 0===o||null===(r=o.result)||void 0===r?void 0:r.link),A(Object(g.a)(Object(g.a)({},P),{},Object(x.a)({},null===c||void 0===c||null===(i=c.data)||void 0===i||null===(a=i.image)||void 0===a?void 0:a.id,null===o||void 0===o?void 0:o.link))),m(nt.fetched),e.next=11;break;case 9:p(""),m(nt.error);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[D,v,null===c||void 0===c||null===(i=c.meta)||void 0===i?void 0:i.id,w]),w?Object(I.jsx)("img",{alt:null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.title,height:"100%"===s?"auto":s,onError:function(e){d&&nt!==nt.fetched&&m(nt.error)},src:d||"".concat("/dropbox-demo-tape-web","/android-icon-96x96.png"),width:s}):null},st=s.c.div(tt||(tt=Object(ke.a)(["\n  ","\n  color: ",";\n"])),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),lt=s.c.div(rt||(rt=Object(ke.a)(["\n  display: grid;\n"]))),ut=s.c.span(it||(it=Object(ke.a)(["\n  color: ",";\n"])),(function(e){return e.theme.color.primary})),dt=s.c.h1(at||(at=Object(ke.a)(["\n  font-size: ","px;\n"])),(function(e){return"large"===e.size?32:24})),pt=s.c.div(ct||(ct=Object(ke.a)(["\n  display: grid;\n  grid-gap: ","px;\n  grid-template-columns: 50px 1fr;\n"])),(function(e){return"large"===e.size?20:10}));var bt,jt,ht=function(e){var n=e.playlist,t=xe();return Object(I.jsxs)(pt,{size:t,children:[Object(I.jsx)(ot,{playlist:n}),Object(I.jsxs)(lt,{children:[Object(I.jsx)(dt,{size:t,children:n.data.title}),n.data.artist&&Object(I.jsxs)(st,{children:["By ",Object(I.jsx)(ut,{children:n.data.artist})]})]})]})},ft=s.c.div(bt||(bt=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]))),gt=s.c.div(jt||(jt=Object(ke.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ",";\n  padding: 20px;\n"])),(function(e){return"small"===e.size?"1fr":"1fr auto"}));var Ot,xt,vt,mt,yt,kt,wt,St,Ct=function(e){var n=e.playlistId,t=ce({playlistId:n}),i=t.isLoading,a=t.onSavePlaylist,c=t.playlist,s=Object(r.useState)([]),l=Object(f.a)(s,2),u=l[0],d=l[1],p=Object(r.useState)(!1),b=Object(f.a)(p,2),j=b[0],h=b[1],O=Object(o.d)(),x=xe(),v=C("/playlist/".concat(n));return Object(r.useEffect)((function(){var e;d(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.image)}),[i,c]),Object(I.jsxs)("div",{children:[Object(I.jsxs)(gt,{size:x,children:[Object(I.jsx)(ht,{playlist:c}),Object(I.jsxs)(ft,{children:[Object(I.jsx)(_e,{disabled:!j,onClick:function(){a(Object(g.a)(Object(g.a)({},c),{},{data:Object(g.a)(Object(g.a)({},c.data),{},{image:u})})),O(v)},children:"Save"}),Object(I.jsx)(Pe,{to:v,children:"Cancel"})]})]}),Object(I.jsx)(Tn,{onSelectionChange:function(e){var n=Object(f.a)(e,1)[0];d(n),j||h(!0)},selectedEntries:u?[u]:[],showImages:!0})]})},zt=t(92),Pt=Object(s.c)(o.a)(Ot||(Ot=Object(ke.a)(["\n  color: ",";\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight})),Et=s.c.div(xt||(xt=Object(ke.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n"]))),It=s.c.h2(vt||(vt=Object(ke.a)([""]))),At=s.c.div(mt||(mt=Object(ke.a)(["\n  color: ",";\n"])),(function(e){return e.theme.color.disabled})),Dt=s.c.span(yt||(yt=Object(ke.a)(["\n  ","\n  text-align: right;\n"])),(function(e){return e.theme.typography.sub})),Tt=s.c.span(kt||(kt=Object(ke.a)(["\n  ","\n  color: ",";\n"])),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.secondary})),_t=s.c.div(wt||(wt=Object(ke.a)(["\n  ","\n  align-items: center;\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n\n  :hover {\n    background-color: ","11;\n  }\n"])),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary})),Bt=s.c.div(St||(St=Object(ke.a)(["\n  display: grid;\n"])));var Lt=function(){var e=ce({forceRefresh:!0}),n=xe();return Object(I.jsxs)("div",{children:[Object(I.jsx)(Et,{children:Object(I.jsx)(Pe,{to:"new",children:"Add"})}),Object(I.jsx)(gn,{isLoading:e.isLoading}),Object(I.jsx)(pn,{getKey:function(e){return e.meta.id},items:e.playlists,itemRenderer:function(e){var t,r,i=null===(t=e.meta.user)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.display_name;return Object(I.jsx)(Pt,{to:"playlist/".concat(e.meta.id),children:Object(I.jsxs)(_t,{children:[Object(I.jsx)(ot,{playlist:e}),Object(I.jsxs)(Bt,{children:[Object(I.jsx)(It,{children:e.data.title}),Object(I.jsx)(Tt,{children:e.data.artist||e.meta.path_display})]}),"small"!==n&&Object(I.jsxs)(Dt,{children:["Updated"," ",Object(zt.a)(new Date(e.meta.server_modified),new Date),Object(I.jsxs)(At,{children:[Boolean(i)?"by ":"",i]})]})]})})}})]})};var Mt,Rt,Ft,Vt=function(){return Object(I.jsx)(Lt,{})},Nt=t(188),Ht=t.n(Nt),Ut=t(356),Jt=t(357),Kt=s.c.img(Mt||(Mt=Object(ke.a)([""]))),Gt=s.c.span(Rt||(Rt=Object(ke.a)(["\n  font-size: 16px;\n"]))),Wt=s.c.div(Ft||(Ft=Object(ke.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  height: ","px;\n  overflow: hidden;\n  position: relative;\n  width: ","px;\n"])),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.background}),(function(e){return e.size}),(function(e){return e.size}));var $t,qt,Qt,Xt,Yt=function(e){var n=e.initials,t=e.name,i=e.size,a=void 0===i?36:i,c=e.url,o=Object(r.useState)(!1),s=Object(f.a)(o,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){c&&l&&u(!1)}),[c]),Object(I.jsx)(Wt,{size:a,children:c&&!l?Object(I.jsx)(Kt,{alt:t||n,height:a,onError:function(){return u(!0)},src:c,width:a}):Object(I.jsx)(Gt,{children:n})})},Zt=s.c.div($t||($t=Object(ke.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n"]))),er=s.c.h1(qt||(qt=Object(ke.a)(["\n  padding-left: 10px;\n  font-size: ","px;\n"])),(function(e){return"large"===e.size?36:28})),nr=s.c.button(Qt||(Qt=Object(ke.a)(["\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n"]))),tr=s.c.div(Xt||(Xt=Object(ke.a)(["\n  align-items: center;\n  background-color: ",";\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n"])),(function(e){return e.theme.color.backgroundLight}));var rr,ir,ar,cr=function(e){e.location;var n,t,i=Object(r.useState)(null),a=Object(f.a)(i,2),c=a[0],o=a[1],s=F(),l=s.currentUser,u=s.onLogout,d=xe();return Object(I.jsxs)(tr,{children:[Object(I.jsx)(Pt,{to:w,children:Object(I.jsxs)(Zt,{children:[Object(I.jsx)(Ht.a,{fontSize:"large"}),Object(I.jsx)(er,{size:d,children:"Demo Tape"})]})}),Object(I.jsx)("span",{}),l&&Object(I.jsxs)(r.Fragment,{children:[Object(I.jsx)(nr,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},children:Object(I.jsx)(Yt,{initials:null===l||void 0===l||null===(n=l.name)||void 0===n?void 0:n.abbreviated_name,name:null===l||void 0===l||null===(t=l.name)||void 0===t?void 0:t.display_name,url:null===l||void 0===l?void 0:l.profile_photo_url})}),Object(I.jsx)(Ut.a,{elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},id:"user-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:function(){o(null)},children:Object(I.jsx)(Jt.a,{onClick:function(){u()},children:"Logout"})})]})]})},or=t(89),sr=t.n(or),lr=t(56),ur=t.n(lr),dr=t(91),pr=t.n(dr),br=t(90),jr=t.n(br),hr=s.c.button(rr||(rr=Object(ke.a)(["\n  align-items: center;\n  background-color: ",";\n  border: ",";\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  transition: ",";\n  width: ","px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ",";\n  }\n\n  ","\n"])),(function(e){return e.hideBackground?"transparent":e.theme.color.background}),(function(e){return e.hideBorder?"none":"1px solid white"}),(function(e){return e.size||30}),(function(e){return e.theme.transition}),(function(e){return e.size||30}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.transparent,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""}));function fr(e){var n=e/1e3,t=Math.floor(n%60);return gr(Math.floor(n/60))+":"+gr(t)}function gr(e){var n=e.toString();return e<10?"0"+n:n}var Or=s.c.span(ir||(ir=Object(ke.a)(["\n  text-align: right;\n"]))),xr=s.c.div(ar||(ar=Object(ke.a)(["\n  align-items: center;\n  color: ",";\n  display: grid;\n  grid-template-columns: 60px 1fr 60px;\n  grid-gap: 5px;\n"])),(function(e){return e.theme.color[e.isDisabled?"disabled":"primary"]}));var vr,mr,yr,kr,wr=function(){var e=he(),n=Object(r.useState)(0),t=Object(f.a)(n,2),i=t[0],a=t[1],c=Object(r.useState)(!1),o=Object(f.a)(c,2),s=o[0],l=o[1],u=Object(r.useRef)();function d(n){l(!1);var t=parseInt(u.current.value);isNaN(t)||e.onSeek(t)}var p=s?i:e.position;return Object(I.jsxs)(xr,{isDisabled:!e.track,children:[Object(I.jsx)(Or,{children:fr(p)}),Object(I.jsx)("input",{type:"range",disabled:!e.track,min:0,max:e.duration,onChange:function(e){a(u.current.value)},onMouseDown:function(e){l(!0)},onMouseUp:function(e){d()},onTouchEnd:function(e){d()},onTouchStart:function(e){l(!0)},ref:u,value:p}),Object(I.jsx)("span",{children:fr(e.duration)})]})},Sr=s.c.div(vr||(vr=Object(ke.a)(["\n  ","\n  color: ",";\n"])),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.secondary})),Cr=s.c.div(mr||(mr=Object(ke.a)(["\n  display: grid;\n  grid-gap: 2px;\n"]))),zr=s.c.div(yr||(yr=Object(ke.a)(["\n  ","\n  font-weight: 500;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"])),(function(e){return e.theme.typography.base})),Pr=s.c.div(kr||(kr=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 50px 1fr;\n"])));var Er,Ir,Ar,Dr=function(e){var n,t,r=e.playlist,i=e.track;return Object(I.jsxs)(Pr,{children:[Object(I.jsx)(ot,{playlist:r}),Object(I.jsxs)(Cr,{children:[Object(I.jsx)(zr,{children:re(null===i||void 0===i?void 0:i.name)}),Object(I.jsx)(Sr,{children:(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.artist)||(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.title)})]})]})},Tr=t(189),_r=t.n(Tr),Br=t(190),Lr=t.n(Br),Mr=s.c.div(Er||(Er=Object(ke.a)(["\n  cursor: pointer;\n\n  :hover {\n    color: ",";\n  }\n"])),(function(e){return e.theme.color.highlight})),Rr=s.c.input(Ir||(Ir=Object(ke.a)(["\n  width: 100%;\n"]))),Fr=s.c.div(Ar||(Ar=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 20px 1fr;\n  padding: 0 10px;\n"])));var Vr,Nr,Hr,Ur,Jr=function(){var e=he(),n=e.isMuted,t=e.onMute,r=e.onUnmute,i=e.onVolumeChange,a=e.volume,c=0===a||n?_r.a:Lr.a;return Object(I.jsxs)(Fr,{children:[Object(I.jsx)(Mr,{as:c,fontSize:"small",onClick:n?r:t}),Object(I.jsx)(Rr,{max:1,min:0,onChange:function(e){return i(e.currentTarget.value)},step:.01,type:"range",value:n?0:a})]})},Kr=s.c.div(Vr||(Vr=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n"]))),Gr=s.c.div(Nr||(Nr=Object(ke.a)(["\n  display: flex;\n  justify-content: center;\n"]))),Wr=s.c.div(Hr||(Hr=Object(ke.a)(["\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n"]))),$r=s.c.div(Ur||(Ur=Object(ke.a)(["\n  align-items: center;\n  background-color: ",";\n  bottom: 0;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: minmax(200px, 0.5fr) 1fr 150px;\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n"])),(function(e){return e.theme.color.backgroundLight}));var qr,Qr,Xr,Yr,Zr,ei,ni,ti,ri=function(){var e=he(),n=!!e.track,t=e.state===ue,r=e.state===se,i=t?Object(I.jsx)(hr,{"aria-label":"Pause",onClick:e.onPause,size:40,children:Object(I.jsx)(sr.a,{})}):Object(I.jsx)(hr,{"aria-label":"Play",disabled:r||!n,onClick:function(){return e.onResume()},size:40,children:Object(I.jsx)(ur.a,{})});return Object(I.jsxs)($r,{children:[Object(I.jsx)(Dr,{playlist:e.playlist,track:e.track}),Object(I.jsx)(Gr,{children:Object(I.jsxs)(Wr,{children:[Object(I.jsxs)(Kr,{children:[Object(I.jsx)(hr,{"aria-label":"Previous",disabled:!e.hasPrevious,hideBorder:!0,onClick:e.onPrevious,children:Object(I.jsx)(jr.a,{fontSize:"small"})}),i,Object(I.jsx)(hr,{"aria-label":"Next",disabled:!e.hasNext,hideBorder:!0,onClick:e.onNext,children:Object(I.jsx)(pr.a,{fontSize:"small"})})]}),Object(I.jsx)(wr,{})]})}),Object(I.jsx)(Jr,{})]})},ii=s.c.div(qr||(qr=Object(ke.a)(["\n  ","\n  color: ",";\n"])),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),ai=s.c.div(Qr||(Qr=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n"]))),ci=s.c.div(Xr||(Xr=Object(ke.a)(["\n  align-items: center;\n  border-top: ;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: auto 1fr;\n  padding: 10px;\n"]))),oi=s.c.div(Yr||(Yr=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 1fr;\n  padding: 20px;\n"]))),si=s.c.div(Zr||(Zr=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  margin-top: 60px;\n"]))),li=s.c.div(ei||(ei=Object(ke.a)(["\n  display: grid;\n  grid-gap: 10px;\n  text-align: center;\n"]))),ui=s.c.div(ni||(ni=Object(ke.a)(["\n  ","\n  font-weight: 500;\n"])),(function(e){return e.theme.typography.base})),di=s.c.div(ti||(ti=Object(ke.a)(["\n  background-color: ",";\n  bottom: 0;\n  height: ",";\n  position: absolute;\n  width: 100%;\n"])),(function(e){return e.isExpanded?e.theme.color.background:e.theme.color.backgroundLight}),(function(e){return e.isExpanded?"100vh":"auto"}));var pi=function(){var e,n,t,i,a,c,o=r.useState(!1),s=Object(f.a)(o,2),l=s[0],u=s[1],d=he(),p=!!d.track,b=d.state===ue,j=d.state===se;if(!p)return null;var h=l?40:30,g=b?Object(I.jsx)(hr,{"aria-label":"Pause",hideBackground:!l,hideBorder:!l,onClick:d.onPause,size:h+10,children:Object(I.jsx)(sr.a,{})}):Object(I.jsx)(hr,{"aria-label":"Play",disabled:j||!p,hideBackground:!l,hideBorder:!l,onClick:function(){return d.onResume()},size:h+10,children:Object(I.jsx)(ur.a,{fontSize:l?"large":"default"})}),O=l?Object(I.jsxs)(oi,{children:[Object(I.jsxs)(si,{children:[Object(I.jsx)(ui,{children:null===(e=d.playlist)||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.title}),Object(I.jsx)(hr,{"aria-label":"expand",hideBorder:!0,onClick:function(){return u(!1)},children:Object(I.jsx)(mn.a,{fontSize:l?"default":"small"})})]}),Object(I.jsx)(ot,{playlist:d.playlist,size:"100%"}),Object(I.jsxs)(li,{children:[Object(I.jsx)(ui,{children:re(null===(i=d.track)||void 0===i?void 0:i.name)}),Object(I.jsx)(ii,{children:null===(a=d.playlist)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.artist})]}),Object(I.jsx)(wr,{}),Object(I.jsxs)(ai,{children:[Object(I.jsx)(hr,{"aria-label":"Previous",disabled:!d.hasPrevious,hideBorder:!0,onClick:d.onPrevious,size:h,children:Object(I.jsx)(jr.a,{fontSize:"small"})}),g,Object(I.jsx)(hr,{"aria-label":"Next",disabled:!d.hasNext,hideBorder:!0,onClick:d.onNext,size:h,children:Object(I.jsx)(pr.a,{fontSize:l?"default":"small"})})]})]}):Object(I.jsxs)(ci,{children:[g,Object(I.jsx)("div",{onClick:function(){return u(!0)},children:Object(I.jsx)(Dr,{playlist:d.playlist,track:d.track})})]});return Object(I.jsx)(di,{isExpanded:l,children:O})};var bi,ji,hi,fi=function(){return"small"===xe()?Object(I.jsx)(pi,{}):Object(I.jsx)(ri,{})},gi=s.c.main(bi||(bi=Object(ke.a)(["\n  background-color: ",";\n  overflow-y: scroll;\n  padding-bottom: 113px;\n"])),(function(e){return e.theme.color.background})),Oi=s.c.div(ji||(ji=Object(ke.a)(["\n  max-width: 1150px;\n  margin: 0 auto;\n"]))),xi=s.c.div(hi||(hi=Object(ke.a)(["\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n"])));var vi=function(e){var n=e.children,t=e.location;return F().isAuthenticated||t.pathname.includes("/auth")?Object(I.jsxs)(xi,{children:[Object(I.jsx)(cr,{location:t}),Object(I.jsx)(gi,{children:Object(I.jsx)(Oi,{children:n})}),Object(I.jsx)(fi,{})]}):Object(I.jsx)(o.b,{noThrow:!0,to:"auth"})},mi=["message","onClick"];var yi,ki,wi,Si,Ci,zi,Pi=function(e){var n=e.message,t=e.onClick,i=Object(_n.a)(e,mi),a=Object(r.useState)(!1),c=Object(f.a)(a,2),o=c[0],s=c[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){s(!1)}),2e3);return function(){clearTimeout(e)}}),[o]),o?Object(I.jsx)(_e,{onBlur:function(){return s(!1)},onClick:t,children:n||"Are you sure?"}):Object(I.jsx)(_e,Object(g.a)({onClick:function(){s(!0)}},i))},Ei=t(95),Ii=t(195),Ai=t.n(Ii),Di=t(191),Ti=t.n(Di),_i=t(192),Bi=t.n(_i),Li=s.c.div(yi||(yi=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  line-height: 20px;\n  grid-gap: 5px;\n  grid-template-columns: ","px 20px 1fr ",";\n  padding: ","px;\n"])),(function(e){return"small"===e.size?35:40}),(function(e){return"small"===e.size||e.isEditable?"":"auto"}),(function(e){return"small"===e.size?"".concat(e.theme.space.medium,"px ").concat(e.theme.space.small):e.theme.space.medium})),Mi=s.c.span(ki||(ki=Object(ke.a)(["\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 20px;\n  width: 30px;\n"])),(function(e){return e.isPlaying?"white":"transparent"})),Ri=s.c.span(wi||(wi=Object(ke.a)(["\n  color: ",";\n  display: grid;\n  font-size: 11px;\n  line-height: 15px;\n  text-align: right;\n"])),(function(e){return e.theme.color.secondary})),Fi=s.c.span(Si||(Si=Object(ke.a)(["\n  color: ",";\n"])),(function(e){return e.theme.color.disabled})),Vi=s.c.span(Ci||(Ci=Object(ke.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),Ni=s.c.button(zi||(zi=Object(ke.a)(["\n  ","\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ","11;\n\n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n"])),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.color.primary}));var Hi,Ui,Ji=function(e){var n=e.index,t=e.isEditable,r=e.isPlaying,i=e.onClick,a=e.onDelete,c=e.track,o=e.user,s=xe();return Object(I.jsx)(Ni,{isPlaying:r,onClick:t?void 0:function(){return i(c)},children:Object(I.jsxs)(Li,{isEditable:t,size:s,children:[t?Object(I.jsx)(hr,{onClick:function(){return a(c)},children:Object(I.jsx)(Ti.a,{fontSize:"small"})}):Object(I.jsx)(Mi,{id:"play",isPlaying:r,children:r?Object(I.jsx)(Bi.a,{fontSize:"small"}):Object(I.jsx)(ur.a,{fontSize:"small"})}),Object(I.jsxs)("span",{children:[n,"."]}),Object(I.jsx)(Vi,{children:re(c.name)}),"small"!==s&&!t&&Object(I.jsxs)(Ri,{children:[Object(I.jsxs)("span",{children:["Updated"," ",Object(zt.a)(new Date(c.server_modified),new Date)]}),o&&Object(I.jsxs)(Fi,{children:["by ",o.name.display_name]})]})]})})},Ki=s.c.div(Hi||(Hi=Object(ke.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n"])),(function(e){return e.theme.color.primary})),Gi=s.c.div(Ui||(Ui=Object(ke.a)(["\n  position: relative;\n"])));function Wi(e,n){return e.playingId===n.playingId&&e.tracks.map((function(e){return e.id})).join()===n.tracks.map((function(e){return e.id})).join()}var $i=i.a.memo((function(e){var n=e.onTrackClick,t=e.onTrackDelete,r=e.playingId,i=e.tracks;return Object(I.jsx)(pn,{getKey:function(e){return e.id},items:i,itemRenderer:function(e,i){return Object(I.jsx)(Ei.b,{draggableId:e.id,index:i,children:function(a){return Object(I.jsxs)(Gi,Object(g.a)(Object(g.a)({ref:a.innerRef},a.draggableProps),{},{children:[Object(I.jsx)(Ji,{index:i+1,isEditable:!0,isPlaying:r===e.id,onClick:n,onDelete:t,track:e}),Object(I.jsx)(Ki,Object(g.a)(Object(g.a)({},a.dragHandleProps),{},{children:Object(I.jsx)(Ai.a,{})}))]}))}})}})}),Wi);var qi,Qi,Xi,Yi,Zi,ea=function(e){var n=e.isEditing,t=e.onTrackChange,r=e.onTrackClick,i=(e.onTrackDelete,e.playingId),a=e.tracks,c=e.users;function o(e){t(a.filter((function(n){return n.id!==e.id})))}return n?Object(I.jsx)(Ei.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var n=function(e,n,t){var r=Array.from(e),i=r.splice(n,1),a=Object(f.a)(i,1)[0];return r.splice(t,0,a),r}(a,e.source.index,e.destination.index);t(n)}},children:Object(I.jsx)(Ei.c,{droppableId:"tracks",children:function(e){return Object(I.jsxs)("div",Object(g.a)(Object(g.a)({ref:e.innerRef},e.droppableProps),{},{children:[Object(I.jsx)($i,{onTrackClick:r,onTrackDelete:o,playingId:i,tracks:a}),e.placeholder]}))}})}):Object(I.jsx)(pn,{getKey:function(e){return e.id},items:a,itemRenderer:function(e,n){return Object(I.jsx)(Ji,{index:n+1,isPlaying:i===e.id,onClick:r,track:e,user:c[W(e)]})}})},na=s.c.div(qi||(qi=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]))),ta=s.c.div(Qi||(Qi=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: ",";\n  padding: 20px;\n"])),(function(e){return"small"===e.size?"space-between":"flex-start"})),ra=s.c.div(Xi||(Xi=Object(ke.a)(["\n  align-items: ",";\n  display: grid;\n  grid-gap: ","px;\n  grid-template-columns: ",";\n  padding: 20px;\n"])),(function(e){return e.isEditing?"flex-start":"center"}),(function(e){return e.isEditing?40:20}),(function(e){return"small"===e.size?"1fr":"1fr auto"})),ia=s.c.div(Yi||(Yi=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr;\n"]))),aa=s.c.div(Zi||(Zi=Object(ke.a)(["\n  display: grid;\n  grid-gap: 20px;\n"])));var ca,oa,sa=function(e){var n,t=e.navigate,i=e.playlistId,a=ce({playlistId:i}),c=a.isLoading,o=a.onDeletePlaylist,s=a.onSavePlaylist,l=a.playlist,u=a.users,d=Object(r.useState)(!1),p=Object(f.a)(d,2),b=p[0],O=p[1],x=Object(r.useState)(!1),v=Object(f.a)(x,2),m=v[0],y=v[1],k=Object(r.useState)(l),S=Object(f.a)(k,2),C=S[0],z=S[1],P=he(),E=xe();function A(){return(A=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(C);case 2:t(w);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){m?(b&&s(C),O(!1),y(!1)):(y(!0),z(l))}return Object(I.jsxs)("div",{children:[m?Object(I.jsxs)(ra,{isEditing:m,size:E,children:[Object(I.jsxs)(aa,{children:[Object(I.jsxs)(ia,{children:[Object(I.jsx)(ot,{playlist:C}),Object(I.jsx)(Pe,{to:"image",children:"Edit Image"})]}),Object(I.jsx)(Wn,{onChange:function(e){z(Object(g.a)(Object(g.a)({},C),{},{data:Object(g.a)(Object(g.a)({},C.data),{},{title:e})})),O(!0)},title:"Title",value:C.data.title}),Object(I.jsx)(Wn,{onChange:function(e){z(Object(g.a)(Object(g.a)({},C),{},{data:Object(g.a)(Object(g.a)({},C.data),{},{artist:e})})),O(!0)},title:"Artist",value:C.data.artist||""})]}),Object(I.jsx)(na,{children:Object(I.jsxs)(r.Fragment,{children:[Object(I.jsx)(_e,{disabled:!b,onClick:D,children:"Save"}),Object(I.jsx)(_e,{onClick:function(){O(!1),y(!1),z(l)},children:"Cancel"})]})})]}):Object(I.jsxs)(ra,{isEditing:m,size:E,children:[Object(I.jsx)(ht,{playlist:C}),Object(I.jsxs)(na,{children:[Object(I.jsx)(_e,{onClick:D,children:"Edit"}),Object(I.jsx)(Pi,{message:"Really Delete?",onClick:function(){return A.apply(this,arguments)},children:"Delete"})]})]}),m&&Object(I.jsxs)(ta,{size:E,children:[Object(I.jsx)("h2",{children:"Tracks"}),Object(I.jsx)(Pe,{to:"tracks",children:"Add Tracks"})]}),Object(I.jsx)(gn,{isLoading:c}),Object(I.jsx)(ea,{isEditing:m,onTrackChange:function(e){z(Object(g.a)(Object(g.a)({},C),{},{data:Object(g.a)(Object(g.a)({},C.data),{},{tracks:e})})),O(!0)},onTrackClick:function(e){P.onPlay({playlistId:i,trackId:e.id})},playingId:null===(n=P.track)||void 0===n?void 0:n.id,tracks:C.data.tracks,users:u})]})},la=s.c.div(ca||(ca=Object(ke.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]))),ua=s.c.div(oa||(oa=Object(ke.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ",";\n  padding: 20px;\n"])),(function(e){return"small"===e.size?"1fr":"1fr auto"}));var da=function(e){var n=e.playlistId,t=ce({playlistId:n}),i=t.isLoading,a=t.onSavePlaylist,c=t.playlist,s=Object(r.useState)([]),l=Object(f.a)(s,2),u=l[0],d=l[1],p=Object(r.useState)(!1),b=Object(f.a)(p,2),j=b[0],h=b[1],O=Object(o.d)(),x=xe(),v=C("/playlist/".concat(n));return Object(r.useEffect)((function(){var e;d((null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.tracks)||[])}),[i,c]),Object(I.jsxs)("div",{children:[Object(I.jsxs)(ua,{size:x,children:[Object(I.jsx)(ht,{playlist:c}),Object(I.jsxs)(la,{children:[Object(I.jsx)(_e,{disabled:!j,onClick:function(){a(Object(g.a)(Object(g.a)({},c),{},{data:Object(g.a)(Object(g.a)({},c.data),{},{tracks:u})})),O(v)},children:"Save"}),Object(I.jsx)(Pe,{to:v,children:"Cancel"})]})]}),Object(I.jsx)(Tn,{onSelectionChange:function(e){d(e),j||h(!0)},selectedEntries:u,showFiles:!0})]})},pa=Object(l.a)({palette:{primary:p.a}});function ba(){var e=window.location.href.replace("/auth","").replace(/\/$/,"");return"".concat(e,"/auth")}var ja=function(){return Object(I.jsx)(P,{children:Object(I.jsx)(u.a,{theme:pa,children:Object(I.jsx)(s.a,{theme:Se,children:Object(I.jsx)(D,{children:Object(I.jsx)(R,{authUrl:ba(),children:Object(I.jsx)(je,{children:Object(I.jsx)(o.c,{basepath:w,children:Object(I.jsxs)(vi,{path:"/",children:[Object(I.jsx)(Te,{path:"auth"}),Object(I.jsx)(et,{path:"new"}),Object(I.jsx)(sa,{path:"playlist/:playlistId"}),Object(I.jsx)(Ct,{path:"playlist/:playlistId/image"}),Object(I.jsx)(da,{path:"playlist/:playlistId/tracks"}),Object(I.jsx)(Vt,{path:"/"})]})})})})})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(I.jsx)(ja,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[325,1,2]]]);
//# sourceMappingURL=main.11966f35.chunk.js.map