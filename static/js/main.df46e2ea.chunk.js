(this["webpackJsonpdropbox-demo-tape-web"]=this["webpackJsonpdropbox-demo-tape-web"]||[]).push([[0],{81:function(e,n,t){e.exports=t(97)},86:function(e,n,t){},97:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(11),o=t.n(i),c=(t(86),t(20)),u=t(2),l=t(76),s=t(124),d=t(75),f=t.n(d),p=t(9),m=t.n(p),v=t(13),h=t(4),g=t(8),b=t(34),y=t(25);var x=function(e,n){var t=Object(r.useState)((function(){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):n}catch(r){return console.log(r),n}})),a=Object(h.a)(t,2),i=a[0],o=a[1];return[i,function(n){try{var t=n instanceof Function?n(i):n;o(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(r){console.log(r)}}]},j=Object(r.createContext)();function E(e){var n=e.children,t=e.initialState,i=void 0===t?{}:t,o=x("ddt",i),c=Object(h.a)(o,2),u=c[0],l=c[1],s=Object(r.useState)(u),d=Object(h.a)(s,2),f=d[0],p=d[1];Object(r.useEffect)((function(){l(f)}),[f]);var m={getValue:function(e){return f[e]},setValue:function(e,n){p((function(t){return Object(g.a)({},t,Object(y.a)({},e,n))}))},resetCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p((function(){return Object(g.a)({},i,{},e)}))},state:f};return a.a.createElement(j.Provider,{value:m},n)}function O(){var e=Object(r.useContext)(j);if(void 0===e)throw new Error("useCache must be used within a CacheProvider");return e}var k=t(49);var w=function(e){var n=Object.create(null);return"string"!==typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),a=t.length>0?t.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===n[r]?n[r]=a:Array.isArray(n[r])?n[r].push(a):n[r]=[n[r],a]})),n):n},S=r.createContext();function C(e){var n=e.authUrl,t=e.children,a=O(),i=r.useState(a.getValue("currentUser")),o=Object(h.a)(i,2),c=o[0],u=o[1],l=r.useState(null),s=Object(h.a)(l,2),d=s[0],f=s[1],p=r.useState(a.getValue("accessToken")),g=Object(h.a)(p,2),b=g[0],y=g[1],x=r.useState(null),j=Object(h.a)(x,2),E=j[0],C=j[1],P=r.useState(null),I=Object(h.a)(P,2),D=I[0],z=I[1];r.useEffect((function(){var e=new k.Dropbox({accessToken:b,clientId:"ie394xarjsfdxr0"});z(e);var t=e.getAuthenticationUrl(n);t?C(t):f("Invalid Dropbox Id")}),[]),r.useEffect((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.usersGetCurrentAccount();case 2:n=e.sent,u(n),a.setValue("currentUser",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b&&!c&&D&&function(){e.apply(this,arguments)}()}),[b,D]);var A={accessToken:b,authHref:E,currentUser:c,dbx:D,error:d,isAuthenticated:null===D||void 0===D?void 0:D.accessToken,onLogout:function(){y(""),u(null),z(null),a.resetCache({clientId:"ie394xarjsfdxr0"})},parseAcessToken:function(e){var n=w(window.location.hash).access_token;z(new k.Dropbox({accessToken:n,clientId:"ie394xarjsfdxr0"})),a.setValue("accessToken",n),y(n)}};return r.createElement(S.Provider,{value:A},t)}function P(){var e=r.useContext(S);if(void 0===e)throw new Error("useCache must be used within a DropboxContext");return e}var I=function(){var e=O(),n=P(),t=n.dbx,a=n.isAuthenticated,i=Object(r.useState)(!1),o=Object(h.a)(i,2),c=o[0],u=o[1],l=Object(r.useState)(e.getValue("users")||{}),s=Object(h.a)(l,2),d=s[0],f=s[1];function p(){return(p=Object(v.a)(m.a.mark((function e(n){var r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=n.filter((function(e){return!d[e]}))).length>0&&t&&a)){e.next=16;break}return u(!0),e.prev=3,e.next=6,t.usersGetAccountBatch({account_ids:r});case 6:return i=e.sent,b(o=i.reduce((function(e,n){return Object(g.a)({},e,Object(y.a)({},n.account_id,n))}),d)),u(!1),e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:return e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function b(n){f(n),e.setValue("users",n)}return{data:d,isLoading:c,fetchUsers:function(e){return p.apply(this,arguments)}}};function D(e){return e.meta.id}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.substring(0,e.lastIndexOf("."))}function A(e,n,t,r){return e.map((function(e){return t(e)===n?r:e}))}function T(e,n,t){return _.apply(this,arguments)}function _(){return(_=Object(v.a)(m.a.mark((function e(n,t,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filesUpload({autorename:!1,contents:JSON.stringify(t),mode:{".tag":"overwrite"},mute:!0,path:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(".").pop()}function M(e){var n;return null===e||void 0===e?void 0:null===(n=e.sharing_info)||void 0===n?void 0:n.modified_by}function F(e){return Object(b.a)(new Set(e.map(M))).filter(Boolean)}function H(e){return["mp3","m4a","ovw","wav"].includes(L(e))}function B(e){return"folder"===e[".tag"]}function R(e){return B(e)||function(e){return"file"===e[".tag"]}(e)&&H(e.name)}function U(e){return Object(g.a)({},e,{isAudioFile:H(e.name),isFolder:"folder"===e[".tag"],isPlaylist:(n=e.name,"mix"===L(n)),path:e.path_display,type:e[".tag"],user:M(e)});var n}function N(e){return V.apply(this,arguments)}function V(){return(V=Object(v.a)(m.a.mark((function e(n){var t,r,a,i,o,c,u,l=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"",r=l.length>2?l[2]:void 0,e.next=4,n.filesListFolder({path:t});case 4:return a=e.sent,i=a.cursor,o=a.entries,c=a.hasMore,u={cursor:i,data:o.filter(r?R:B).map(U),hasMore:c,path:t},e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){var n=e.forceRefresh,t=O(),a=P(),i=a.dbx,o=a.isAuthenticated,c=Object(r.useState)(!1),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(t.getValue("playlists")||[]),f=Object(h.a)(d,2),p=f[0],y=f[1],x=I().fetchUsers;function j(){return(j=Object(v.a)(m.a.mark((function e(n,t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(i,t,n);case 2:return r=e.sent,S({data:t,meta:r},!0),e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(v.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,i.filesDelete({path:n.meta.path_lower});case 3:r=p.filter((function(e){return e.meta.id!==n.meta.id})),y(r),t.setValue("playlists",r),s(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(n),e.next=3,T(i,n.data,n.meta.path_lower);case 3:t=e.sent,S(Object(g.a)({},n,{meta:t}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.sort((function(e,n){return e.data.title.localeCompare(n.data.title)}));y(n),t.setValue("playlists",n)}function S(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?[].concat(Object(b.a)(p),[e]):A(p,D(e),D,e);w(t)}return Object(r.useEffect)((function(){if(o&&i&&!l&&(n||0===p.length)){var e=function(){var e=Object(v.a)(m.a.mark((function e(){var n,t,r,a,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.filesSearch({path:"",query:".mix"});case 2:return n=e.sent,t=n.matches,e.next=6,Promise.all(t.map((function(e){return i.filesDownload({path:e.metadata.path_display})})));case 6:return r=e.sent,e.next=9,Promise.all(r.map((function(e){return new Promise((function(n){var t=new FileReader;t.addEventListener("loadend",(function(t){var r=t.srcElement.result,a=JSON.parse(r);n({data:a,meta:e})})),t.readAsText(e.fileBlob)}))})));case 9:return a=e.sent,o=F(r),e.next=13,x(o);case 13:c=e.sent,w((a||[]).map((function(e){return Object(g.a)({},e,{meta:Object(g.a)({},e.meta,{user:c[M(e.meta)]})})}))),s(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s(!0),e()}}),[i,o]),{data:p,isLoading:l,onCreatePlaylist:function(e,n){return j.apply(this,arguments)},onDeletePlaylist:function(e){return E.apply(this,arguments)},onSavePlaylist:function(e){return k.apply(this,arguments)}}};var K=function(e){var n=e.playlistId,t=P(),a=t.dbx,i=t.isAuthenticated,o=J({dbx:a,isAuthenticated:i}),c=o.data,u=o.isLoading,l=o.onDeletePlaylist,s=o.onSavePlaylist,d=I().fetchUsers,f=Object(r.useState)({}),p=Object(h.a)(f,2),g=p[0],b=p[1],y=c.find((function(e){return e.meta.id===n}));function x(){return(x=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return",l(y));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e;function n(){return(n=Object(v.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n);case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(null===y||void 0===y?void 0:null===(e=y.data)||void 0===e?void 0:e.tracks){var t=F(y.data.tracks);t.length>0&&function(e){n.apply(this,arguments)}(t)}}),[y]),{data:y,isLoading:u,onDelete:function(){return x.apply(this,arguments)},onSave:function(e){s(e)},users:g}},W="mediaSession"in navigator,G=[{src:"android-icon-96x96.png",sizes:"96x96",type:"image/png"},{src:"android-icon-144x144.png",sizes:"144x144",type:"image/png"},{src:"android-icon-180x180.png",sizes:"180x180",type:"image/png"}];var $=function(){return{setDuration:function(e){var n=e.duration,t=e.position,r=void 0===t?0:t,a=e.playbackRate,i=void 0===a?1:a;W&&"setPositionState"in navigator.mediaSession&&window.navigator.mediaSession.setPositionState({duration:n,position:r,playbackRate:i})},setHandlers:function(e){var n=e.onNext,t=e.onPause,r=e.onPlay,a=e.onPrevious,i=e.onSeek;if(W){try{navigator.mediaSession.setActionHandler("play",r)}catch(o){}try{navigator.mediaSession.setActionHandler("pause",t)}catch(o){}try{navigator.mediaSession.setActionHandler("nexttrack",n)}catch(o){}try{navigator.mediaSession.setActionHandler("previoustrack",a)}catch(o){}try{navigator.mediaSession.setActionHandler("seekbackward",(function(){return i(void 0,!1)}))}catch(o){}try{navigator.mediaSession.setActionHandler("seekforward",(function(){return i(void 0,!0)}))}catch(o){}try{navigator.mediaSession.setActionHandler("seekto",(function(e){var n=e.seekTime;return i(n)}))}catch(o){}}},setState:function(e){W&&(navigator.mediaSession.playbackState=e)},setTrack:function(e){var n=e.album,t=e.artist,r=void 0===t?"Demo Tape":t,a=e.artwork,i=void 0===a?G:a,o=e.title;W&&(navigator.mediaSession.metadata=new MediaMetadata({title:o,artist:r,album:n,artwork:i}))}}},q=Object(r.createContext)(),Q="loading",X="paused",Y="playing",Z="stopped",ee={duration:0,isMuted:!1,playlistId:null,position:0,trackId:null,state:Z,volume:1};function ne(e,n){switch(n.type){case"duration":return Object(g.a)({},e,{},n.payload);case"loaded":return"loading"===e.state?Object(g.a)({},e,{position:0,state:Y}):e;case"mute":return Object(g.a)({},e,{isMuted:!0});case"pause":return e.state===Y?Object(g.a)({},e,{state:X}):e;case"play":return Object(g.a)({},e,{},n.payload,{state:Q});case"position":return Object(g.a)({},e,{},n.payload);case"resume":return Object(g.a)({},e,{state:Y});case"stop":return Object(g.a)({},e,{position:0,state:Z});case"tick":return Object(g.a)({},e,{position:e.position+1e3});case"unmute":return Object(g.a)({},e,{isMuted:!1});case"volume":return Object(g.a)({},e,{},n.payload,{isMuted:0===n.payload.volume});default:throw new Error}}function te(e){var n=e.children,t=e.initialState,i=void 0===t?{}:t,o=Object(r.useReducer)(ne,Object(g.a)({},ee,{},i)),c=Object(h.a)(o,2),u=c[0],l=u.duration,s=u.isMuted,d=u.playlistId,f=u.position,p=u.state,b=u.trackId,y=u.volume,x=c[1],j=Object(r.useRef)(),E=P().dbx,O=K({playlistId:d}),k=$(),w=Object(r.useMemo)((function(){var e,n,t,r,a,i,o,c,u=b?null===O||void 0===O?void 0:null===(e=O.data)||void 0===e?void 0:e.data.tracks.findIndex((function(e){return e.id===b})):(null===O||void 0===O?void 0:null===(n=O.data)||void 0===n?void 0:n.data)?0:-1,l=u>=0?O.data.data.tracks[u]:null,s=!!l&&u<O.data.data.tracks.length-1,d=!!l&&u>0;l&&k.setTrack({title:z(null===l||void 0===l?void 0:l.name),artist:(null===O||void 0===O?void 0:null===(t=O.data)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.artist)||(null===O||void 0===O?void 0:null===(a=O.data)||void 0===a?void 0:null===(i=a.data)||void 0===i?void 0:i.title),album:null===O||void 0===O?void 0:null===(o=O.data)||void 0===o?void 0:null===(c=o.data)||void 0===c?void 0:c.title});return{hasNext:s,hasPrevious:d,track:l,trackIndex:u}}),[b,d]),S=w.hasNext,C=w.hasPrevious,I=w.track,D=w.trackIndex;function A(){S&&x({type:"play",payload:{playlistId:d,trackId:O.data.data.tracks[D+1].id}})}function T(){C&&x({type:"play",payload:{playlistId:d,trackId:O.data.data.tracks[D-1].id}})}function _(){p!==X&&x({type:"pause"})}function L(){p===X&&x({type:"resume"})}function M(e,n){if(I){var t=j.current,r=e;void 0===e&&(r=f+(n?1e4:-1e4)),t.currentTime=r/1e3,k.setDuration({duration:l,position:r}),x({type:"position",payload:{position:r}})}}function F(){p!==Z&&x({type:"stop"})}Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=j.current){e.next=3;break}return e.abrupt("return");case 3:if(!I||p!==Q){e.next=12;break}return e.next=6,E.filesGetTemporaryLink({path:I.path_lower});case 6:t=e.sent,n.setAttribute("src",t.link),n.play(),k.setState("playing"),e.next=13;break;case 12:I&&p===Y?(n.play(),k.setState("playing")):p===X?(n.pause(),k.setState("paused")):p===Z&&(n.pause(),k.setState("none"),n.currentTime=0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p,b,d]),Object(r.useEffect)((function(){if("playing"===p){var e=setInterval((function(){x({type:"tick"})}),1e3);return function(){return clearInterval(e)}}})),k.setHandlers({onNext:A,onPrevious:T,onPause:_,onPlay:L,onSeek:M});var H={duration:l,hasNext:S,hasPrevious:C,isMuted:s,onMute:function(){x({type:"mute"});var e=j.current;e&&(e.muted=!0)},onNext:A,onPause:_,onPlay:function(e){var n=e.playlistId,t=e.trackId;x({type:"play",payload:{playlistId:n,trackId:t}})},onPrevious:T,onResume:L,onSeek:M,onStop:F,onUnmute:function(){x({type:"unmute"});var e=j.current;e&&(e.muted=!1)},onVolumeChange:function(e){x({type:"volume",payload:{volume:e}});var n=j.current;n&&(n.volume=e,n.muted=0===e)},playlist:O,position:f,state:p,track:I,volume:y};return a.a.createElement(q.Provider,{value:H},n,(I||p!==Z)&&a.a.createElement("audio",{onDurationChange:function(e){var n=j.current;n&&(k.setDuration({duration:n.duration}),x({type:"duration",payload:{duration:1e3*n.duration}}))},onEnded:function(e){S?A():F()},onPlay:function(e){x({type:"loaded"})},onProgress:function(e){var n=j.current;n&&x({type:"position",payload:{position:1e3*n.currentTime}})},ref:j}))}function re(){var e=Object(r.useContext)(q);if(void 0===e)throw new Error("useAudio must be used within a AudioProvider");return e}var ae="/dropbox-demo-tape-web";function ie(e){return"".concat(ae).concat(e)}var oe=t(3);function ce(){var e=Object(oe.a)(["\n      font-size: 14px;\n      font-weight: 400;\n    "]);return ce=function(){return e},e}function ue(){var e=Object(oe.a)(["\n      font-size: 16px;\n    "]);return ue=function(){return e},e}var le={background:"#242A31",backgroundLight:"#2D323C",disabled:"#656565",error:"#E7777F",inherit:"inherit",primary:"#D2D2D2",secondary:"#b3b3b3",success:"#A1CA7E",transparent:"transparent",white:"#FFFFFF"},se={color:Object(g.a)({},le,{highlight:"#5EB1BF",bgHighlight:le.primary+"11"}),typography:{base:Object(u.b)(ue()),sub:Object(u.b)(ce())},space:{small:5,medium:10,large:20},transition:"all 250ms ease-in"};function de(){var e=Object(oe.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ",";\n\n  :hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return de=function(){return e},e}var fe=u.c.a(de(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n  color: ".concat(e.theme.color.disabled,";\n  cursor: unset;\n  border-color: ").concat(e.theme.color.disabled,";\n\n  :hover {\n    background-color: ").concat(e.theme.color.background,";\n    color: ").concat(e.theme.color.disabled,";\n  }\n"):""}));var pe=function(e){return a.a.createElement(fe,Object.assign({as:e.to?c.a:void 0},e))};function me(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n"]);return me=function(){return e},e}var ve=u.c.div(me());var he=function(){var e=P(),n=e.authHref,t=e.isAuthenticated,i=e.parseAcessToken;return!t&&window.location.hash.includes("access_token")&&i(),t?a.a.createElement(c.b,{noThrow:!0,to:ae}):a.a.createElement(ve,null,a.a.createElement("h1",null,"Welcome"),a.a.createElement(r.Fragment,null,a.a.createElement(pe,{href:n},"Authenticate With Dropbox")))};function ge(){var e=Object(oe.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ",";\n\n  :hover,\n  :focus {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return ge=function(){return e},e}var be=u.c.button(ge(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.white}),(function(e){return e.theme.transition}),(function(e){return e.theme.color.white}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.disabled,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""})),ye=t(59),xe=t.n(ye);function je(){var e=Object(oe.a)(["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return je=function(){return e},e}var Ee=u.c.button(je(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight})),Oe=function(e){var n=e.name,t=void 0===n?"Home":n,r=e.onClick,i=e.path;return a.a.createElement(Ee,{onClick:function(){return r(i)}},t)};function ke(){var e=Object(oe.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n"]);return ke=function(){return e},e}var we=u.c.div(ke());var Se=function(e){var n=e.onClick,t=(e.onSort,e.path),i=(void 0===t?"":t).split("/").map((function(e,t,i){var o=i.slice(0,t+1).join("/");return a.a.createElement(r.Fragment,{key:t},0!==t&&a.a.createElement("span",null,"/"),a.a.createElement(Oe,{name:e||"Home",onClick:n,path:o}))}));return a.a.createElement(we,null,a.a.createElement(xe.a,null)," ",i)},Ce=t(77),Pe=t(62),Ie=t.n(Pe),De=t(60),ze=t.n(De),Ae=t(61),Te=t.n(Ae);function _e(){var e=Object(oe.a)(["\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return _e=function(){return e},e}function Le(){var e=Object(oe.a)(["\n  ","\n"]);return Le=function(){return e},e}function Me(){var e=Object(oe.a)(["\n  ","\n"]);return Me=function(){return e},e}function Fe(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n"]);return Fe=function(){return e},e}var He=u.c.div(Fe()),Be=u.c.span(Me(),(function(e){return e.theme.typography.base})),Re=u.c.span(Le(),(function(e){return e.theme.typography.sub})),Ue=u.c.button(_e(),(function(e){return e.theme.color[e.isSelected?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isSelected?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary}));var Ne=function(e){var n,t,r=e.entry,i=e.onClick,o=e.isSelected,c=void 0!==o&&o,u=c?ze.a:r.isFolder?Te.a:Ie.a;return a.a.createElement(Ue,{isSelected:c,onClick:function(){return i(r)}},a.a.createElement(He,null,a.a.createElement(u,null),a.a.createElement(Be,null,r.name),"file"===r.type&&a.a.createElement(Re,null,Object(Ce.a)(new Date(r.server_modified))," ago"),"file"===r.type&&a.a.createElement(Re,null,null===(n=r.user)||void 0===n?void 0:null===(t=n.name)||void 0===t?void 0:t.display_name)))};function Ve(){var e=Object(oe.a)(["\n  liststyletype: none;\n  margin: 0;\n  marginblockend: 0;\n  marginblockstart: 0;\n  padding: 0;\n  paddinginlinestart: 0;\n  webkitmarginafter: 0;\n  webkitmarginbefore: 0;\n  webkitpaddingstart: 0;\n  ","\n"]);return Ve=function(){return e},e}function Je(){var e=Object(oe.a)(["\n  ","\n  color: ",";\n  font-size: 18px;\n  padding: 20px;\n"]);return Je=function(){return e},e}var Ke=function(e,n){return n},We=u.c.div(Je(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color.secondary})),Ge=u.c.ul(Ve(),(function(e){return(n=e.gap)?"\n        display: grid;\n        grid-gap: ".concat(n,"px;\n      "):"";var n}));function $e(e){var n=e.emptyMessage,t=e.isLoading,r=e.itemRenderer,i=e.items,o=e.gap,c=e.getKey,u=void 0===c?Ke:c;if(!t&&0===i.length&&n)return a.a.createElement(We,null,n);var l=i.map((function(e,n){return a.a.createElement("li",{key:u(e,n)},r(e,n))}));return a.a.createElement(Ge,{gap:o},l)}$e.defaultProps={getKey:Ke};var qe=$e,Qe=t(123);function Xe(){var e=Object(oe.a)(["\n  height: ",";\n  width: ",";\n"]);return Xe=function(){return e},e}var Ye=u.c.div(Xe(),(function(e){return e.height}),(function(e){return e.width}));function Ze(){var e=Object(oe.a)(["\n  margin-bottom: -4px;\n"]);return Ze=function(){return e},e}var en=u.c.div(Ze());var nn=function(e){var n=e.isLoading;return a.a.createElement(en,null,n?a.a.createElement(Qe.a,null):a.a.createElement(Ye,{height:"4px"}))},tn=t(64),rn=t.n(tn),an=t(63),on=t.n(an);function cn(){var e=Object(oe.a)(["\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return cn=function(){return e},e}var un=u.c.button(cn(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight}));var ln=function(e){var n=e.children,t=e.onClick,r=e.sortDir,i="asc"===r?on.a:"desc"===r?rn.a:null;return a.a.createElement(un,{onClick:t},a.a.createElement("span",null,n),i&&a.a.createElement(i,null))};var sn=function(e){var n=e.folder,t=void 0===n?"":n,a=e.showFiles,i=void 0!==a&&a,o=e.sortBy,c=void 0===o?"":o,u=e.sortDir,l=void 0===u?"":u,s=P().dbx,d=Object(r.useState)({}),f=Object(h.a)(d,2),p=f[0],b=f[1],x=Object(r.useState)(!1),j=Object(h.a)(x,2),E=j[0],O=j[1],k=I().fetchUsers;Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n,r,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,N(s,t,i);case 3:return n=e.sent,r=F(n.data),e.next=7,k(r);case 7:a=e.sent,o=Object(g.a)({},n,{data:n.data.map((function(e){return Object(g.a)({},e,{user:a[M(e)]})}))}),b(Object(y.a)({},t,o)),O(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s&&function(){e.apply(this,arguments)}()}),[s,t]);var w=p[t]||{},S=w.cursor,C=w.data,D=void 0===C?[]:C,z=w.hasMore,A=D;return c&&l&&("name"===c?A=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?e.name.localeCompare(t.name):"folder"===t.type?1:-1)*n}}(l)):"modified"===c?A=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?new Date(t.server_modified)-new Date(e.server_modified):"folder"===t.type?1:-1)*n}}(l)):"modifiedBy"===c&&(A=D.sort(function(e){var n="asc"===e?-1:1;return function(e,t){var r,a,i,o;return(e.type===t.type||"folder"!==e.type&&"folder"!==t.type?null===(r=e.user)||void 0===r?void 0:null===(a=r.name)||void 0===a?void 0:a.display_name.localeCompare(null===(i=t.user)||void 0===i?void 0:null===(o=i.name)||void 0===o?void 0:o.display_name):"folder"===t.type?1:-1)*n}}(l)))),{cursor:S,files:A,folder:t,hasMore:z,isLoading:E}};function dn(){var e=Object(oe.a)(["\n  display: grid;\n"]);return dn=function(){return e},e}function fn(){var e=Object(oe.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n"]);return fn=function(){return e},e}var pn=u.c.div(fn()),mn=u.c.div(dn());var vn=function(e){var n=e.onPathChange,t=e.onSelectionChange,i=e.selectedEntries,o=void 0===i?[]:i,c=e.showFiles,u=void 0!==c&&c,l=Object(r.useState)(""),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(""),m=Object(h.a)(p,2),v=m[0],g=m[1],y=Object(r.useState)(""),x=Object(h.a)(y,2),j=x[0],E=x[1],O=sn({folder:d,showFiles:u,sortBy:v,sortDir:j}),k=O.files,w=O.isLoading;function S(e){"folder"===e.type?(f(e.path),n&&n(e.path)):u&&(o.some((function(n){return n.id===e.id}))?t(o.filter((function(n){return n.id!==e.id}))):t([].concat(Object(b.a)(o),[e])))}function C(e){e!==v?(g(e),E("desc")):"desc"===j?E("asc"):(E(""),g(""))}return a.a.createElement(mn,null,a.a.createElement(Se,{onClick:f,path:d}),a.a.createElement(Ye,{height:"10px"}),a.a.createElement(pn,null,a.a.createElement("span",null),a.a.createElement(ln,{onClick:function(){return C("name")},sortDir:"name"===v?j:null},"Name"),a.a.createElement(ln,{onClick:function(){return C("modified")},sortDir:"modified"===v?j:null},"Modified"),a.a.createElement(ln,{onClick:function(){return C("modifiedBy")},sortDir:"modifiedBy"===v?j:null},"Modified By")),a.a.createElement(nn,{isLoading:w}),a.a.createElement(qe,{emptyMessage:"There are no files here",isLoading:w,items:k,itemRenderer:function(e){return a.a.createElement(Ne,{entry:e,isSelected:o.some((function(n){return n.path_lower===e.path_lower})),onClick:S})}}))},hn=t(46);function gn(){var e=Object(oe.a)(["\n  color: ",";\n  position: relative;\n\n  :focus-within {\n    color: ",";\n  }\n\n  ","\n"]);return gn=function(){return e},e}function bn(){var e=Object(oe.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return bn=function(){return e},e}function yn(){var e=Object(oe.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n"]);return yn=function(){return e},e}function xn(){var e=Object(oe.a)(["\n  ","\n  font-size: 14px;\n  font-weight: 700;\n"]);return xn=function(){return e},e}function jn(){var e=Object(oe.a)(["\n  border-color: ",";\n  color: ",";\n"]);return jn=function(){return e},e}var En=Object(u.b)(jn(),(function(e){return e.theme.color.error}),(function(e){return e.theme.color.error})),On=u.c.span(xn(),En),kn=u.c.input(yn(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.primary})),wn=u.c.div(bn(),(function(e){return e.theme.color.background})),Sn=u.c.label(gn(),(function(e){return e.theme.color.secondary}),(function(e){return e.theme.color.white}),(function(e){return e.hasError?En:""}));var Cn=function(e){var n=e.error,t=e.hasError,r=e.onChange,i=e.title,o=e.value,c=Object(hn.a)(e,["error","hasError","onChange","title","value"]);return a.a.createElement(Sn,{hasError:t},a.a.createElement(kn,Object.assign({},c,{hasError:t,onChange:function(e){return r(e.target.value)},type:"text",value:o})),a.a.createElement(wn,null,i),n&&a.a.createElement(On,null,n))};function Pn(){var e=Object(oe.a)(["\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n"]);return Pn=function(){return e},e}function In(){var e=Object(oe.a)([""]);return In=function(){return e},e}function Dn(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n"]);return Dn=function(){return e},e}function zn(){var e=Object(oe.a)(["\n  border: 1px solid ",";\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n"]);return zn=function(){return e},e}function An(){var e=Object(oe.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return An=function(){return e},e}function Tn(){var e=Object(oe.a)(["\n  overflow-y: scroll;\n  height: 470px;\n"]);return Tn=function(){return e},e}var _n=u.c.div(Tn()),Ln=u.c.div(An(),(function(e){return e.theme.color.background})),Mn=u.c.div(zn(),(function(e){return e.theme.color.primary})),Fn=u.c.div(Dn()),Hn=u.c.h2(In()),Bn=u.c.form(Pn());var Rn=function(e){var n=e.navigate,t=Object(r.useState)(""),i=Object(h.a)(t,2),o=i[0],c=i[1],u=Object(r.useState)(""),l=Object(h.a)(u,2),s=l[0],d=l[1],f=Object(r.useState)("/"),p=Object(h.a)(f,2),g=p[0],b=p[1],y=J({}).onCreatePlaylist,x=!!o&&!!s&&!!g;function j(){return(j=Object(v.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y("".concat(g,"/").concat(s,".mix"),{artist:o,title:s,tracks:[]});case 3:return r=e.sent,n(ie("/playlist/".concat(r))),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(Bn,{onSubmit:x?function(e){return j.apply(this,arguments)}:void 0},a.a.createElement(Fn,null,a.a.createElement(Hn,null,"Add Playlist"),a.a.createElement(be,{disabled:!x,type:"submit"},"Save"),a.a.createElement(pe,{to:ae},"Cancel")),a.a.createElement(Cn,{onChange:d,title:"Title",value:s}),a.a.createElement(Cn,{onChange:c,title:"Artist",value:o}),a.a.createElement(Mn,null,a.a.createElement(_n,null,a.a.createElement(vn,{onPathChange:b})),a.a.createElement(Ln,null,"Location")))},Un=t(44);function Nn(){var e=Object(oe.a)(["\n  color: ",";\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n  }\n"]);return Nn=function(){return e},e}var Vn=Object(u.c)(c.a)(Nn(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.highlight})),Jn="(min-width: 660px) and (max-width: 1023px)",Kn="(min-width: 1024px)";var Wn=function(){return function(e,n,t){var a=e.map((function(e){return window.matchMedia(e)})),i=function(){var e=a.findIndex((function(e){return e.matches}));return"undefined"!==typeof n[e]?n[e]:t},o=Object(r.useState)(i),c=Object(h.a)(o,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var e=function(){return l(i)};return a.forEach((function(n){return n.addListener(e)})),function(){return a.forEach((function(n){return n.removeListener(e)}))}}),[]),u}([Jn,Kn],["medium","large"],"small")};function Gn(){var e=Object(oe.a)(["\n  display: grid;\n"]);return Gn=function(){return e},e}function $n(){var e=Object(oe.a)(["\n  ","\n  align-items: center;\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return $n=function(){return e},e}function qn(){var e=Object(oe.a)(["\n  ","\n  color: ",";\n"]);return qn=function(){return e},e}function Qn(){var e=Object(oe.a)(["\n  ","\n  text-align: right;\n"]);return Qn=function(){return e},e}function Xn(){var e=Object(oe.a)(["\n  color: ",";\n"]);return Xn=function(){return e},e}function Yn(){var e=Object(oe.a)([""]);return Yn=function(){return e},e}function Zn(){var e=Object(oe.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n"]);return Zn=function(){return e},e}var et=u.c.div(Zn()),nt=u.c.h2(Yn()),tt=u.c.div(Xn(),(function(e){return e.theme.color.disabled})),rt=u.c.span(Qn(),(function(e){return e.theme.typography.sub})),at=u.c.span(qn(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.secondary})),it=u.c.div($n(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.space.medium}),(function(e){return e.theme.space.large}),(function(e){return e.theme.color.primary})),ot=u.c.div(Gn());var ct=function(){var e=J({forceRefresh:!0}),n=Wn();return a.a.createElement("div",null,a.a.createElement(et,null,a.a.createElement(pe,{to:"new"},"Add")),a.a.createElement(nn,{isLoading:e.isLoading}),a.a.createElement(qe,{getKey:function(e){return e.meta.id},items:e.data,itemRenderer:function(e){var t,r,i=null===(t=e.meta.user)||void 0===t?void 0:null===(r=t.name)||void 0===r?void 0:r.display_name;return a.a.createElement(Vn,{to:"playlist/".concat(e.meta.id)},a.a.createElement(it,null,a.a.createElement(ot,null,a.a.createElement(nt,null,e.data.title),a.a.createElement(at,null,e.data.artist||e.meta.path_display)),"small"!==n&&a.a.createElement(rt,null,"Updated"," ",Object(Un.a)(new Date(e.meta.server_modified),new Date),a.a.createElement(tt,null,Boolean(i)?"by ":"",i))))}}))};var ut=function(){return a.a.createElement(ct,null)},lt=t(65),st=t.n(lt),dt=t(125),ft=t(126);function pt(){var e=Object(oe.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  height: ","px;\n  overflow: hidden;\n  position: relative;\n  width: ","px;\n"]);return pt=function(){return e},e}function mt(){var e=Object(oe.a)(["\n  font-size: 16px;\n"]);return mt=function(){return e},e}function vt(){var e=Object(oe.a)([""]);return vt=function(){return e},e}var ht=u.c.img(vt()),gt=u.c.span(mt()),bt=u.c.div(pt(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.background}),(function(e){return e.size}),(function(e){return e.size}));var yt=function(e){var n=e.initials,t=e.name,i=e.size,o=void 0===i?36:i,c=e.url,u=Object(r.useState)(!1),l=Object(h.a)(u,2),s=l[0],d=l[1];return Object(r.useEffect)((function(){c&&s&&d(!1)}),[c]),a.a.createElement(bt,{size:o},c&&!s?a.a.createElement(ht,{alt:t||n,height:o,onError:function(){return d(!0)},src:c,width:o}):a.a.createElement(gt,null,n))};function xt(){var e=Object(oe.a)(["\n  align-items: center;\n  background-color: ",";\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n"]);return xt=function(){return e},e}function jt(){var e=Object(oe.a)(["\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n"]);return jt=function(){return e},e}function Et(){var e=Object(oe.a)(["\n  padding-left: 10px;\n"]);return Et=function(){return e},e}function Ot(){var e=Object(oe.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n"]);return Ot=function(){return e},e}var kt=u.c.div(Ot()),wt=u.c.h1(Et()),St=u.c.button(jt()),Ct=u.c.div(xt(),(function(e){return e.theme.color.backgroundLight}));var Pt=function(e){e.location;var n=Object(r.useState)(null),t=Object(h.a)(n,2),i=t[0],o=t[1],c=P(),u=c.currentUser,l=c.onLogout;return a.a.createElement(Ct,null,a.a.createElement(Vn,{to:ae},a.a.createElement(kt,null,a.a.createElement(st.a,{fontSize:"large"}),a.a.createElement(wt,null,"Demo Tape"))),a.a.createElement("span",null),u&&a.a.createElement(r.Fragment,null,a.a.createElement(St,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},a.a.createElement(yt,{initials:null===u||void 0===u?void 0:u.name.abbreviated_name,name:null===u||void 0===u?void 0:u.name.display_name,url:null===u||void 0===u?void 0:u.profile_photo_url})),a.a.createElement(dt.a,{elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},id:"user-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){o(null)}},a.a.createElement(ft.a,{onClick:function(){l()}},"Logout"))))},It=t(68),Dt=t.n(It),zt=t(43),At=t.n(zt),Tt=t(70),_t=t.n(Tt),Lt=t(69),Mt=t.n(Lt);function Ft(){var e=Object(oe.a)(["\n  background-color: ",";\n  border: ",";\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  transition: ",";\n  width: ","px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ",";\n  }\n\n  ","\n"]);return Ft=function(){return e},e}var Ht=u.c.button(Ft(),(function(e){return e.theme.color.background}),(function(e){return e.hideBorder?"none":"1px solid white"}),(function(e){return e.size||30}),(function(e){return e.theme.transition}),(function(e){return e.size||30}),(function(e){return e.theme.color.background}),(function(e){return e.disabled?"\n    color: ".concat(e.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(e.theme.color.transparent,";\n\n    :hover, :focus {\n      background-color: ").concat(e.theme.color.background,";\n      color: ").concat(e.theme.color.disabled,";\n    }\n  "):""}));function Bt(e){var n=e/1e3,t=Math.floor(n%60);return Rt(Math.floor(n/60))+":"+Rt(t)}function Rt(e){var n=e.toString();return e<10?"0"+n:n}function Ut(){var e=Object(oe.a)(["\n  align-items: center;\n  color: ",";\n  display: grid;\n  grid-template-columns: 80px 1fr 80px;\n  grid-gap: 5px;\n"]);return Ut=function(){return e},e}function Nt(){var e=Object(oe.a)(["\n  text-align: right;\n"]);return Nt=function(){return e},e}var Vt=u.c.span(Nt()),Jt=u.c.div(Ut(),(function(e){return e.theme.color[e.isDisabled?"disabled":"primary"]}));var Kt=function(){var e=re(),n=Object(r.useState)(0),t=Object(h.a)(n,2),i=t[0],o=t[1],c=Object(r.useState)(!1),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useRef)(),f=l?i:e.position;return a.a.createElement(Jt,{isDisabled:!e.track},a.a.createElement(Vt,null,Bt(f)),a.a.createElement("input",{type:"range",disabled:!e.track,min:0,max:e.duration,onChange:function(e){o(d.current.value)},onMouseDown:function(e){s(!0)},onMouseUp:function(n){!function(n){s(!1);var t=parseInt(d.current.value);isNaN(t)||e.onSeek(t)}()},ref:d,value:f}),a.a.createElement("span",null,Bt(e.duration)))};function Wt(){var e=Object(oe.a)(["\n  display: grid;\n  grid-gap: 2px;\n"]);return Wt=function(){return e},e}function Gt(){var e=Object(oe.a)(["\n  ","\n  font-weight: 500;\n"]);return Gt=function(){return e},e}function $t(){var e=Object(oe.a)(["\n  ","\n  color: ",";\n"]);return $t=function(){return e},e}var qt=u.c.div($t(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),Qt=u.c.div(Gt(),(function(e){return e.theme.typography.base})),Xt=u.c.div(Wt());var Yt=function(e){var n,t,r,i,o=e.playlist,c=e.track;return a.a.createElement(Xt,null,a.a.createElement(Qt,null,z(null===c||void 0===c?void 0:c.name)),a.a.createElement(qt,null,(null===o||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.artist)||(null===o||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.title)))},Zt=t(66),er=t.n(Zt),nr=t(67),tr=t.n(nr);function rr(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 20px 1fr;\n  padding: 0 10px;\n"]);return rr=function(){return e},e}function ar(){var e=Object(oe.a)(["\n  width: 100%;\n"]);return ar=function(){return e},e}function ir(){var e=Object(oe.a)(["\n  cursor: pointer;\n\n  :hover {\n    color: ",";\n  }\n"]);return ir=function(){return e},e}var or=u.c.div(ir(),(function(e){return e.theme.color.highlight})),cr=u.c.input(ar()),ur=u.c.div(rr());var lr=function(){var e=re(),n=e.isMuted,t=e.onMute,r=e.onUnmute,i=e.onVolumeChange,o=e.volume,c=0===o||n?er.a:tr.a;return a.a.createElement(ur,null,a.a.createElement(or,{as:c,fontSize:"small",onClick:n?r:t}),a.a.createElement(cr,{max:1,min:0,onChange:function(e){return i(e.currentTarget.value)},step:.01,type:"range",value:n?0:o}))};function sr(){var e=Object(oe.a)(["\n  align-items: center;\n  background-color: ",";\n  bottom: 0;\n  display: grid;\n  grid-template-columns: ",";\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n"]);return sr=function(){return e},e}function dr(){var e=Object(oe.a)(["\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n"]);return dr=function(){return e},e}function fr(){var e=Object(oe.a)(["\n  display: flex;\n  justify-content: center;\n"]);return fr=function(){return e},e}function pr(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n"]);return pr=function(){return e},e}var mr=u.c.div(pr()),vr=u.c.div(fr()),hr=u.c.div(dr()),gr=u.c.div(sr(),(function(e){return e.theme.color.backgroundLight}),(function(e){return e.isSmall?"60px 1fr":"minmax(200px, 0.5fr) 1fr 150px"}));var br=function(){var e=re(),n=Wn(),t=!!e.track,r=e.state===Y,i=e.state===Q,o="small"===n;if(o&&!t)return null;var c=r?a.a.createElement(Ht,{"aria-label":"Pause",onClick:e.onPause,size:40},a.a.createElement(Dt.a,null)):a.a.createElement(Ht,{"aria-label":"Play",disabled:i||!t,onClick:function(){return e.onResume()},size:40},a.a.createElement(At.a,null));return a.a.createElement(gr,{isSmall:o},o&&c,a.a.createElement(Yt,{playlist:e.playlist,track:e.track}),!o&&a.a.createElement(vr,null,a.a.createElement(hr,null,a.a.createElement(mr,null,a.a.createElement(Ht,{"aria-label":"Previous",disabled:!e.hasPrevious,hideBorder:!0,onClick:e.onPrevious},a.a.createElement(Mt.a,{fontSize:"small"})),c,a.a.createElement(Ht,{"aria-label":"Next",disabled:!e.hasNext,hideBorder:!0,onClick:e.onNext},a.a.createElement(_t.a,{fontSize:"small"}))),a.a.createElement(Kt,null))),!o&&a.a.createElement(lr,null))};function yr(){var e=Object(oe.a)(["\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n"]);return yr=function(){return e},e}function xr(){var e=Object(oe.a)(["\n  background-color: ",";\n  overflow-y: scroll;\n  padding-bottom: 113px;\n"]);return xr=function(){return e},e}var jr=u.c.main(xr(),(function(e){return e.theme.color.background})),Er=u.c.div(yr());var Or=function(e){var n=e.children,t=e.location;return P().isAuthenticated||t.pathname.includes("/auth")?a.a.createElement(Er,null,a.a.createElement(Pt,{location:t}),a.a.createElement(jr,null,n),a.a.createElement(br,null)):a.a.createElement(c.b,{noThrow:!0,to:"auth"})};var kr=function(e){var n=e.message,t=e.onClick,i=Object(hn.a)(e,["message","onClick"]),o=Object(r.useState)(!1),c=Object(h.a)(o,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){l(!1)}),2e3);return function(){clearTimeout(e)}}),[u]),u?a.a.createElement(be,{onBlur:function(){return l(!1)},onClick:t},n||"Are you sure?"):a.a.createElement(be,Object.assign({onClick:function(){l(!0)}},i))};function wr(){var e=Object(oe.a)(["\n  color: ",";\n"]);return wr=function(){return e},e}function Sr(){var e=Object(oe.a)(["\n  display: grid;\n"]);return Sr=function(){return e},e}function Cr(){var e=Object(oe.a)(["\n  ","\n  color: ",";\n"]);return Cr=function(){return e},e}var Pr=u.c.div(Cr(),(function(e){return e.theme.typography.sub}),(function(e){return e.theme.color.disabled})),Ir=u.c.div(Sr()),Dr=u.c.span(wr(),(function(e){return e.theme.color.primary}));var zr=function(e){var n=e.playlist;return a.a.createElement(Ir,null,a.a.createElement("h1",null,n.data.title),n.data.artist&&a.a.createElement(Pr,null,"By ",a.a.createElement(Dr,null,n.data.artist)))},Ar=t(47),Tr=t(74),_r=t.n(Tr),Lr=t(71),Mr=t.n(Lr),Fr=t(72),Hr=t.n(Fr);function Br(){var e=Object(oe.a)(["\n","\nbackground-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n  \n  :hover {\n    background-color: ","11;\n    \n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n"]);return Br=function(){return e},e}function Rr(){var e=Object(oe.a)(["\n  color: ",";\n"]);return Rr=function(){return e},e}function Ur(){var e=Object(oe.a)(["\n  color: ",";\n  display: grid;\n  font-size: 11px;\n  line-height: 15px;\n  text-align: right;\n"]);return Ur=function(){return e},e}function Nr(){var e=Object(oe.a)(["\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 30px;\n  width: 30px;\n"]);return Nr=function(){return e},e}function Vr(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  line-height: 30px;\n  grid-gap: 5px;\n  grid-template-columns: ","px 20px 1fr ",";\n  padding: ","px;\n"]);return Vr=function(){return e},e}var Jr=u.c.div(Vr(),(function(e){return"small"===e.size?35:40}),(function(e){return"small"===e.size||e.isEditable?"":"auto"}),(function(e){return"small"===e.size?"".concat(e.theme.space.medium,"px ").concat(e.theme.space.small):e.theme.space.medium})),Kr=u.c.span(Nr(),(function(e){return e.isPlaying?"white":"transparent"})),Wr=u.c.span(Ur(),(function(e){return e.theme.color.secondary})),Gr=u.c.span(Rr(),(function(e){return e.theme.color.disabled})),$r=u.c.button(Br(),(function(e){return e.theme.typography.base}),(function(e){return e.theme.color[e.isPlaying?"bgHighlight":"background"]}),(function(e){return e.theme.color.bgHighlight}),(function(e){return e.theme.color[e.isPlaying?"highlight":"inherit"]}),(function(e){return e.theme.color.primary}));var qr=function(e){var n=e.index,t=e.isEditable,r=e.isPlaying,i=e.onClick,o=e.onDelete,c=e.track,u=e.user,l=Wn();return a.a.createElement($r,{isPlaying:r,onClick:t?void 0:function(){return i(c)}},a.a.createElement(Jr,{isEditable:t,size:l},t?a.a.createElement(Ht,{onClick:function(){return o(c)}},a.a.createElement(Mr.a,{fontSize:"small"})):a.a.createElement(Kr,{id:"play",isPlaying:r},r?a.a.createElement(Hr.a,{fontSize:"small"}):a.a.createElement(At.a,{fontSize:"small"})),a.a.createElement("span",null,n,"."),a.a.createElement("span",null,z(c.name)),"small"!==l&&!t&&a.a.createElement(Wr,null,a.a.createElement("span",null,"Updated"," ",Object(Un.a)(new Date(c.server_modified),new Date)),u&&a.a.createElement(Gr,null,"by ",u.name.display_name))))};function Qr(){var e=Object(oe.a)(["\n  position: relative;\n"]);return Qr=function(){return e},e}function Xr(){var e=Object(oe.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n"]);return Xr=function(){return e},e}var Yr=u.c.div(Xr(),(function(e){return e.theme.color.primary})),Zr=u.c.div(Qr());var ea=a.a.memo((function(e){var n=e.onTrackClick,t=e.onTrackDelete,r=e.playingId,i=e.tracks;return a.a.createElement(qe,{getKey:function(e){return e.id},items:i,itemRenderer:function(e,i){return a.a.createElement(Ar.b,{draggableId:e.id,index:i},(function(o){return a.a.createElement(Zr,Object.assign({ref:o.innerRef},o.draggableProps),a.a.createElement(qr,{index:i+1,isEditable:!0,isPlaying:r===e.id,onClick:n,onDelete:t,track:e}),a.a.createElement(Yr,o.dragHandleProps,a.a.createElement(_r.a,null)))}))}})}),(function(e,n){return e.playingId===n.playingId&&e.tracks.map((function(e){return e.id})).join()===n.tracks.map((function(e){return e.id})).join()}));var na=function(e){var n=e.isEditing,t=e.onTrackChange,r=e.onTrackClick,i=(e.onTrackDelete,e.playingId),o=e.tracks,c=e.users;function u(e){t(o.filter((function(n){return n.id!==e.id})))}return n?a.a.createElement(Ar.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var n=function(e,n,t){var r=Array.from(e),a=r.splice(n,1),i=Object(h.a)(a,1)[0];return r.splice(t,0,i),r}(o,e.source.index,e.destination.index);t(n)}}},a.a.createElement(Ar.c,{droppableId:"tracks"},(function(e){return a.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),a.a.createElement(ea,{onTrackClick:r,onTrackDelete:u,playingId:i,tracks:o}),e.placeholder)}))):a.a.createElement(qe,{getKey:function(e){return e.id},items:o,itemRenderer:function(e,n){return a.a.createElement(qr,{index:n+1,isPlaying:i===e.id,onClick:r,track:e,user:c[M(e)]})}})};function ta(){var e=Object(oe.a)(["\n  display: grid;\n  grid-gap: 20px;\n"]);return ta=function(){return e},e}function ra(){var e=Object(oe.a)(["\n  align-items: ",";\n  display: grid;\n  grid-gap: ","px;\n  grid-template-columns: ",";\n  padding: 20px;\n"]);return ra=function(){return e},e}function aa(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: ",";\n  padding: 20px;\n"]);return aa=function(){return e},e}function ia(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return ia=function(){return e},e}var oa=u.c.div(ia()),ca=u.c.div(aa(),(function(e){return"small"===e.size?"space-between":"flex-start"})),ua=u.c.div(ra(),(function(e){return e.isEditing?"flex-start":"center"}),(function(e){return e.isEditing?40:20}),(function(e){return"small"===e.size?"1fr":"1fr auto"})),la=u.c.div(ta());var sa=function(e){var n,t=e.navigate,i=e.playlistId,o=K({playlistId:i}),c=o.data,u=o.isLoading,l=o.onDelete,s=o.onSave,d=o.users,f=Object(r.useState)(!1),p=Object(h.a)(f,2),b=p[0],y=p[1],x=Object(r.useState)(!1),j=Object(h.a)(x,2),E=j[0],O=j[1],k=Object(r.useState)(c),w=Object(h.a)(k,2),S=w[0],C=w[1],P=re(),I=Wn();function D(){return(D=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(S);case 2:t(ae);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){E?(b&&s(S),y(!1),O(!1)):(O(!0),C(c))}return a.a.createElement("div",null,E?a.a.createElement(ua,{isEditing:E,size:I},a.a.createElement(la,null,a.a.createElement(Cn,{onChange:function(e){C(Object(g.a)({},S,{data:Object(g.a)({},S.data,{title:e})})),y(!0)},title:"Title",value:S.data.title}),a.a.createElement(Cn,{onChange:function(e){C(Object(g.a)({},S,{data:Object(g.a)({},S.data,{artist:e})})),y(!0)},title:"Artist",value:S.data.artist||""})),a.a.createElement(oa,null,a.a.createElement(r.Fragment,null,a.a.createElement(be,{disabled:!b,onClick:z},"Save"),a.a.createElement(be,{onClick:function(){y(!1),O(!1),C(c)}},"Cancel")))):a.a.createElement(ua,{isEditing:E,size:I},a.a.createElement(zr,{playlist:S}),a.a.createElement(oa,null,a.a.createElement(be,{onClick:z},"Edit"),a.a.createElement(kr,{message:"Really Delete?",onClick:function(){return D.apply(this,arguments)}},"Delete"))),E&&a.a.createElement(ca,{size:I},a.a.createElement("h2",null,"Tracks"),a.a.createElement(pe,{to:"tracks"},"Add Tracks")),a.a.createElement(nn,{isLoading:u}),a.a.createElement(na,{isEditing:E,onTrackChange:function(e){C(Object(g.a)({},S,{data:Object(g.a)({},S.data,{tracks:e})})),y(!0)},onTrackClick:function(e){P.onPlay({playlistId:i,trackId:e.id})},playingId:null===(n=P.track)||void 0===n?void 0:n.id,tracks:S.data.tracks,users:d}))};function da(){var e=Object(oe.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ",";\n  padding: 20px;\n"]);return da=function(){return e},e}function fa(){var e=Object(oe.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return fa=function(){return e},e}var pa=u.c.div(fa()),ma=u.c.div(da(),(function(e){return"small"===e.size?"1fr":"1fr auto"}));var va=function(e){var n=e.playlistId,t=K({playlistId:n}),i=t.data,o=t.isLoading,u=t.onSave,l=Object(r.useState)([]),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(!1),m=Object(h.a)(p,2),v=m[0],b=m[1],y=Object(c.d)(),x=Wn(),j=ie("/playlist/".concat(n));return Object(r.useEffect)((function(){var e;f((null===i||void 0===i?void 0:null===(e=i.data)||void 0===e?void 0:e.tracks)||[])}),[o,i]),a.a.createElement("div",null,a.a.createElement(ma,{size:x},a.a.createElement(zr,{playlist:i}),a.a.createElement(pa,null,a.a.createElement(be,{disabled:!v,onClick:function(){u(Object(g.a)({},i,{data:Object(g.a)({},i.data,{tracks:d})})),y(j)}},"Save"),a.a.createElement(pe,{to:j},"Cancel"))),a.a.createElement(vn,{onSelectionChange:function(e){f(e),v||b(!0)},selectedEntries:d,showFiles:!0}))},ha=Object(l.a)({palette:{primary:f.a}});function ga(){var e=window.location.href.replace("/auth","").replace(/\/$/,"");return"".concat(e,"/auth")}var ba=function(){return a.a.createElement(s.a,{theme:ha},a.a.createElement(u.a,{theme:se},a.a.createElement(E,null,a.a.createElement(C,{authUrl:ga()},a.a.createElement(te,null,a.a.createElement(c.c,{basepath:ae},a.a.createElement(Or,{path:"/"},a.a.createElement(he,{path:"auth"}),a.a.createElement(Rn,{path:"new"}),a.a.createElement(sa,{path:"playlist/:playlistId"}),a.a.createElement(va,{path:"playlist/:playlistId/tracks"}),a.a.createElement(ut,{path:"/"}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ba,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[81,1,2]]]);
//# sourceMappingURL=main.df46e2ea.chunk.js.map