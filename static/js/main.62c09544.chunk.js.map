{"version":3,"sources":["constants.js","hooks/useErrorTracking.js","hooks/useLocalStorage.js","hooks/cacheContext.js","hooks/dropboxContext.js","hooks/useMediaSession.js","hooks/useUsers.js","utils/dropxboxUtils.js","utils/fileUtils.js","utils/listUtils.js","utils/selectors.js","hooks/usePlaylists.js","hooks/audioContext.js","hooks/useFiles.js","hooks/useSize.js","theme.js","components/ButtonLink.js","components/Auth.js","components/Button.js","components/Explorer/Breadcrumb.js","components/Explorer/BreadcrumbTrail.js","components/Explorer/Entry.js","components/List.js","components/Spacer.js","components/Loader.js","components/Explorer/SortableHeader.js","components/Explorer/index.js","components/TextInput.js","components/AddPlaylist.js","components/PlaylistImage.js","components/PlaylistHeader.js","components/ImageExplorer.js","components/Link.js","components/Playlists.js","components/Home.js","components/Avatar.js","components/Main/Header.js","components/IconButton.js","components/Main/Player/utils.js","components/Main/Player/Position.js","components/Main/Player/SongDetails.js","components/Main/Player/Volume.js","components/Main/Player/DesktopPlayer.js","components/Main/Player/MobilePlayer.js","components/Main/Player/Player.js","components/Main/Main.js","components/ConfirmationButton.js","components/Playlist/Track.js","components/Playlist/TrackList.js","components/Playlist/index.js","components/Tracks.js","components/App.js","utils/serviceWorker.js","index.js"],"names":["HOME","ERROR_URL","makeRelativeUrl","url","logError","error","info","data","env","process","toString","JSON","stringify","window","location","href","timestamp","Date","fetch","body","method","console","e","originalError","logginError","ErrorBoundary","this","props","children","React","useLocalStorage","key","initialValue","useState","item","localStorage","getItem","parse","storedValue","setStoredValue","value","valueToStore","Function","setItem","CacheContext","createContext","CacheProvider","initialState","setLocalStorage","state","setState","useEffect","getValue","setValue","currentState","resetCache","stateToLoad","Provider","useCache","context","useContext","undefined","Error","DropboxContext","clientId","dbxAuth","DropboxAuth","REDIRECT_URI","origin","DropboxProvider","authUrl","cache","currentUser","setCurrentUser","setError","dbxRef","Dropbox","isAuthenticated","setIsAuthenticated","accessToken","setAccessToken","refreshToken","setRefreshToken","onAuth","a","getAuthenticationUrl","codeVerifier","getAuthUrl","queryVars","URLSearchParams","search","code","get","setCodeVerifier","getAccessTokenFromCode","token","result","access_token","refresh_token","current","auth","getCurrentUser","usersGetCurrentAccount","res","user","dbx","checkAndRefreshAccessToken","onLogout","onAuthError","parseAcessToken","useDropbox","hasSupport","navigator","defaultArtwork","src","sizes","type","useUsers","isLoading","setIsLoading","users","setUsers","userIds","usersToFetch","filter","userId","length","usersGetAccountBatch","account_ids","results","saveUsers","updatedUsers","reduce","acc","account_id","fetchUsers","uploadFile","path","filesUpload","autorename","contents","mode","mute","getExtension","name","split","pop","getModifiedBy","entry","sharing_info","modified_by","getModifiedUsersFromEntries","entries","Set","map","Boolean","isAudioFile","includes","isFile","isFolder","isAudioFileOrFolder","isImageOrFolder","transformFile","file","isPlaylist","path_display","getFiles","folder","showFiles","showImages","filesListFolder","cursor","hasMore","fileFilter","payload","removeExtension","fileName","substring","lastIndexOf","updateItemInListById","list","id","getId","newItem","l","getPlaylistId","playlist","meta","usePlaylists","forceRefresh","playlistId","isSaving","setIsSaving","playlists","Array","isArray","find","p","savePlaylistLocally","filesDelete","path_lower","updatedPlaylists","savePlaylists","sortedPlaylists","sort","b","title","localeCompare","isNew","updatedList","fetchPlaylists","filesSearch","query","Promise","all","matches","m","filesDownload","metadata","r","resolve","fr","FileReader","addEventListener","text","srcElement","readAsText","fileBlob","rawPlaylists","ids","tracks","getUsers","onCreatePlaylist","onDeletePlaylist","onSavePlaylist","AudioContext","audioStates","defaultState","duration","isMuted","position","trackId","volume","reducer","action","AudioProvider","useReducer","dispatch","audioRef","useRef","media","setDuration","playbackRate","mediaSession","setPositionState","setHandlers","onNext","onPause","onPlay","onPrevious","onSeek","setActionHandler","seekTime","playbackState","setTrack","album","artist","artwork","MediaMetadata","imageMap","rev","useMemo","trackIndex","findIndex","track","hasNext","hasPrevious","imagePath","image","onResume","positionMs","isForward","player","nextPosition","currentTime","onStop","filesGetTemporaryLink","fileLink","setAttribute","link","play","pause","updatePlayer","interval","setInterval","clearInterval","onMute","el","muted","onUnmute","onVolumeChange","vol","onDurationChange","onEnded","onProgress","ref","useAudio","useFiles","sortBy","sortDir","folderFileMap","setFolderFileMap","files","filesWithUsers","f","fetchFiles","sortedData","dir","sortByTypeAndName","server_modified","sortByTypeAndModified","display_name","sortByTypeAndModifiedBy","queries","useSize","values","defaultValue","mediaQueryLists","q","matchMedia","index","mql","handler","forEach","addListener","removeListener","useMedia","color","background","backgroundLight","disabled","inherit","primary","secondary","success","transparent","white","theme","highlight","bgHighlight","typography","base","css","sub","space","small","medium","large","transition","Base","styled","ButtonLink","as","to","Link","Wrapper","div","Auth","hasCode","noThrow","onClick","button","Breadcrumb","Trail","BreadcrumbTrail","onSort","trail","i","pathArray","subPath","slice","join","Inner","Name","span","Subtitle","isSelected","Entry","Icon","CheckBox","Folder","Audiotrack","formatDistanceToNow","getKeyDefault","_item","EmptyMessage","StyledList","ul","gap","List","emptyMessage","itemRenderer","items","getKey","listItems","defaultProps","height","width","Loader","LinearProgress","Spacer","SortableHeader","ExpandMore","ExpandLess","Header","Explorer","onPathChange","onSelectionChange","selectedEntries","singleSelection","setFolder","setSortBy","setSortDir","handleClick","some","handleSort","column","errorStyle","StyledInput","input","Title","label","hasError","TextInput","onChange","target","ExplorerInner","ExplorerTitle","ExplorerWrapper","h2","form","AddPlaylist","navigate","setArtist","setTitle","setPath","canSave","preventDefault","onSubmit","Button","imgState","none","fetched","PlaylistImage","size","setUrl","imageState","setImageState","setImageMap","imageId","mappedImage","getImageUrl","alt","onError","er","Artist","Info","White","h1","PlaylistHeader","Actions","ImageExplorer","selectedImage","setSelectedImage","isDirty","setIsDirty","useNavigate","playlistUrl","Modified","Updated","Path","Playlist","isPlaying","Playlists","modifiedBy","formatRelative","Home","Image","img","Avatar","initials","setHasError","UserMenu","anchorEl","setAnchorEl","fontSize","currentTarget","abbreviated_name","profile_photo_url","Menu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","keepMounted","open","onClose","MenuItem","hideBackground","hideBorder","getMMSSFromMs","millis","totalSeconds","seconds","Math","floor","padWithZero","number","string","LeftTime","isDisabled","Position","audio","seekPosition","setSeekPosition","isSeeking","setIsSeeking","inputRef","handleSeek","parseInt","isNaN","displayPos","min","max","onMouseDown","onMouseUp","onTouchEnd","onTouchStart","TrackName","SongDetails","Input","Volume","IconName","VolumeMute","VolumeUp","step","Buttons","Controls","ControlsInner","DesktopPlayer","hasTrack","playButton","IconButton","Collapsed","Expanded","InfoWrapper","isExpanded","MobilePlayer","setIsExpanded","iconSize","inner","Player","Content","main","Main","pathname","ConfirmationButton","message","isConfirming","setIsConfirming","timeout","setTimeout","clearTimeout","onBlur","isEditable","Play","UpdatedBy","Track","onDelete","DragHandle","TrackWrapper","trackListPropsAreEqual","prev","next","playingId","t","EditableTrackList","memo","onTrackClick","onTrackDelete","draggableId","provided","innerRef","draggableProps","dragHandleProps","TrackList","isEditing","onTrackChange","handleDelete","onDragEnd","destination","source","reordered","startIndex","endIndex","from","splice","removed","reorderList","droppableId","droppableProps","placeholder","Add","ImageEdit","Inputs","savedPlaylist","setIsEditing","setPlaylist","handleToggleEdit","Tracks","selectedTracks","setSelectedTracks","muiTheme","createTheme","palette","blue","replace","App","basepath","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.62c09544.chunk.js","sourcesContent":["export const HOME =\n  process.env.NODE_ENV === \"production\" ? \"/dropbox-demo-tape-web\" : \"/\";\n\nexport const ERROR_URL = \"https://hooks.zapier.com/hooks/catch/3498170/os51faz\";\n\nexport function makeRelativeUrl(url) {\n  if (process.env.NODE_ENV === \"production\") {\n    return `${HOME}${url}`;\n  }\n  return url;\n}\n","import * as React from \"react\";\nimport { ERROR_URL } from \"../constants\";\n\nexport function logError(error, info = {}) {\n  try {\n    const data = {\n      env: process.env.NODE_ENV,\n      error: error.toString(),\n      info: JSON.stringify(info),\n      url: window.location.href,\n      timestamp: new Date(),\n    };\n\n    if (process.env.NODE_ENV === \"production\") {\n      fetch(ERROR_URL, {\n        body: JSON.stringify(data),\n        method: \"POST\",\n      });\n      console.error(\"Error\", data);\n    } else {\n      console.error(\"Error: would have tracked to server\", data);\n    }\n  } catch (e) {\n    console.error(\"Error logging error\", {\n      originalError: error,\n      logginError: e,\n    });\n  }\n}\n\nexport class ErrorBoundary extends React.Component {\n  componentDidCatch(error, info) {\n    logError(error, info);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n","import { useState } from \"react\";\nimport { logError } from \"./useErrorTracking\";\n\nexport function useLocalStorage(key, initialValue) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      logError(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      logError(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n","import React, { createContext, useContext, useEffect, useState } from \"react\";\n\nimport { useLocalStorage } from \"./useLocalStorage\";\n\nconst CacheContext = createContext();\n\nfunction CacheProvider({ children, initialState = {} }) {\n  const [localStorage, setLocalStorage] = useLocalStorage(\"ddt\", initialState);\n  const [state, setState] = useState(localStorage);\n\n  useEffect(() => {\n    setLocalStorage(state);\n    // eslint-disable-next-line\n  }, [state]);\n\n  function getValue(key) {\n    return state[key];\n  }\n\n  function resetCache(stateToLoad = {}) {\n    setState(() => ({ ...initialState, ...stateToLoad }));\n  }\n\n  function setValue(key, value) {\n    setState((currentState) => ({\n      ...currentState,\n      [key]: value,\n    }));\n  }\n\n  const value = {\n    getValue,\n    setValue,\n    resetCache,\n    state,\n  };\n\n  return (\n    <CacheContext.Provider value={value}>{children}</CacheContext.Provider>\n  );\n}\n\nfunction useCache() {\n  const context = useContext(CacheContext);\n  if (context === undefined) {\n    throw new Error(\"useCache must be used within a CacheProvider\");\n  }\n  return context;\n}\n\nexport { CacheProvider, useCache };\n","import * as React from \"react\";\nimport { Dropbox, DropboxAuth } from \"dropbox\";\nimport { useCache } from \"./cacheContext\";\n\nconst DropboxContext = React.createContext();\nconst clientId = \"ie394xarjsfdxr0\";\nconst dbxAuth = new DropboxAuth({ clientId });\nconst REDIRECT_URI = `${window.location.origin}/auth`;\n\nfunction DropboxProvider({ authUrl, children }) {\n  const cache = useCache();\n  const [currentUser, setCurrentUser] = React.useState(null);\n  const [error, setError] = React.useState(null);\n  const dbxRef = React.useRef(new Dropbox({ clientId }));\n  const [isAuthenticated, setIsAuthenticated] = React.useState(false);\n  const [accessToken, setAccessToken] = React.useState(\n    cache.getValue(\"accessToken\")\n  );\n  const [refreshToken, setRefreshToken] = React.useState(\n    cache.getValue(\"refreshToken\")\n  );\n\n  // Gets Auth Href after client id is added\n  const onAuth = React.useCallback(() => {\n    async function getAuthUrl() {\n      const href = await dbxAuth.getAuthenticationUrl(\n        REDIRECT_URI,\n        undefined,\n        \"code\",\n        \"offline\",\n        undefined,\n        undefined,\n        true\n      );\n\n      if (href) {\n        cache.setValue(\"codeVerifier\", dbxAuth.codeVerifier);\n        window.location.href = href;\n      } else {\n        setError(\"Invalid Dropbox Id\");\n      }\n    }\n\n    getAuthUrl();\n    // eslint-disable-next-line\n  }, []);\n\n  // Gets current user's info if we don't have it already\n  React.useEffect(() => {\n    async function getCurrentUser() {\n      try {\n        const res = await dbxRef.current.usersGetCurrentAccount();\n        const user = res?.result;\n        setCurrentUser(user);\n        cache.setValue(\"currentUser\", user);\n        setIsAuthenticated(true);\n      } catch (e) {\n        console.error(\"Error getting user\", e);\n        token();\n      }\n    }\n\n    async function token() {\n      try {\n        dbxAuth.setAccessToken(accessToken);\n        dbxAuth.setRefreshToken(refreshToken);\n        dbxAuth.setCodeVerifier(cache.getValue(\"codeVerifier\"));\n        const dbx = new Dropbox({ auth: dbxAuth });\n        dbxRef.current = dbx;\n\n        await dbxAuth.checkAndRefreshAccessToken();\n\n        getCurrentUser();\n      } catch (e) {\n        console.error(\"Error refreshing token\", e);\n        setError(e);\n      }\n    }\n\n    if (isAuthenticated && !currentUser) {\n      getCurrentUser();\n    } else if (!isAuthenticated && refreshToken) {\n      token();\n    }\n    // eslint-disable-next-line\n  }, [isAuthenticated, refreshToken]);\n\n  function onLogout() {\n    setIsAuthenticated(false);\n    setCurrentUser(null);\n    cache.resetCache({ clientId });\n  }\n\n  async function parseAcessToken() {\n    // Get the access token from the query string\n    const queryVars = new URLSearchParams(window.location.search);\n    const code = queryVars.get(\"code\");\n\n    // This must match the code verifier we made the original auth url with\n    const codeVerifier = cache.getValue(\"codeVerifier\");\n\n    if (!codeVerifier || !code) return;\n\n    dbxAuth.setCodeVerifier(codeVerifier);\n    const token = await dbxAuth.getAccessTokenFromCode(REDIRECT_URI, code);\n\n    dbxAuth.setAccessToken(token.result.access_token);\n    dbxAuth.setRefreshToken(token.result.refresh_token);\n\n    // create a new dropbox token using the access token\n    dbxRef.current = new Dropbox({ auth: dbxAuth });\n\n    // Save the access token in memory and cache\n    cache.setValue(\"accessToken\", token.result.access_token);\n    cache.setValue(\"refreshToken\", token.result.refresh_token);\n    setRefreshToken(refreshToken);\n    setAccessToken(accessToken);\n    setIsAuthenticated(true);\n  }\n\n  function onAuthError(error) {\n    console.error(\"onAuthError\", error);\n    setIsAuthenticated(false);\n  }\n\n  const value = {\n    accessToken,\n    currentUser,\n    dbx: dbxRef.current,\n    error,\n    isAuthenticated,\n    onAuth,\n    onLogout,\n    onAuthError,\n    parseAcessToken,\n  };\n\n  return (\n    <DropboxContext.Provider value={value}>{children}</DropboxContext.Provider>\n  );\n}\n\nfunction useDropbox() {\n  const context = React.useContext(DropboxContext);\n  if (context === undefined) {\n    throw new Error(\"useCache must be used within a DropboxContext\");\n  }\n  return context;\n}\n\nexport { DropboxProvider, useDropbox };\n","const hasSupport = \"mediaSession\" in navigator;\n\nconst defaultArtwork = [\n  {\n    src: `${process.env.PUBLIC_URL}/android-icon-96x96.png`,\n    sizes: \"96x96\",\n    type: \"image/png\",\n  },\n  {\n    src: `${process.env.PUBLIC_URL}/android-icon-144x144.png`,\n    sizes: \"144x144\",\n    type: \"image/png\",\n  },\n  {\n    src: `${process.env.PUBLIC_URL}/android-icon-180x180.png`,\n    sizes: \"180x180\",\n    type: \"image/png\",\n  },\n];\n\nexport function useMediaSession() {\n  function setDuration({ duration, position = 0, playbackRate = 1 }) {\n    if (hasSupport && \"setPositionState\" in navigator.mediaSession) {\n      window.navigator.mediaSession.setPositionState({\n        duration,\n        position,\n        playbackRate,\n      });\n    }\n  }\n\n  function setHandlers({ onNext, onPause, onPlay, onPrevious, onSeek }) {\n    if (hasSupport) {\n      try {\n        navigator.mediaSession.setActionHandler(\"play\", onPlay);\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"pause\", onPause);\n      } catch (e) {}\n\n      try {\n        navigator.mediaSession.setActionHandler(\"nexttrack\", onNext);\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"previoustrack\", onPrevious);\n      } catch (e) {}\n\n      try {\n        navigator.mediaSession.setActionHandler(\"seekbackward\", () =>\n          onSeek(undefined, false)\n        );\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"seekforward\", () =>\n          onSeek(undefined, true)\n        );\n      } catch (e) {}\n      try {\n        navigator.mediaSession.setActionHandler(\"seekto\", ({ seekTime }) =>\n          onSeek(seekTime)\n        );\n      } catch (e) {}\n    }\n  }\n\n  function setTrack({\n    album,\n    artist = \"Demo Tape\",\n    artwork = defaultArtwork,\n    title,\n  }) {\n    if (hasSupport) {\n      // eslint-disable-next-line\n      navigator.mediaSession.metadata = new MediaMetadata({\n        title,\n        artist,\n        album,\n        artwork,\n      });\n    }\n  }\n\n  function setState(state) {\n    if (hasSupport) {\n      navigator.mediaSession.playbackState = state;\n    }\n  }\n\n  return {\n    setDuration,\n    setHandlers,\n    setState,\n    setTrack,\n  };\n}\n","import { useState } from \"react\";\n\nimport { useCache } from \"./cacheContext\";\nimport { useDropbox } from \"./dropboxContext\";\nimport { logError } from \"./useErrorTracking\";\n\nexport function useUsers() {\n  const cache = useCache();\n  const { dbx, isAuthenticated } = useDropbox();\n  const [isLoading, setIsLoading] = useState(false);\n  const [users, setUsers] = useState(cache.getValue(\"users\") || {});\n\n  async function fetchUsers(userIds) {\n    // Filter users down to users we don't already have info on\n    const usersToFetch = userIds.filter((userId) => !users[userId]);\n\n    if (usersToFetch.length > 0 && dbx && isAuthenticated) {\n      setIsLoading(true);\n\n      try {\n        // Get user info of all unknown users\n        const results = await dbx.usersGetAccountBatch({\n          /* eslint-disable camelcase */\n          account_ids: usersToFetch,\n        });\n\n        // Update dictionary\n        const updatedUsers = (results?.result || results).reduce(\n          (acc, user) => ({\n            ...acc,\n            [user.account_id]: user,\n          }),\n          users\n        );\n\n        // Save in cache and in state\n        saveUsers(updatedUsers);\n        setIsLoading(false);\n\n        return updatedUsers;\n      } catch (exception) {\n        logError(exception);\n      }\n    }\n\n    return users;\n  }\n\n  function saveUsers(updatedUsers) {\n    // Save in state and to cache\n    setUsers(updatedUsers);\n    cache.setValue(\"users\", updatedUsers);\n  }\n\n  return {\n    data: users,\n    isLoading,\n    fetchUsers,\n  };\n}\n","/**\n * Upload a file to dropbox\n */\nexport async function uploadFile(dbx, data, path) {\n  // Upload playlist to dropbox (dropbox will return new metadata)\n  const { result } = await dbx.filesUpload({\n    // Do not rename on conflict\n    autorename: false,\n    // File data to upload\n    contents: JSON.stringify(data),\n    // Overwrite previous version of file (if exists)\n    mode: {\n      \".tag\": \"overwrite\",\n    },\n    // Do not notify users of change\n    mute: true,\n    // Path to file in dropbox\n    path,\n  });\n  return result;\n}\n\nasync function getImageUrl(dbx, path) {\n  if (path) {\n    const fileLink = await dbx.filesGetTemporaryLink({\n      path,\n    });\n    return fileLink?.result?.link;\n  }\n}\n\nexport async function getImagePath(dbx, imageId, imagePath, imageMap) {\n  const mappedImage = imageMap[imageId];\n\n  if (mappedImage) {\n    return mappedImage;\n  } else if (imagePath) {\n    const url = await getImageUrl(dbx, imagePath);\n    return url;\n  }\n  return undefined;\n}\n","/**\n * Get extension from file name\n * @param  {String} name File Name\n * @return {String}      Extension\n */\nexport function getExtension(name = \"\") {\n  return name.split(\".\").pop();\n}\n\nexport function getModifiedBy(entry) {\n  return entry?.sharing_info?.modified_by;\n}\n\n/**\n * Get the modified_by user ids from a list of entries\n * @param  {Array<Object>} entries\n * @return {Array<string>} ids\n */\nexport function getModifiedUsersFromEntries(entries) {\n  return [...new Set(entries.map(getModifiedBy))].filter(Boolean);\n}\n\n/**\n * Returns true if file name is an audio file\n * @param  {String}  name File Name\n * @return {Boolean}      isAudioFile\n */\nexport function isAudioFile(name) {\n  return [\"mp3\", \"m4a\", \"ovw\", \"wav\"].includes(getExtension(name));\n}\n\nexport function isImage(name) {\n  return [\"png\", \"jpg\", \"jpeg\"].includes(getExtension(name));\n}\n\nexport function isFile(entry) {\n  return entry[\".tag\"] === \"file\";\n}\n\nexport function isFolder(entry) {\n  return entry[\".tag\"] === \"folder\";\n}\n\nexport function isAudioFileOrFolder(entry) {\n  return isFolder(entry) || (isFile(entry) && isAudioFile(entry.name));\n}\n\nexport function isImageOrFolder(entry) {\n  return isFolder(entry) || (isFile(entry) && isImage(entry.name));\n}\n\n/**\n * Returns true if file name is a demo tape playlist\n * @param  {String}  name File Name\n * @return {Boolean}      is playlist\n */\nexport function isPlaylist(name) {\n  return getExtension(name) === \"mix\";\n}\n\n/**\n * Transform dropbox file object shape to shape usable by client\n * @param  {Object} file File object shape from dropbox\n * @return {Object}      Transformed file object\n */\nexport function transformFile(file) {\n  return {\n    ...file,\n    isAudioFile: isAudioFile(file.name),\n    isFolder: file[\".tag\"] === \"folder\",\n    isPlaylist: isPlaylist(file.name),\n    path: file.path_display,\n    type: file[\".tag\"],\n    user: getModifiedBy(file),\n  };\n}\n\nexport async function getFiles(dbx, folder = \"\", showFiles, showImages) {\n  // Get folder listing\n  const { result } = await dbx.filesListFolder({\n    path: folder,\n  });\n\n  const { cursor, entries, hasMore } = result;\n\n  const fileFilter = showFiles\n    ? isAudioFileOrFolder\n    : showImages\n    ? isImageOrFolder\n    : isFolder;\n\n  const payload = {\n    cursor,\n    data: entries.filter(fileFilter).map(transformFile),\n    hasMore,\n    path: folder,\n  };\n\n  return payload;\n}\n\nexport function removeExtension(fileName = \"\") {\n  return fileName.substring(0, fileName.lastIndexOf(\".\"));\n}\n\nexport function sortByTypeAndName(sortDir) {\n  const dir = sortDir === \"asc\" ? -1 : 1;\n  return function (a, b) {\n    return (\n      (a.type !== b.type && (a.type === \"folder\" || b.type === \"folder\")\n        ? b.type === \"folder\"\n          ? 1\n          : -1\n        : a.name.localeCompare(b.name)) * dir\n    );\n  };\n}\n\nexport function sortByTypeAndModified(sortDir) {\n  const dir = sortDir === \"asc\" ? -1 : 1;\n  return function (a, b) {\n    return (\n      (a.type !== b.type && (a.type === \"folder\" || b.type === \"folder\")\n        ? b.type === \"folder\"\n          ? 1\n          : -1\n        : new Date(b.server_modified) - new Date(a.server_modified)) * dir\n    );\n  };\n}\n\nexport function sortByTypeAndModifiedBy(sortDir) {\n  const dir = sortDir === \"asc\" ? -1 : 1;\n  return function (a, b) {\n    return (\n      (a.type !== b.type && (a.type === \"folder\" || b.type === \"folder\")\n        ? b.type === \"folder\"\n          ? 1\n          : -1\n        : a.user?.name?.display_name.localeCompare(\n            b.user?.name?.display_name\n          )) * dir\n    );\n  };\n}\n","export function reorderList(list, startIndex, endIndex) {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n}\n\nexport function updateItemInListById(list, id, getId, newItem) {\n  return list.map((l) => (getId(l) === id ? newItem : l));\n}\n","export function getPlaylistId(playlist) {\n  return playlist.meta.id;\n}\n","import { useEffect, useState } from \"react\";\n\nimport { useCache } from \"./cacheContext\";\nimport { useDropbox } from \"./dropboxContext\";\nimport { logError } from \"./useErrorTracking\";\nimport { useUsers } from \"./useUsers\";\nimport {\n  getModifiedBy,\n  getModifiedUsersFromEntries,\n  getPlaylistId,\n  updateItemInListById,\n  uploadFile,\n} from \"../utils\";\n\nexport function usePlaylists({ forceRefresh, playlistId }) {\n  const cache = useCache();\n  const { dbx, isAuthenticated } = useDropbox();\n  const { fetchUsers } = useUsers();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [users, setUsers] = useState({});\n\n  // Get from cache so all versions of this hook are n-sync\n  const playlists = cache.getValue(\"playlists\") || [];\n  const playlist =\n    playlistId && Array.isArray(playlists)\n      ? playlists.find((p) => p.meta.id === playlistId)\n      : null;\n\n  useEffect(() => {\n    if (\n      isAuthenticated &&\n      dbx &&\n      !isLoading &&\n      (forceRefresh || playlists.length === 0)\n    ) {\n      setIsLoading(true);\n\n      async function fetchPlaylists() {\n        // Search for playlist files\n        const res = await dbx.filesSearch({\n          path: \"\",\n          query: \".mix\",\n        });\n\n        // Downloaad all files\n        const results = await Promise.all(\n          res?.result?.matches.map((m) =>\n            dbx.filesDownload({\n              path: m.metadata.path_display,\n            })\n          )\n        );\n\n        // Convert blobs to JSON\n        const rawPlaylists = await Promise.all(\n          results.map((r) => {\n            return new Promise((resolve) => {\n              const fr = new FileReader();\n\n              fr.addEventListener(\"loadend\", (e) => {\n                try {\n                  const text = e.srcElement.result;\n                  const data = JSON.parse(text);\n                  resolve({ data, meta: r.result });\n                } catch (e) {\n                  // We hit an error parsing a file so log the error\n                  logError(e);\n                  // and then return null we will filter it out later\n                  resolve(null);\n                }\n              });\n\n              fr.readAsText(r.result.fileBlob);\n            });\n          })\n        );\n\n        // Get all user ids of users who have modified listed files\n        const userIds = getModifiedUsersFromEntries(results);\n        const users = await fetchUsers(userIds);\n\n        const playlistsWithUsers = (rawPlaylists || [])\n          .filter(Boolean)\n          .map((p) => ({\n            ...p,\n            meta: {\n              ...p.meta,\n              user: users[getModifiedBy(p.meta)],\n            },\n          }));\n\n        // Save in cache and in state\n        savePlaylists(playlistsWithUsers);\n        setIsLoading(false);\n      }\n\n      fetchPlaylists();\n    }\n    // eslint-disable-next-line\n  }, [dbx, isAuthenticated]);\n\n  useEffect(() => {\n    async function getUsers(ids) {\n      const users = await fetchUsers(ids);\n      setUsers(users);\n    }\n\n    if (playlist?.data?.tracks) {\n      // Get all user ids of users who have modified listed files\n      const userIds = getModifiedUsersFromEntries(playlist.data.tracks);\n      if (userIds.length > 0) {\n        getUsers(userIds);\n      }\n    }\n    // eslint-disable-next-line\n  }, [playlist]);\n\n  async function onCreatePlaylist(path, playlist) {\n    // update file on dropbox\n    const meta = await uploadFile(dbx, playlist, path);\n\n    // save playlist locally\n    savePlaylistLocally(\n      {\n        data: playlist,\n        meta,\n      },\n      true\n    );\n\n    return meta.id;\n  }\n\n  async function onDeletePlaylist(playlist) {\n    if (!playlist) return;\n\n    setIsLoading(true);\n    // delete file on dropbox\n    await dbx.filesDelete({ path: playlist.meta.path_lower });\n\n    // delete playlist locally\n    const updatedPlaylists = playlists.filter(\n      (p) => p.meta.id !== playlist.meta.id\n    );\n    cache.setValue(\"playlists\", updatedPlaylists);\n    // setPlaylists(updatedPlaylists);\n    setIsLoading(false);\n  }\n\n  async function onSavePlaylist(playlist) {\n    setIsSaving(true);\n    // Optimistic local save\n    savePlaylistLocally(playlist);\n\n    // update file on dropbox\n    const meta = await uploadFile(dbx, playlist.data, playlist.meta.path_lower);\n\n    // update meta locally\n    savePlaylistLocally({\n      ...playlist,\n      meta,\n    });\n    setIsSaving(false);\n  }\n\n  function savePlaylists(updatedPlaylists = []) {\n    // sort by title\n    const sortedPlaylists = updatedPlaylists.sort((a, b) =>\n      a.data.title.localeCompare(b.data.title)\n    );\n\n    // Save in state and to cache\n    cache.setValue(\"playlists\", sortedPlaylists);\n  }\n\n  function savePlaylistLocally(playlist, isNew = false) {\n    const updatedList = isNew\n      ? [...playlists, playlist]\n      : updateItemInListById(\n          playlists,\n          getPlaylistId(playlist),\n          getPlaylistId,\n          playlist\n        );\n\n    savePlaylists(updatedList);\n  }\n\n  return {\n    isLoading,\n    isSaving,\n    onCreatePlaylist,\n    onDeletePlaylist,\n    onSavePlaylist,\n    playlist,\n    playlists,\n    users,\n  };\n}\n","import React, {\n  createContext,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useReducer,\n} from \"react\";\n\nimport { useDropbox } from \"./dropboxContext\";\nimport { useMediaSession } from \"./useMediaSession\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { usePlaylists } from \"./usePlaylists\";\nimport { removeExtension } from \"../utils\";\n\nconst AudioContext = createContext();\n\nexport const audioStates = {\n  loading: \"loading\",\n  paused: \"paused\",\n  playing: \"playing\",\n  stopped: \"stopped\",\n};\n\nconst defaultState = {\n  duration: 0,\n  isMuted: false,\n  playlistId: null,\n  position: 0,\n  trackId: null,\n  state: audioStates.stopped,\n  volume: 1,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"duration\":\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case \"loaded\":\n      if (state.state === \"loading\") {\n        return {\n          ...state,\n          position: 0,\n          state: audioStates.playing,\n        };\n      }\n      return state;\n    case \"mute\":\n      return {\n        ...state,\n        isMuted: true,\n      };\n    case \"pause\":\n      if (state.state === audioStates.playing) {\n        return {\n          ...state,\n          state: audioStates.paused,\n        };\n      }\n      return state;\n    case \"play\":\n      return {\n        ...state,\n        ...action.payload,\n        state: audioStates.loading,\n      };\n    case \"position\":\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case \"resume\":\n      return {\n        ...state,\n        state: audioStates.playing,\n      };\n    case \"stop\":\n      return {\n        ...state,\n        position: 0,\n        state: audioStates.stopped,\n      };\n    case \"tick\":\n      return {\n        ...state,\n        position: state.position + 1000,\n      };\n    case \"unmute\":\n      return {\n        ...state,\n        isMuted: false,\n      };\n    case \"volume\":\n      return {\n        ...state,\n        ...action.payload,\n        isMuted: action.payload.volume === 0,\n      };\n    default:\n      throw new Error();\n  }\n}\n\nfunction AudioProvider({ children, initialState = {} }) {\n  const [\n    { duration, isMuted, playlistId, position, state, trackId, volume },\n    dispatch,\n  ] = useReducer(reducer, {\n    ...defaultState,\n    ...initialState,\n  });\n  const audioRef = useRef();\n  const { dbx, isAuthenticated } = useDropbox();\n  const playlists = usePlaylists({ playlistId });\n  const media = useMediaSession();\n  const [imageMap = {}] = useLocalStorage(\"playlistImages\");\n\n  const playlist = playlists?.playlist?.data;\n  const tracks = playlist?.tracks || [];\n  const rev = playlists?.playlist?.meta?.rev;\n\n  const { hasNext, hasPrevious, track, trackIndex } = useMemo(() => {\n    const trackIndex = trackId\n      ? tracks.findIndex((track) => track.id === trackId)\n      : playlist\n      ? 0\n      : -1;\n    const track = trackIndex >= 0 ? tracks[trackIndex] : null;\n    const hasNext = track ? trackIndex < tracks.length - 1 : false;\n    const hasPrevious = track ? trackIndex > 0 : false;\n\n    if (track) {\n      const imagePath = imageMap[playlist?.image?.id];\n      media.setTrack({\n        title: removeExtension(track?.name),\n        artist: playlist?.artist || playlist?.title,\n        album: playlist?.title,\n        artwork: imagePath\n          ? [\n              {\n                src: imagePath,\n                sizes: \"50x50\",\n                type: \"image/png\",\n              },\n            ]\n          : undefined,\n      });\n    }\n\n    return {\n      hasNext,\n      hasPrevious,\n      track,\n      trackIndex,\n    };\n    // eslint-disable-next-line\n  }, [rev, trackId, playlistId]);\n\n  function handleEnded(e) {\n    if (hasNext) {\n      onNext();\n    } else {\n      onStop();\n    }\n  }\n\n  function handlePlaying(e) {\n    dispatch({\n      type: \"loaded\",\n    });\n  }\n\n  function handleDurationChange(e) {\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    media.setDuration({\n      duration: el.duration,\n    });\n    dispatch({\n      type: \"duration\",\n      payload: {\n        duration: el.duration * 1000,\n      },\n    });\n  }\n\n  function handleProgress(e) {\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    dispatch({\n      type: \"position\",\n      payload: {\n        position: el.currentTime * 1000,\n      },\n    });\n  }\n\n  useEffect(() => {\n    async function updatePlayer() {\n      const player = audioRef.current;\n\n      if (!player || !isAuthenticated) return;\n\n      if (track && state === audioStates.loading) {\n        // This is not a resume so we need to load the file\n        const fileLink = await dbx.filesGetTemporaryLink({\n          path: track.path_lower,\n        });\n        player.setAttribute(\"src\", fileLink?.result?.link);\n\n        player.play();\n        media.setState(\"playing\");\n      } else if (track && state === audioStates.playing) {\n        player.play();\n        media.setState(\"playing\");\n      } else if (state === audioStates.paused) {\n        player.pause();\n        media.setState(\"paused\");\n      } else if (state === audioStates.stopped) {\n        player.pause();\n        media.setState(\"none\");\n        // clear time so we restart at beginning\n        player.currentTime = 0;\n      }\n    }\n\n    updatePlayer();\n    // eslint-disable-next-line\n  }, [state, trackId, playlistId, isAuthenticated]);\n\n  useEffect(() => {\n    if (state === \"playing\") {\n      const interval = setInterval(() => {\n        dispatch({\n          type: \"tick\",\n        });\n      }, 1000);\n\n      return () => clearInterval(interval);\n    }\n  });\n\n  function onMute() {\n    dispatch({\n      type: \"mute\",\n    });\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    el.muted = true;\n  }\n\n  function onNext() {\n    if (hasNext) {\n      dispatch({\n        type: \"play\",\n        payload: {\n          playlistId,\n          trackId: tracks[trackIndex + 1].id,\n        },\n      });\n    }\n  }\n\n  function onPrevious() {\n    if (hasPrevious) {\n      dispatch({\n        type: \"play\",\n        payload: {\n          playlistId,\n          trackId: tracks[trackIndex - 1].id,\n        },\n      });\n    }\n  }\n\n  function onPause() {\n    if (state !== audioStates.paused) {\n      dispatch({ type: \"pause\" });\n    }\n  }\n\n  function onPlay({ playlistId, trackId }) {\n    dispatch({ type: \"play\", payload: { playlistId, trackId } });\n  }\n\n  function onResume() {\n    if (state === audioStates.paused) {\n      dispatch({ type: \"resume\" });\n    }\n  }\n\n  function onSeek(positionMs, isForward) {\n    if (track) {\n      const player = audioRef.current;\n\n      let nextPosition = positionMs;\n\n      if (positionMs === undefined) {\n        // Handles bumping the position +/- 10 seconds if\n        // the user presses the seek buttons instead of using\n        // the position bar\n        nextPosition = position + (isForward ? 10000 : -10000);\n      }\n\n      player.currentTime = nextPosition / 1000;\n\n      media.setDuration({\n        duration: duration,\n        position: nextPosition,\n      });\n\n      dispatch({\n        type: \"position\",\n        payload: {\n          position: nextPosition,\n        },\n      });\n    }\n  }\n\n  function onStop() {\n    if (state !== audioStates.stopped) {\n      dispatch({ type: \"stop\" });\n    }\n  }\n\n  function onUnmute() {\n    dispatch({\n      type: \"unmute\",\n    });\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    el.muted = false;\n  }\n\n  function onVolumeChange(vol) {\n    dispatch({\n      type: \"volume\",\n      payload: {\n        volume: vol,\n      },\n    });\n    const el = audioRef.current;\n    if (!el) {\n      return;\n    }\n    el.volume = vol;\n    el.muted = vol === 0;\n  }\n\n  media.setHandlers({\n    onNext,\n    onPrevious,\n    onPause,\n    onPlay: onResume,\n    onSeek,\n  });\n\n  const value = {\n    duration,\n    hasNext,\n    hasPrevious,\n    isMuted,\n    onMute,\n    onNext,\n    onPause,\n    onPlay,\n    onPrevious,\n    onResume,\n    onSeek,\n    onStop,\n    onUnmute,\n    onVolumeChange,\n    playlist: playlists?.playlist,\n    position,\n    state,\n    track,\n    volume,\n  };\n\n  return (\n    <AudioContext.Provider value={value}>\n      {children}\n      {(track || state !== audioStates.stopped) && (\n        <audio\n          onDurationChange={handleDurationChange}\n          onEnded={handleEnded}\n          onPlay={handlePlaying}\n          onProgress={handleProgress}\n          ref={audioRef}\n        />\n      )}\n    </AudioContext.Provider>\n  );\n}\n\nfunction useAudio() {\n  const context = useContext(AudioContext);\n  if (context === undefined) {\n    throw new Error(\"useAudio must be used within a AudioProvider\");\n  }\n  return context;\n}\n\nexport { AudioProvider, useAudio };\n","import { useEffect, useState } from \"react\";\n\nimport { useDropbox } from \"./dropboxContext\";\nimport { useUsers } from \"./useUsers\";\nimport {\n  getFiles,\n  getModifiedBy,\n  getModifiedUsersFromEntries,\n  sortByTypeAndName,\n  sortByTypeAndModified,\n  sortByTypeAndModifiedBy,\n} from \"../utils\";\n\nexport function useFiles({\n  folder = \"\",\n  showFiles = false,\n  showImages = false,\n  sortBy = \"\",\n  sortDir = \"\",\n}) {\n  const { dbx, isAuthenticated } = useDropbox();\n  const [folderFileMap, setFolderFileMap] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const { fetchUsers } = useUsers();\n\n  useEffect(() => {\n    async function fetchFiles() {\n      setIsLoading(true);\n      const files = await getFiles(dbx, folder, showFiles, showImages);\n\n      // Get all user ids of users who have modified listed files\n      const userIds = getModifiedUsersFromEntries(files.data);\n      const users = await fetchUsers(userIds);\n\n      const filesWithUsers = {\n        ...files,\n        data: files.data.map((f) => ({\n          ...f,\n          user: users[getModifiedBy(f)],\n        })),\n      };\n\n      setFolderFileMap({\n        [folder]: filesWithUsers,\n      });\n      setIsLoading(false);\n    }\n\n    if (dbx && isAuthenticated) {\n      fetchFiles();\n    }\n    // eslint-disable-next-line\n  }, [dbx, folder, isAuthenticated]);\n\n  const { cursor, data = [], hasMore } = folderFileMap[folder] || {};\n\n  let sortedData = data;\n\n  if (sortBy && sortDir) {\n    if (sortBy === \"name\") {\n      sortedData = data.sort(sortByTypeAndName(sortDir));\n    } else if (sortBy === \"modified\") {\n      sortedData = data.sort(sortByTypeAndModified(sortDir));\n    } else if (sortBy === \"modifiedBy\") {\n      sortedData = data.sort(sortByTypeAndModifiedBy(sortDir));\n    }\n  }\n\n  return {\n    cursor,\n    files: sortedData,\n    folder,\n    hasMore,\n    isLoading,\n  };\n}\n","import { useEffect, useState } from \"react\";\n\nexport const queries = {\n  phone: `(min-width: 0) and (max-width: 419px)`,\n  phablet: `(min-width: 420px) and (max-width: 659px)`,\n  tablet: `(min-width: 660px) and (max-width: 1023px)`,\n  desktop: `(min-width: 1024px)`,\n};\n\nexport function useMedia(queries, values, defaultValue) {\n  // Array containing a media query list for each query\n  const mediaQueryLists = queries.map((q) => window.matchMedia(q));\n\n  // Function that gets value based on matching media query\n  const getValue = () => {\n    // Get index of first media query that matches\n    const index = mediaQueryLists.findIndex((mql) => mql.matches);\n    // Return related value or defaultValue if none\n    return typeof values[index] !== \"undefined\" ? values[index] : defaultValue;\n  };\n\n  // State and setter for matched value\n  const [value, setValue] = useState(getValue);\n\n  useEffect(\n    () => {\n      // Event listener callback\n      // Note: By defining getValue outside of useEffect we ensure that it has ...\n      // ... current values of hook args (as this hook callback is created once on mount).\n      const handler = () => setValue(getValue);\n      // Set a listener for each media query with above handler as callback.\n      mediaQueryLists.forEach((mql) => mql.addListener(handler));\n      // Remove listeners on cleanup\n      return () =>\n        mediaQueryLists.forEach((mql) => mql.removeListener(handler));\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [] // Empty array ensures effect is only run on mount and unmount\n  );\n\n  return value;\n}\n\nexport function useSize() {\n  return useMedia(\n    [queries.tablet, queries.desktop],\n    [\"medium\", \"large\"],\n    \"small\"\n  );\n}\n","import { css } from \"styled-components\";\n\nconst color = {\n  background: \"#242A31\",\n  backgroundLight: \"#2D323C\",\n  disabled: \"#656565\",\n  error: \"#E7777F\",\n  inherit: \"inherit\",\n  primary: \"#D2D2D2\",\n  secondary: \"#b3b3b3\",\n  success: \"#A1CA7E\",\n  transparent: \"transparent\",\n  white: \"#FFFFFF\",\n};\n\nconst space = 5;\n\nconst theme = {\n  color: {\n    ...color,\n    highlight: \"#5EB1BF\",\n    bgHighlight: color.primary + \"11\",\n  },\n  typography: {\n    base: css`\n      font-size: 16px;\n      line-height: 25px;\n    `,\n    sub: css`\n      font-size: 14px;\n      font-weight: 400;\n      lint-height: 20px;\n    `,\n  },\n  space: {\n    small: space,\n    medium: space * 2,\n    large: space * 4,\n  },\n  transition: \"all 250ms ease-in\",\n};\n\nexport default theme;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"@reach/router\";\n\nconst Base = styled.a`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.background};\n  border-radius: 10px;\n  border: 1px solid ${(p) => p.theme.color.white};\n  color: ${(p) => p.theme.color.white};\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ${(p) => p.theme.transition};\n\n  :hover {\n    background-color: ${(p) => p.theme.color.white};\n    color: ${(p) => p.theme.color.background};\n  }\n\n  ${(p) =>\n    p.disabled\n      ? `\n  color: ${p.theme.color.disabled};\n  cursor: unset;\n  border-color: ${p.theme.color.disabled};\n\n  :hover {\n    background-color: ${p.theme.color.background};\n    color: ${p.theme.color.disabled};\n  }\n`\n      : \"\"}\n`;\n\nfunction ButtonLink(props) {\n  return <Base as={props.to ? Link : undefined} {...props} />;\n}\n\nexport default ButtonLink;\n","import React, { Fragment, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { Redirect } from \"@reach/router\";\n\nimport { useDropbox } from \"../hooks\";\nimport { HOME } from \"../constants\";\n\nimport ButtonLink from \"./ButtonLink\";\n\nconst Wrapper = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n`;\n\nfunction Auth() {\n  const { isAuthenticated, onAuth, parseAcessToken } = useDropbox();\n  const hasCode = window.location.search.includes(\"code\");\n\n  useEffect(() => {\n    if (!isAuthenticated && hasCode) {\n      parseAcessToken();\n    }\n  }, [hasCode, isAuthenticated, parseAcessToken]);\n\n  if (isAuthenticated) {\n    return <Redirect noThrow={true} to={HOME} />;\n  }\n\n  return (\n    <Wrapper>\n      <h1>Welcome</h1>\n      <Fragment>\n        <ButtonLink onClick={onAuth}>Authenticate With Dropbox</ButtonLink>\n      </Fragment>\n    </Wrapper>\n  );\n}\n\nexport default Auth;\n","import styled from \"styled-components\";\n\nexport default styled.button`\n  background-color: ${p => p.theme.color.background};\n  border-radius: 10px;\n  border: 1px solid ${p => p.theme.color.white};\n  color: ${p => p.theme.color.white};\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ${p => p.theme.transition};\n\n  :hover,\n  :focus {\n    background-color: ${p => p.theme.color.white};\n    color: ${p => p.theme.color.background};\n  }\n\n  ${p =>\n    p.disabled\n      ? `\n    color: ${p.theme.color.disabled};\n    cursor: unset;\n    border-color: ${p.theme.color.disabled};\n\n    :hover, :focus {\n      background-color: ${p.theme.color.background};\n      color: ${p.theme.color.disabled};\n    }\n  `\n      : \"\"}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.button`\n  background-color: transparent;\n  border: none;\n  color: ${p => p.theme.color.primary};\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ${p => p.theme.color.highlight};\n  }\n`;\n\nconst Breadcrumb = ({ name = \"Home\", onClick, path }) => {\n  return <Wrapper onClick={() => onClick(path)}>{name}</Wrapper>;\n};\n\nexport default Breadcrumb;\n","import React, { Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\n\nimport Breadcrumb from \"./Breadcrumb\";\n\nconst Trail = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n`;\n\nfunction BreadcrumbTrail({ onClick, onSort, path = \"\" }) {\n  const trail = path.split(\"/\").map((folder, i, pathArray) => {\n    const subPath = pathArray.slice(0, i + 1).join(\"/\");\n    return (\n      <Fragment key={i}>\n        {i !== 0 && <span>/</span>}\n        <Breadcrumb name={folder || \"Home\"} onClick={onClick} path={subPath} />\n      </Fragment>\n    );\n  });\n\n  return (\n    <Trail>\n      <ChevronRight /> {trail}\n    </Trail>\n  );\n}\n\nexport default BreadcrumbTrail;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\nimport Audiotrack from \"@material-ui/icons/Audiotrack\";\nimport CheckBox from \"@material-ui/icons/CheckBox\";\nimport Folder from \"@material-ui/icons/Folder\";\n\nconst Inner = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n`;\n\nconst Name = styled.span`\n  ${p => p.theme.typography.base}\n`;\n\nconst Subtitle = styled.span`\n  ${p => p.theme.typography.sub}\n`;\n\nconst Wrapper = styled.button`\n  background-color: ${p =>\n    p.theme.color[p.isSelected ? \"bgHighlight\" : \"background\"]};\n  border: none;\n  border-top: 1px solid ${p => p.theme.color.bgHighlight};\n  color: ${p => p.theme.color[p.isSelected ? \"highlight\" : \"inherit\"]};\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ${p => p.theme.space.medium}px ${p => p.theme.space.large}px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ${p => p.theme.color.primary}11;\n  }\n`;\n\nfunction Entry({ entry, onClick, isSelected = false }) {\n  const Icon = isSelected ? CheckBox : entry.isFolder ? Folder : Audiotrack;\n\n  return (\n    <Wrapper isSelected={isSelected} onClick={() => onClick(entry)}>\n      <Inner>\n        <Icon />\n        <Name>{entry.name}</Name>\n        {entry.type === \"file\" && (\n          <Subtitle>\n            {formatDistanceToNow(new Date(entry.server_modified))} ago\n          </Subtitle>\n        )}\n        {entry.type === \"file\" && (\n          <Subtitle>{entry.user?.name?.display_name}</Subtitle>\n        )}\n      </Inner>\n    </Wrapper>\n  );\n}\n\nexport default Entry;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst getKeyDefault = (_item, index) => index;\n\nconst EmptyMessage = styled.div`\n  ${(p) => p.theme.typography.base}\n  color: ${(p) => p.theme.color.secondary};\n  font-size: 18px;\n  padding: 20px;\n`;\n\nconst gapStyle = (gap) =>\n  gap\n    ? `\n        display: grid;\n        grid-gap: ${gap}px;\n      `\n    : \"\";\n\nconst StyledList = styled.ul`\n  list-style-type: none;\n  margin: 0;\n  margin-block-end: 0;\n  margin-block-start: 0;\n  padding: 0;\n  padding-inline-start: 0;\n  -webkit-margin-start: 0;\n  -webkit-padding-start: 0;\n  ${(p) => gapStyle(p.gap)}\n`;\n\nfunction List({\n  emptyMessage,\n  isLoading,\n  itemRenderer,\n  items,\n  gap,\n  getKey = getKeyDefault,\n}) {\n  if (!isLoading && items.length === 0 && emptyMessage) {\n    return <EmptyMessage>{emptyMessage}</EmptyMessage>;\n  }\n\n  const listItems = items.map((item, i) => (\n    <li key={getKey(item, i)}>{itemRenderer(item, i)}</li>\n  ));\n\n  return <StyledList gap={gap}>{listItems}</StyledList>;\n}\n\nList.defaultProps = {\n  getKey: getKeyDefault,\n};\n\nexport default List;\n","import styled from \"styled-components\";\n\nexport default styled.div`\n  height: ${p => p.height};\n  width: ${p => p.width};\n`;\n","import React from \"react\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport styled from \"styled-components\";\n\nimport Spacer from \"./Spacer\";\n\nconst Wrapper = styled.div`\n  margin-bottom: -4px;\n`;\n\nfunction Loader({ isLoading }) {\n  return (\n    <Wrapper>\n      {isLoading ? <LinearProgress /> : <Spacer height=\"4px\" />}\n    </Wrapper>\n  );\n}\n\nexport default Loader;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\n\nconst Wrapper = styled.button`\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ${p => p.theme.color.primary};\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ${p => p.theme.color.highlight};\n  }\n`;\n\nfunction SortableHeader({ children, onClick, sortDir }) {\n  const Icon =\n    sortDir === \"asc\" ? ExpandMore : sortDir === \"desc\" ? ExpandLess : null;\n\n  return (\n    <Wrapper onClick={onClick}>\n      <span>{children}</span>\n      {Icon && <Icon />}\n    </Wrapper>\n  );\n}\n\nexport default SortableHeader;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport BreadcrumbTrail from \"./BreadcrumbTrail\";\nimport Entry from \"./Entry\";\nimport List from \"../List\";\nimport Loader from \"../Loader\";\nimport SortableHeader from \"./SortableHeader\";\nimport Spacer from \"../Spacer\";\n\nimport { useFiles } from \"../../hooks\";\n\nconst Header = styled.div`\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n`;\n\nfunction Explorer({\n  onPathChange,\n  onSelectionChange,\n  selectedEntries = [],\n  singleSelection = false,\n  showFiles = false,\n  showImages = false,\n}) {\n  const [folder, setFolder] = useState(\"\");\n  const [sortBy, setSortBy] = useState(\"\");\n  const [sortDir, setSortDir] = useState(\"\");\n  const { files, isLoading } = useFiles({\n    folder,\n    showFiles,\n    showImages,\n    sortBy,\n    sortDir,\n  });\n\n  function handleClick(entry) {\n    if (entry.type === \"folder\") {\n      setFolder(entry.path);\n      if (onPathChange) {\n        onPathChange(entry.path);\n      }\n    } else if (showFiles || showImages) {\n      if (singleSelection) {\n        if (selectedEntries.some((e) => e.id === entry.id)) {\n          onSelectionChange([null]);\n        } else {\n          onSelectionChange([entry]);\n        }\n      } else {\n        if (selectedEntries.some((e) => e.id === entry.id)) {\n          onSelectionChange(selectedEntries.filter((e) => e.id !== entry.id));\n        } else {\n          onSelectionChange([...selectedEntries, entry]);\n        }\n      }\n    }\n  }\n\n  function handleSort(column) {\n    if (column !== sortBy) {\n      setSortBy(column);\n      setSortDir(\"desc\");\n    } else {\n      if (sortDir === \"desc\") {\n        setSortDir(\"asc\");\n      } else {\n        setSortDir(\"\");\n        setSortBy(\"\");\n      }\n    }\n  }\n\n  return (\n    <Wrapper>\n      <BreadcrumbTrail onClick={setFolder} path={folder} />\n      <Spacer height=\"10px\" />\n      <Header>\n        <span />\n        <SortableHeader\n          onClick={() => handleSort(\"name\")}\n          sortDir={sortBy === \"name\" ? sortDir : null}\n        >\n          Name\n        </SortableHeader>\n        <SortableHeader\n          onClick={() => handleSort(\"modified\")}\n          sortDir={sortBy === \"modified\" ? sortDir : null}\n        >\n          Modified\n        </SortableHeader>\n        <SortableHeader\n          onClick={() => handleSort(\"modifiedBy\")}\n          sortDir={sortBy === \"modifiedBy\" ? sortDir : null}\n        >\n          Modified By\n        </SortableHeader>\n      </Header>\n      <Loader isLoading={isLoading} />\n      <List\n        emptyMessage=\"There are no files here\"\n        isLoading={isLoading}\n        items={files}\n        itemRenderer={(entry) => (\n          <Entry\n            entry={entry}\n            isSelected={selectedEntries.some(\n              (e) => e.path_lower === entry.path_lower\n            )}\n            onClick={handleClick}\n          />\n        )}\n      />\n    </Wrapper>\n  );\n}\n\nexport default Explorer;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\n\nconst errorStyle = css`\n  border-color: ${p => p.theme.color.error};\n  color: ${p => p.theme.color.error};\n`;\n\nconst Error = styled.span`\n  ${errorStyle}\n  font-size: 14px;\n  font-weight: 700;\n`;\n\nconst StyledInput = styled.input`\n  background-color: ${p => p.theme.color.background};\n  border: 1px solid ${p => p.theme.color.primary};\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n`;\n\nconst Title = styled.div`\n  background-color: ${p => p.theme.color.background};\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n`;\n\nconst Wrapper = styled.label`\n  color: ${p => p.theme.color.secondary};\n  position: relative;\n\n  :focus-within {\n    color: ${p => p.theme.color.white};\n  }\n\n  ${p => (p.hasError ? errorStyle : \"\")}\n`;\n\nfunction TextInput({ error, hasError, onChange, title, value, ...props }) {\n  return (\n    <Wrapper hasError={hasError}>\n      <StyledInput\n        {...props}\n        hasError={hasError}\n        onChange={e => onChange(e.target.value)}\n        type=\"text\"\n        value={value}\n      />\n      <Title>{title}</Title>\n      {error && <Error>{error}</Error>}\n    </Wrapper>\n  );\n}\n\nexport default TextInput;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport Button from \"./Button\";\nimport ButtonLink from \"./ButtonLink\";\nimport Explorer from \"./Explorer\";\nimport TextInput from \"./TextInput\";\n\nimport { HOME, makeRelativeUrl } from \"../constants\";\nimport { usePlaylists } from \"../hooks\";\n\nconst ExplorerInner = styled.div`\n  overflow-y: scroll;\n  height: 470px;\n`;\n\nconst ExplorerTitle = styled.div`\n  background-color: ${(p) => p.theme.color.background};\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n`;\n\nconst ExplorerWrapper = styled.div`\n  border: 1px solid ${(p) => p.theme.color.primary};\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n`;\n\nconst Header = styled.div`\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n`;\n\nconst Title = styled.h2``;\n\nconst Wrapper = styled.form`\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n`;\n\nfunction AddPlaylist({ navigate }) {\n  const [artist, setArtist] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [path, setPath] = useState(\"/\");\n  const { onCreatePlaylist } = usePlaylists({});\n\n  const canSave = !!artist && !!title && !!path;\n\n  async function handleSave(e) {\n    e.preventDefault();\n\n    const playlistId = await onCreatePlaylist(`${path}/${title}.mix`, {\n      artist,\n      title,\n      tracks: [],\n    });\n\n    navigate(makeRelativeUrl(`/playlist/${playlistId}`));\n\n    return false;\n  }\n\n  return (\n    <Wrapper onSubmit={canSave ? handleSave : undefined}>\n      <Header>\n        <Title>Add Playlist</Title>\n        <Button disabled={!canSave} type=\"submit\">\n          Save\n        </Button>\n        <ButtonLink to={HOME}>Cancel</ButtonLink>\n      </Header>\n      <TextInput onChange={setTitle} title=\"Title\" value={title} />\n      <TextInput onChange={setArtist} title=\"Artist\" value={artist} />\n      <ExplorerWrapper>\n        <ExplorerInner>\n          <Explorer onPathChange={setPath} />\n        </ExplorerInner>\n        <ExplorerTitle>Location</ExplorerTitle>\n      </ExplorerWrapper>\n    </Wrapper>\n  );\n}\n\nexport default AddPlaylist;\n","import React, { useEffect, useState } from \"react\";\n\nimport { useDropbox, useLocalStorage } from \"../hooks\";\n\nconst imgState = {\n  none: \"none\",\n  fetched: \"fetched\",\n  error: \"error\",\n};\n\nfunction PlaylistImage({ playlist, size = 50 }) {\n  const [url, setUrl] = useState();\n  const [imageState, setImageState] = useState(imgState.none);\n  const { dbx, isAuthenticated } = useDropbox();\n  const [imageMap = {}, setImageMap] = useLocalStorage(\"playlistImages\");\n  const imageId = playlist?.data?.image?.id;\n\n  useEffect(() => {\n    if (url && imageState !== imgState.error) return;\n\n    async function getImageUrl() {\n      if (playlist?.data?.image) {\n        const fileLink = await dbx.filesGetTemporaryLink({\n          path: playlist.data.image?.path_lower,\n        });\n        setUrl(fileLink?.result?.link);\n        setImageMap({\n          ...imageMap,\n          [playlist?.data?.image?.id]: fileLink?.link,\n        });\n        setImageState(imgState.fetched);\n      } else {\n        setUrl(\"\");\n        setImageState(imgState.error);\n      }\n    }\n\n    const mappedImage = imageMap[imageId];\n\n    if (imageState !== imgState.error && mappedImage) {\n      setUrl(mappedImage);\n    } else {\n      getImageUrl();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [imageId, imageState, playlist?.meta?.id, isAuthenticated]);\n\n  function handleError(er) {\n    if (url && imgState !== imgState.fetched) {\n      // we didn't fetch the image and there's an error\n      // so force the fetch again\n      setImageState(imgState.error);\n    }\n  }\n\n  if (!isAuthenticated) return null;\n\n  return (\n    <img\n      alt={playlist?.data?.title}\n      height={size === \"100%\" ? \"auto\" : size}\n      onError={handleError}\n      src={url || `${process.env.PUBLIC_URL}/android-icon-96x96.png`}\n      width={size}\n    />\n  );\n}\n\nexport default PlaylistImage;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport PlaylistImage from \"./PlaylistImage\";\nimport { useSize } from \"../hooks\";\n\nconst Artist = styled.div`\n  ${(p) => p.theme.typography.sub}\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst Info = styled.div`\n  display: grid;\n`;\n\nconst White = styled.span`\n  color: ${(p) => p.theme.color.primary};\n`;\n\nconst Title = styled.h1`\n  font-size: ${(p) => (p.size === \"large\" ? 32 : 24)}px;\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: ${(p) => (p.size === \"large\" ? 20 : 10)}px;\n  grid-template-columns: 50px 1fr;\n`;\n\nfunction PlaylistHeader({ playlist }) {\n  const size = useSize();\n\n  return (\n    <Wrapper size={size}>\n      <PlaylistImage playlist={playlist} />\n      <Info>\n        <Title size={size}>{playlist.data.title}</Title>\n        {playlist.data.artist && (\n          <Artist>\n            By <White>{playlist.data.artist}</White>\n          </Artist>\n        )}\n      </Info>\n    </Wrapper>\n  );\n}\n\nexport default PlaylistHeader;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"@reach/router\";\n\nimport Button from \"./Button\";\nimport ButtonLink from \"./ButtonLink\";\nimport Explorer from \"./Explorer\";\nimport PlaylistHeader from \"./PlaylistHeader\";\n\nimport { makeRelativeUrl } from \"../constants\";\nimport { usePlaylists, useSize } from \"../hooks\";\n\nconst Actions = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n`;\n\nconst Header = styled.div`\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? \"1fr\" : \"1fr auto\")};\n  padding: 20px;\n`;\n\nfunction ImageExplorer({ playlistId }) {\n  const { isLoading, onSavePlaylist, playlist } = usePlaylists({ playlistId });\n  const [selectedImage, setSelectedImage] = useState([]);\n  const [isDirty, setIsDirty] = useState(false);\n  const navigate = useNavigate();\n  const size = useSize();\n\n  const playlistUrl = makeRelativeUrl(`/playlist/${playlistId}`);\n\n  useEffect(() => {\n    setSelectedImage(playlist?.data?.image);\n  }, [isLoading, playlist]);\n\n  function handleSave() {\n    onSavePlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        image: selectedImage,\n      },\n    });\n    navigate(playlistUrl);\n  }\n\n  function handleSelectionChange([image]) {\n    setSelectedImage(image);\n    if (!isDirty) {\n      setIsDirty(true);\n    }\n  }\n\n  return (\n    <div>\n      <Header size={size}>\n        <PlaylistHeader playlist={playlist} />\n        <Actions>\n          <Button disabled={!isDirty} onClick={handleSave}>\n            Save\n          </Button>\n          <ButtonLink to={playlistUrl}>Cancel</ButtonLink>\n        </Actions>\n      </Header>\n      <Explorer\n        onSelectionChange={handleSelectionChange}\n        selectedEntries={selectedImage ? [selectedImage] : []}\n        showImages={true}\n      />\n    </div>\n  );\n}\n\nexport default ImageExplorer;\n","import styled from \"styled-components\";\nimport { Link } from \"@reach/router\";\n\nexport default styled(Link)`\n  color: ${p => p.theme.color.primary};\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ${p => p.theme.color.highlight};\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport formatRelative from \"date-fns/formatRelative\";\n\nimport ButtonLink from \"./ButtonLink\";\nimport Link from \"./Link\";\nimport List from \"./List\";\nimport Loader from \"./Loader\";\nimport PlaylistImage from \"./PlaylistImage\";\n\nimport { usePlaylists, useSize } from \"../hooks\";\n\nconst Actions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n`;\n\nconst Name = styled.h2``;\n\nconst Modified = styled.div`\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst Updated = styled.span`\n  ${(p) => p.theme.typography.sub}\n  text-align: right;\n`;\n\nconst Path = styled.span`\n  ${(p) => p.theme.typography.sub}\n  color: ${(p) => p.theme.color.secondary};\n`;\n\nconst Playlist = styled.div`\n  ${(p) => p.theme.typography.base}\n  align-items: center;\n  background-color: ${(p) =>\n    p.theme.color[p.isPlaying ? \"bgHighlight\" : \"background\"]};\n  border: none;\n  border-top: 1px solid ${(p) => p.theme.color.bgHighlight};\n  color: ${(p) => p.theme.color[p.isPlaying ? \"highlight\" : \"inherit\"]};\n  cursor: pointer;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ${(p) => p.theme.space.medium}px ${(p) => p.theme.space.large}px;\n  text-align: left;\n\n  :hover {\n    background-color: ${(p) => p.theme.color.primary}11;\n  }\n`;\n\nconst Title = styled.div`\n  display: grid;\n`;\n\nfunction Playlists() {\n  const playlists = usePlaylists({ forceRefresh: true });\n  const size = useSize();\n\n  return (\n    <div>\n      <Actions>\n        <ButtonLink to=\"new\">Add</ButtonLink>\n      </Actions>\n      <Loader isLoading={playlists.isLoading} />\n      <List\n        getKey={(playlist) => playlist.meta.id}\n        items={playlists.playlists}\n        itemRenderer={(playlist) => {\n          const modifiedBy = playlist.meta.user?.name?.display_name;\n          return (\n            <Link to={`playlist/${playlist.meta.id}`}>\n              <Playlist>\n                <PlaylistImage playlist={playlist} />\n                <Title>\n                  <Name>{playlist.data.title}</Name>\n                  {\n                    <Path>\n                      {playlist.data.artist || playlist.meta.path_display}\n                    </Path>\n                  }\n                </Title>\n                {size !== \"small\" && (\n                  <Updated>\n                    Updated{\" \"}\n                    {formatRelative(\n                      new Date(playlist.meta.server_modified),\n                      new Date()\n                    )}\n                    <Modified>\n                      {Boolean(modifiedBy) ? \"by \" : \"\"}\n                      {modifiedBy}\n                    </Modified>\n                  </Updated>\n                )}\n              </Playlist>\n            </Link>\n          );\n        }}\n      />\n    </div>\n  );\n}\n\nexport default Playlists;\n","import React from \"react\";\n\nimport Playlists from \"./Playlists\";\n\nfunction Home() {\n  return <Playlists />;\n}\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\nconst Image = styled.img``;\n\nconst Name = styled.span`\n  font-size: 16px;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.primary};\n  border-radius: 50%;\n  color: ${(p) => p.theme.color.background};\n  display: flex;\n  justify-content: center;\n  height: ${(p) => p.size}px;\n  overflow: hidden;\n  position: relative;\n  width: ${(p) => p.size}px;\n`;\n\nfunction Avatar({ initials, name, size = 36, url }) {\n  const [hasError, setHasError] = useState(false);\n\n  useEffect(() => {\n    if (url && hasError) {\n      setHasError(false);\n    }\n    // eslint-disable-next-line\n  }, [url]);\n\n  return (\n    <Wrapper size={size}>\n      {url && !hasError ? (\n        <Image\n          alt={name || initials}\n          height={size}\n          onError={() => setHasError(true)}\n          src={url}\n          width={size}\n        />\n      ) : (\n        <Name>{initials}</Name>\n      )}\n    </Wrapper>\n  );\n}\n\nexport default Avatar;\n","import React, { Fragment, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Voicemail from \"@material-ui/icons/Voicemail\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport { useDropbox, useSize } from \"../../hooks\";\nimport { HOME } from \"../../constants\";\nimport Avatar from \"../Avatar\";\nimport Link from \"../Link\";\n\nconst Inner = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst Title = styled.h1`\n  padding-left: 10px;\n  font-size: ${(p) => (p.size === \"large\" ? 36 : 28)}px;\n`;\n\nconst UserMenu = styled.button`\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.backgroundLight};\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n`;\n\nfunction Header({ location }) {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { currentUser, onLogout } = useDropbox();\n  const size = useSize();\n\n  function closeMenu() {\n    setAnchorEl(null);\n  }\n\n  function handleLogout() {\n    onLogout();\n  }\n\n  function showMenu(e) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  return (\n    <Wrapper>\n      <Link to={HOME}>\n        <Inner>\n          <Voicemail fontSize=\"large\" />\n          <Title size={size}>Demo Tape</Title>\n        </Inner>\n      </Link>\n      <span />\n      {currentUser && (\n        <Fragment>\n          <UserMenu\n            aria-controls=\"user-menu\"\n            aria-haspopup=\"true\"\n            onClick={showMenu}\n          >\n            <Avatar\n              initials={currentUser?.name?.abbreviated_name}\n              name={currentUser?.name?.display_name}\n              url={currentUser?.profile_photo_url}\n            />\n          </UserMenu>\n          <Menu\n            elevation={0}\n            getContentAnchorEl={null}\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"center\",\n            }}\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"center\",\n            }}\n            id=\"user-menu\"\n            anchorEl={anchorEl}\n            keepMounted={true}\n            open={Boolean(anchorEl)}\n            onClose={closeMenu}\n          >\n            <MenuItem onClick={() => handleLogout()}>Logout</MenuItem>\n          </Menu>\n        </Fragment>\n      )}\n    </Wrapper>\n  );\n}\n\nexport default Header;\n","import styled from \"styled-components\";\n\nconst size = 30;\n\nexport default styled.button`\n  align-items: center;\n  background-color: ${(p) => p.hideBackground ? \"transparent\" : p.theme.color.background};\n  border: ${(p) => (p.hideBorder ? \"none\" : \"1px solid white\")};\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ${(p) => p.size || size}px;\n  justify-content: center;\n  outline: none;\n  transition: ${(p) => p.theme.transition};\n  width: ${(p) => p.size || size}px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ${(p) => p.theme.color.background};\n  }\n\n  ${(p) =>\n    p.disabled\n      ? `\n    color: ${p.theme.color.disabled};\n    cursor: unset;\n    border-color: ${p.theme.color.transparent};\n\n    :hover, :focus {\n      background-color: ${p.theme.color.background};\n      color: ${p.theme.color.disabled};\n    }\n  `\n      : \"\"}\n`;\n","export function getMMSSFromMs(millis) {\n  const totalSeconds = millis / 1000;\n  const seconds = Math.floor(totalSeconds % 60);\n  const minutes = Math.floor(totalSeconds / 60);\n  return padWithZero(minutes) + \":\" + padWithZero(seconds);\n}\n\nfunction padWithZero(number) {\n  const string = number.toString();\n  if (number < 10) {\n    return \"0\" + string;\n  }\n  return string;\n}\n","import React, { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport { useAudio } from \"../../../hooks\";\nimport { getMMSSFromMs } from \"./utils\";\n\nconst LeftTime = styled.span`\n  text-align: right;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  color: ${(p) => p.theme.color[p.isDisabled ? \"disabled\" : \"primary\"]};\n  display: grid;\n  grid-template-columns: 60px 1fr 60px;\n  grid-gap: 5px;\n`;\n\nfunction Position() {\n  const audio = useAudio();\n  const [seekPosition, setSeekPosition] = useState(0);\n  const [isSeeking, setIsSeeking] = useState(false);\n  const inputRef = useRef();\n\n  function handleChange(e) {\n    setSeekPosition(inputRef.current.value);\n  }\n\n  function handleSeek(e) {\n    setIsSeeking(false);\n    const nextPosition = parseInt(inputRef.current.value);\n    if (!isNaN(nextPosition)) {\n      audio.onSeek(nextPosition);\n    }\n  }\n\n  const displayPos = isSeeking ? seekPosition : audio.position;\n\n  return (\n    <Wrapper isDisabled={!audio.track}>\n      <LeftTime>{getMMSSFromMs(displayPos)}</LeftTime>\n      <input\n        type=\"range\"\n        disabled={!audio.track}\n        min={0}\n        max={audio.duration}\n        onChange={handleChange}\n        onMouseDown={(e) => {\n          setIsSeeking(true);\n        }}\n        onMouseUp={(e) => {\n          handleSeek(e);\n        }}\n        onTouchEnd={(e) => {\n          handleSeek(e);\n        }}\n        onTouchStart={(e) => {\n          setIsSeeking(true);\n        }}\n        ref={inputRef}\n        value={displayPos}\n      />\n      <span>{getMMSSFromMs(audio.duration)}</span>\n    </Wrapper>\n  );\n}\n\nexport default Position;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport PlaylistImage from \"../../PlaylistImage\";\nimport { removeExtension } from \"../../../utils\";\n\nconst Artist = styled.div`\n  ${(p) => p.theme.typography.sub}\n  color: ${(p) => p.theme.color.secondary};\n`;\n\nconst Info = styled.div`\n  display: grid;\n  grid-gap: 2px;\n`;\n\nconst TrackName = styled.div`\n  ${(p) => p.theme.typography.base}\n  font-weight: 500;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 50px 1fr;\n`;\n\nfunction SongDetails({ playlist, track }) {\n  return (\n    <Wrapper>\n      <PlaylistImage playlist={playlist} />\n      <Info>\n        <TrackName>{removeExtension(track?.name)}</TrackName>\n        <Artist>{playlist?.data?.artist || playlist?.data?.title}</Artist>\n      </Info>\n    </Wrapper>\n  );\n}\n\nexport default SongDetails;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport VolumeMute from \"@material-ui/icons/VolumeMute\";\nimport VolumeUp from \"@material-ui/icons/VolumeUp\";\n\nimport { useAudio } from \"../../../hooks\";\n\nconst Icon = styled.div`\n  cursor: pointer;\n\n  :hover {\n    color: ${(p) => p.theme.color.highlight};\n  }\n`;\n\nconst Input = styled.input`\n  width: 100%;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 20px 1fr;\n  padding: 0 10px;\n`;\n\nfunction Volume() {\n  const { isMuted, onMute, onUnmute, onVolumeChange, volume } = useAudio();\n\n  const IconName = volume === 0 || isMuted ? VolumeMute : VolumeUp;\n\n  return (\n    <Wrapper>\n      <Icon\n        as={IconName}\n        fontSize=\"small\"\n        onClick={isMuted ? onUnmute : onMute}\n      />\n      <Input\n        max={1}\n        min={0}\n        onChange={(e) => onVolumeChange(e.currentTarget.value)}\n        step={0.01}\n        type=\"range\"\n        value={isMuted ? 0 : volume}\n      />\n    </Wrapper>\n  );\n}\n\nexport default Volume;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport Pause from \"@material-ui/icons/Pause\";\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\nimport SkipNext from \"@material-ui/icons/SkipNext\";\nimport SkipPrevious from \"@material-ui/icons/SkipPrevious\";\n\nimport { audioStates, useAudio } from \"../../../hooks\";\n\nimport IconButton from \"../../IconButton\";\nimport Position from \"./Position\";\nimport SongDetails from \"./SongDetails\";\nimport Volume from \"./Volume\";\n\nconst Buttons = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n`;\n\nconst Controls = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst ControlsInner = styled.div`\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n`;\n\nconst Wrapper = styled.div`\n  align-items: center;\n  background-color: ${(p) => p.theme.color.backgroundLight};\n  bottom: 0;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: minmax(200px, 0.5fr) 1fr 150px;\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n`;\n\nfunction DesktopPlayer() {\n  const audio = useAudio();\n\n  const hasTrack = !!audio.track;\n  const isPlaying = audio.state === audioStates.playing;\n  const isLoading = audio.state === audioStates.loading;\n\n  const playButton = isPlaying ? (\n    <IconButton aria-label=\"Pause\" onClick={audio.onPause} size={40}>\n      <Pause />\n    </IconButton>\n  ) : (\n    <IconButton\n      aria-label=\"Play\"\n      disabled={isLoading || !hasTrack}\n      onClick={() => audio.onResume()}\n      size={40}\n    >\n      <PlayArrow />\n    </IconButton>\n  );\n\n  return (\n    <Wrapper>\n      <SongDetails playlist={audio.playlist} track={audio.track} />\n      <Controls>\n        <ControlsInner>\n          <Buttons>\n            <IconButton\n              aria-label=\"Previous\"\n              disabled={!audio.hasPrevious}\n              hideBorder\n              onClick={audio.onPrevious}\n            >\n              <SkipPrevious fontSize=\"small\" />\n            </IconButton>\n            {playButton}\n            <IconButton\n              aria-label=\"Next\"\n              disabled={!audio.hasNext}\n              hideBorder\n              onClick={audio.onNext}\n            >\n              <SkipNext fontSize=\"small\" />\n            </IconButton>\n          </Buttons>\n          <Position />\n        </ControlsInner>\n      </Controls>\n      <Volume />\n    </Wrapper>\n  );\n}\n\nexport default DesktopPlayer;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Pause from \"@material-ui/icons/Pause\";\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\nimport SkipNext from \"@material-ui/icons/SkipNext\";\nimport SkipPrevious from \"@material-ui/icons/SkipPrevious\";\n\nimport { audioStates, useAudio } from \"../../../hooks\";\nimport { removeExtension } from \"../../../utils\";\n\nimport IconButton from \"../../IconButton\";\nimport PlaylistImage from \"../../PlaylistImage\";\nimport Position from \"./Position\";\nimport SongDetails from \"./SongDetails\";\n\nconst Artist = styled.div`\n  ${(p) => p.theme.typography.sub}\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst Buttons = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n`;\n\nconst Collapsed = styled.div`\n  align-items: center;\n  border-top: ;\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: auto 1fr;\n  padding: 10px;\n`;\n\nconst Expanded = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 1fr;\n  padding: 20px;\n`;\n\nconst Header = styled.div`\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  margin-top: 60px;\n`;\n\nconst InfoWrapper = styled.div`\n  display: grid;\n  grid-gap: 10px;\n  text-align: center;\n`;\n\nconst TrackName = styled.div`\n  ${(p) => p.theme.typography.base}\n  font-weight: 500;\n`;\n\nconst Wrapper = styled.div`\n  background-color: ${(p) =>\n    p.isExpanded ? p.theme.color.background : p.theme.color.backgroundLight};\n  bottom: 0;\n  height: ${(p) => (p.isExpanded ? \"100vh\" : \"auto\")};\n  position: absolute;\n  width: 100%;\n`;\n\nfunction MobilePlayer() {\n  const [isExpanded, setIsExpanded] = React.useState(false);\n  const audio = useAudio();\n\n  const hasTrack = !!audio.track;\n  const isPlaying = audio.state === audioStates.playing;\n  const isLoading = audio.state === audioStates.loading;\n\n  if (!hasTrack) return null;\n\n  const iconSize = isExpanded ? 40 : 30;\n\n  const playButton = isPlaying ? (\n    <IconButton\n      aria-label=\"Pause\"\n      hideBackground={!isExpanded}\n      hideBorder={!isExpanded}\n      onClick={audio.onPause}\n      size={iconSize + 10}\n    >\n      <Pause />\n    </IconButton>\n  ) : (\n    <IconButton\n      aria-label=\"Play\"\n      disabled={isLoading || !hasTrack}\n      hideBackground={!isExpanded}\n      hideBorder={!isExpanded}\n      onClick={() => audio.onResume()}\n      size={iconSize + 10}\n    >\n      <PlayArrow fontSize={isExpanded ? \"large\" : \"default\"} />\n    </IconButton>\n  );\n\n  const inner = isExpanded ? (\n    <Expanded>\n      <Header>\n        <TrackName>{audio.playlist?.data?.data?.title}</TrackName>\n        <IconButton\n          aria-label=\"expand\"\n          hideBorder\n          onClick={() => setIsExpanded(false)}\n        >\n          <ExpandMore fontSize={isExpanded ? \"default\" : \"small\"} />\n        </IconButton>\n      </Header>\n      <PlaylistImage playlist={audio.playlist} size=\"100%\" />\n      <InfoWrapper>\n        <TrackName>{removeExtension(audio.track?.name)}</TrackName>\n        <Artist>{audio.playlist?.data?.artist}</Artist>\n      </InfoWrapper>\n      <Position />\n      <Buttons>\n        <IconButton\n          aria-label=\"Previous\"\n          disabled={!audio.hasPrevious}\n          hideBorder\n          onClick={audio.onPrevious}\n          size={iconSize}\n        >\n          <SkipPrevious fontSize=\"small\" />\n        </IconButton>\n        {playButton}\n        <IconButton\n          aria-label=\"Next\"\n          disabled={!audio.hasNext}\n          hideBorder\n          onClick={audio.onNext}\n          size={iconSize}\n        >\n          <SkipNext fontSize={isExpanded ? \"default\" : \"small\"} />\n        </IconButton>\n      </Buttons>\n    </Expanded>\n  ) : (\n    <Collapsed>\n      {playButton}\n      <div onClick={() => setIsExpanded(true)}>\n        <SongDetails playlist={audio.playlist} track={audio.track} />\n      </div>\n    </Collapsed>\n  );\n\n  return <Wrapper isExpanded={isExpanded}>{inner}</Wrapper>;\n}\n\nexport default MobilePlayer;\n","import React from \"react\";\n\nimport { useSize } from \"../../../hooks\";\n\nimport DesktopPlayer from \"./DesktopPlayer\";\nimport MobilePlayer from \"./MobilePlayer\";\n\nfunction Player() {\n  const size = useSize();\n\n  const isSmall = size === \"small\";\n\n  return isSmall ? <MobilePlayer /> : <DesktopPlayer />;\n}\n\nexport default Player;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Redirect } from \"@reach/router\";\n\nimport Header from \"./Header\";\nimport Player from \"./Player\";\nimport { useDropbox } from \"../../hooks\";\n\nconst Content = styled.main`\n  background-color: ${(p) => p.theme.color.background};\n  overflow-y: scroll;\n  padding-bottom: 113px;\n`;\n\nconst Inner = styled.div`\n  max-width: 1150px;\n  margin: 0 auto;\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n`;\n\nfunction Main({ children, location }) {\n  const { isAuthenticated } = useDropbox();\n\n  if (!isAuthenticated && !location.pathname.includes(\"/auth\")) {\n    return <Redirect noThrow={true} to=\"auth\" />;\n  }\n\n  return (\n    <Wrapper>\n      <Header location={location} />\n      <Content>\n        <Inner>{children}</Inner>\n      </Content>\n      <Player />\n    </Wrapper>\n  );\n}\n\nexport default Main;\n","import React, { useEffect, useState } from \"react\";\n\nimport Button from \"./Button\";\n\nfunction ConfirmationButton({ message, onClick, ...props }) {\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setIsConfirming(false);\n    }, 2000);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [isConfirming]);\n\n  function onConfirm() {\n    setIsConfirming(true);\n  }\n\n  return isConfirming ? (\n    <Button onBlur={() => setIsConfirming(false)} onClick={onClick}>\n      {message || \"Are you sure?\"}\n    </Button>\n  ) : (\n    <Button onClick={onConfirm} {...props} />\n  );\n}\n\nexport default ConfirmationButton;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport formatRelative from \"date-fns/formatRelative\";\n\nimport IconButton from \"../IconButton\";\n\nimport Delete from \"@material-ui/icons/Delete\";\nimport Headset from \"@material-ui/icons/Headset\";\nimport PlayArrow from \"@material-ui/icons/PlayArrow\";\n\nimport { removeExtension } from \"../../utils\";\nimport { useSize } from \"../../hooks\";\n\nconst Inner = styled.div`\n  align-items: center;\n  display: grid;\n  line-height: 20px;\n  grid-gap: 5px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? 35 : 40)}px 20px 1fr ${(\n      p\n    ) => (p.size === \"small\" || p.isEditable ? \"\" : \"auto\")};\n  padding: ${(p) =>\n    p.size === \"small\"\n      ? `${p.theme.space.medium}px ${p.theme.space.small}`\n      : p.theme.space.medium}px;\n`;\n\nconst Play = styled.span`\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ${(p) => (p.isPlaying ? \"white\" : \"transparent\")};\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 20px;\n  width: 30px;\n`;\n\nconst Updated = styled.span`\n  color: ${(p) => p.theme.color.secondary};\n  display: grid;\n  font-size: 11px;\n  line-height: 15px;\n  text-align: right;\n`;\n\nconst UpdatedBy = styled.span`\n  color: ${(p) => p.theme.color.disabled};\n`;\n\nconst TrackName = styled.span`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nconst Wrapper = styled.button`\n  ${(p) => p.theme.typography.base}\n  background-color: ${(p) =>\n    p.theme.color[p.isPlaying ? \"bgHighlight\" : \"background\"]};\n  border: none;\n  border-top: 1px solid ${(p) => p.theme.color.bgHighlight};\n  color: ${(p) => p.theme.color[p.isPlaying ? \"highlight\" : \"inherit\"]};\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ${(p) => p.theme.color.primary}11;\n\n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n`;\n\nfunction Track({\n  index,\n  isEditable,\n  isPlaying,\n  onClick,\n  onDelete,\n  track,\n  user,\n}) {\n  const size = useSize();\n\n  return (\n    <Wrapper\n      isPlaying={isPlaying}\n      onClick={isEditable ? undefined : () => onClick(track)}\n    >\n      <Inner isEditable={isEditable} size={size}>\n        {isEditable ? (\n          <IconButton onClick={() => onDelete(track)}>\n            <Delete fontSize=\"small\" />\n          </IconButton>\n        ) : (\n          <Play id=\"play\" isPlaying={isPlaying}>\n            {isPlaying ? (\n              <Headset fontSize=\"small\" />\n            ) : (\n              <PlayArrow fontSize=\"small\" />\n            )}\n          </Play>\n        )}\n        <span>{index}.</span>\n        <TrackName>{removeExtension(track.name)}</TrackName>\n        {size !== \"small\" && !isEditable && (\n          <Updated>\n            <span>\n              Updated{\" \"}\n              {formatRelative(new Date(track.server_modified), new Date())}\n            </span>\n            {user && <UpdatedBy>by {user.name.display_name}</UpdatedBy>}\n          </Updated>\n        )}\n      </Inner>\n    </Wrapper>\n  );\n}\n\nexport default Track;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport DragIndicator from \"@material-ui/icons/DragIndicator\";\n\nimport List from \"../List\";\nimport Track from \"./Track\";\n\nimport { getModifiedBy, reorderList } from \"../../utils\";\n\nconst DragHandle = styled.div`\n  align-items: center;\n  color: ${(p) => p.theme.color.primary};\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n`;\n\nconst TrackWrapper = styled.div`\n  position: relative;\n`;\n\nfunction trackListPropsAreEqual(prev, next) {\n  return (\n    prev.playingId === next.playingId &&\n    prev.tracks.map((t) => t.id).join() === next.tracks.map((t) => t.id).join()\n  );\n}\n\nconst EditableTrackList = React.memo(function EditableTrackList({\n  onTrackClick,\n  onTrackDelete,\n  playingId,\n  tracks,\n}) {\n  return (\n    <List\n      getKey={(t) => t.id}\n      items={tracks}\n      itemRenderer={(track, index) => (\n        <Draggable draggableId={track.id} index={index}>\n          {(provided) => (\n            <TrackWrapper ref={provided.innerRef} {...provided.draggableProps}>\n              <Track\n                index={index + 1}\n                isEditable={true}\n                isPlaying={playingId === track.id}\n                onClick={onTrackClick}\n                onDelete={onTrackDelete}\n                track={track}\n              />\n              <DragHandle {...provided.dragHandleProps}>\n                <DragIndicator />\n              </DragHandle>\n            </TrackWrapper>\n          )}\n        </Draggable>\n      )}\n    />\n  );\n},\ntrackListPropsAreEqual);\n\nfunction TrackList({\n  isEditing,\n  onTrackChange,\n  onTrackClick,\n  onTrackDelete,\n  playingId,\n  tracks,\n  users,\n}) {\n  function handleSort(result) {\n    if (\n      !result.destination ||\n      result.destination.index === result.source.index\n    ) {\n      return;\n    }\n\n    const reordered = reorderList(\n      tracks,\n      result.source.index,\n      result.destination.index\n    );\n\n    onTrackChange(reordered);\n  }\n\n  function handleDelete(track) {\n    onTrackChange(tracks.filter((t) => t.id !== track.id));\n  }\n\n  return isEditing ? (\n    <DragDropContext onDragEnd={handleSort}>\n      <Droppable droppableId=\"tracks\">\n        {(provided) => (\n          <div ref={provided.innerRef} {...provided.droppableProps}>\n            <EditableTrackList\n              onTrackClick={onTrackClick}\n              onTrackDelete={handleDelete}\n              playingId={playingId}\n              tracks={tracks}\n            />\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  ) : (\n    <List\n      getKey={(t) => t.id}\n      items={tracks}\n      itemRenderer={(track, index) => (\n        <Track\n          index={index + 1}\n          isPlaying={playingId === track.id}\n          onClick={onTrackClick}\n          track={track}\n          user={users[getModifiedBy(track)]}\n        />\n      )}\n    />\n  );\n}\n\nexport default TrackList;\n","import React, { Fragment, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport Button from \"../Button\";\nimport ButtonLink from \"../ButtonLink\";\nimport ConfirmationButton from \"../ConfirmationButton\";\nimport Loader from \"../Loader\";\nimport PlaylistHeader from \"../PlaylistHeader\";\nimport PlaylistImage from \"../PlaylistImage\";\nimport TextInput from \"../TextInput\";\nimport TrackList from \"./TrackList\";\n\nimport { HOME } from \"../../constants\";\nimport { useAudio, usePlaylists, useSize } from \"../../hooks\";\n\nconst Actions = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n`;\n\nconst Add = styled.div`\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: ${(p) =>\n    p.size === \"small\" ? \"space-between\" : \"flex-start\"};\n  padding: 20px;\n`;\n\nconst Header = styled.div`\n  align-items: ${(p) => (p.isEditing ? \"flex-start\" : \"center\")};\n  display: grid;\n  grid-gap: ${(p) => (p.isEditing ? 40 : 20)}px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? \"1fr\" : \"1fr auto\")};\n  padding: 20px;\n`;\n\nconst ImageEdit = styled.div`\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 50px 1fr;\n`;\n\nconst Inputs = styled.div`\n  display: grid;\n  grid-gap: 20px;\n`;\n\nfunction Playlist({ navigate, playlistId }) {\n  const {\n    isLoading,\n    onDeletePlaylist,\n    onSavePlaylist,\n    playlist: savedPlaylist,\n    users,\n  } = usePlaylists({\n    playlistId,\n  });\n  const [isDirty, setIsDirty] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [playlist, setPlaylist] = useState(savedPlaylist);\n  const audio = useAudio();\n  const size = useSize();\n\n  function handleCancelEdit() {\n    setIsDirty(false);\n    setIsEditing(false);\n    setPlaylist(savedPlaylist);\n  }\n\n  async function handleDelete() {\n    await onDeletePlaylist(playlist);\n    navigate(HOME);\n  }\n\n  function handleTrackChange(tracks) {\n    setPlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        tracks,\n      },\n    });\n    setIsDirty(true);\n  }\n\n  function handleToggleEdit() {\n    if (isEditing) {\n      if (isDirty) {\n        onSavePlaylist(playlist);\n      }\n      setIsDirty(false);\n      setIsEditing(false);\n    } else {\n      setIsEditing(true);\n      setPlaylist(savedPlaylist);\n    }\n  }\n\n  function handleArtistChange(artist) {\n    setPlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        artist,\n      },\n    });\n    setIsDirty(true);\n  }\n\n  function handleTitleChange(title) {\n    setPlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        title,\n      },\n    });\n    setIsDirty(true);\n  }\n\n  function handleTrackClick(track) {\n    audio.onPlay({ playlistId, trackId: track.id });\n  }\n\n  return (\n    <div>\n      {isEditing ? (\n        <Header isEditing={isEditing} size={size}>\n          <Inputs>\n            <ImageEdit>\n              <PlaylistImage playlist={playlist} />\n              <ButtonLink to=\"image\">Edit Image</ButtonLink>\n            </ImageEdit>\n            <TextInput\n              onChange={handleTitleChange}\n              title=\"Title\"\n              value={playlist.data.title}\n            />\n            <TextInput\n              onChange={handleArtistChange}\n              title=\"Artist\"\n              value={playlist.data.artist || \"\"}\n            />\n          </Inputs>\n          <Actions>\n            <Fragment>\n              <Button disabled={!isDirty} onClick={handleToggleEdit}>\n                Save\n              </Button>\n              <Button onClick={handleCancelEdit}>Cancel</Button>\n            </Fragment>\n          </Actions>\n        </Header>\n      ) : (\n        <Header isEditing={isEditing} size={size}>\n          <PlaylistHeader playlist={playlist} />\n          <Actions>\n            <Button onClick={handleToggleEdit}>Edit</Button>\n            <ConfirmationButton message=\"Really Delete?\" onClick={handleDelete}>\n              Delete\n            </ConfirmationButton>\n          </Actions>\n        </Header>\n      )}\n      {isEditing && (\n        <Add size={size}>\n          <h2>Tracks</h2>\n          <ButtonLink to=\"tracks\">Add Tracks</ButtonLink>\n        </Add>\n      )}\n      <Loader isLoading={isLoading} />\n      <TrackList\n        isEditing={isEditing}\n        onTrackChange={handleTrackChange}\n        onTrackClick={handleTrackClick}\n        playingId={audio.track?.id}\n        tracks={playlist.data.tracks}\n        users={users}\n      />\n    </div>\n  );\n}\n\nexport default Playlist;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"@reach/router\";\n\nimport Button from \"./Button\";\nimport ButtonLink from \"./ButtonLink\";\nimport Explorer from \"./Explorer\";\nimport PlaylistHeader from \"./PlaylistHeader\";\n\nimport { makeRelativeUrl } from \"../constants\";\nimport { usePlaylists, useSize } from \"../hooks\";\n\nconst Actions = styled.div`\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n`;\n\nconst Header = styled.div`\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: ${(p) => (p.size === \"small\" ? \"1fr\" : \"1fr auto\")};\n  padding: 20px;\n`;\n\nfunction Tracks({ playlistId }) {\n  const { isLoading, onSavePlaylist, playlist } = usePlaylists({ playlistId });\n  const [selectedTracks, setSelectedTracks] = useState([]);\n  const [isDirty, setIsDirty] = useState(false);\n  const navigate = useNavigate();\n  const size = useSize();\n\n  const playlistUrl = makeRelativeUrl(`/playlist/${playlistId}`);\n\n  useEffect(() => {\n    setSelectedTracks(playlist?.data?.tracks || []);\n  }, [isLoading, playlist]);\n\n  function handleSave() {\n    onSavePlaylist({\n      ...playlist,\n      data: {\n        ...playlist.data,\n        tracks: selectedTracks,\n      },\n    });\n    navigate(playlistUrl);\n  }\n\n  function handleSelectionChange(tracks) {\n    setSelectedTracks(tracks);\n    if (!isDirty) {\n      setIsDirty(true);\n    }\n  }\n\n  return (\n    <div>\n      <Header size={size}>\n        <PlaylistHeader playlist={playlist} />\n        <Actions>\n          <Button disabled={!isDirty} onClick={handleSave}>\n            Save\n          </Button>\n          <ButtonLink to={playlistUrl}>Cancel</ButtonLink>\n        </Actions>\n      </Header>\n      <Explorer\n        onSelectionChange={handleSelectionChange}\n        selectedEntries={selectedTracks}\n        showFiles={true}\n      />\n    </div>\n  );\n}\n\nexport default Tracks;\n","import React from \"react\";\nimport { Router } from \"@reach/router\";\nimport { ThemeProvider } from \"styled-components\";\nimport {\n  ThemeProvider as MuiThemeProvider,\n  createTheme,\n} from \"@material-ui/core/styles\";\nimport blue from \"@material-ui/core/colors/blue\";\n\nimport {\n  AudioProvider,\n  CacheProvider,\n  DropboxProvider,\n  ErrorBoundary,\n} from \"../hooks\";\nimport { HOME } from \"../constants\";\nimport theme from \"../theme\";\n\nimport Auth from \"./Auth\";\nimport AddPlaylist from \"./AddPlaylist\";\nimport ImageExplorer from \"./ImageExplorer\";\nimport Home from \"./Home\";\nimport Main from \"./Main\";\nimport Playlist from \"./Playlist\";\nimport Tracks from \"./Tracks\";\n\nconst muiTheme = createTheme({\n  palette: {\n    primary: blue,\n  },\n});\n\nfunction getAuthUrl() {\n  // /auth will be in prod but not local so try to strip it\n  // and the trailing slash that could be there\n  const base = window.location.href.replace(\"/auth\", \"\").replace(/\\/$/, \"\");\n  return `${base}/auth`;\n}\n\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <MuiThemeProvider theme={muiTheme}>\n        <ThemeProvider theme={theme}>\n          <CacheProvider>\n            <DropboxProvider authUrl={getAuthUrl()}>\n              <AudioProvider>\n                <Router basepath={HOME}>\n                  <Main path=\"/\">\n                    <Auth path=\"auth\" />\n                    <AddPlaylist path=\"new\" />\n                    <Playlist path=\"playlist/:playlistId\" />\n                    <ImageExplorer path=\"playlist/:playlistId/image\" />\n                    <Tracks path=\"playlist/:playlistId/tracks\" />\n                    <Home path=\"/\" />\n                  </Main>\n                </Router>\n              </AudioProvider>\n            </DropboxProvider>\n          </CacheProvider>\n        </ThemeProvider>\n      </MuiThemeProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./utils/serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}