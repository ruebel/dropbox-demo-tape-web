(this["webpackJsonpdropbox-demo-tape-web"]=this["webpackJsonpdropbox-demo-tape-web"]||[]).push([[0],{79:function(n,e,t){n.exports=t(95)},84:function(n,e,t){},95:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(11),i=t.n(o),c=(t(84),t(20)),u=t(2),l=t(74),s=t(122),d=t(73),f=t.n(d),p=t(8),m=t.n(p),v=t(13),h=t(4),b=t(9),g=t(34),y=t(25);var j=function(n,e){var t=Object(r.useState)((function(){try{var t=window.localStorage.getItem(n);return t?JSON.parse(t):e}catch(r){return console.log(r),e}})),a=Object(h.a)(t,2),o=a[0],i=a[1];return[o,function(e){try{var t=e instanceof Function?e(o):e;i(t),window.localStorage.setItem(n,JSON.stringify(t))}catch(r){console.log(r)}}]},x=Object(r.createContext)();function E(n){var e=n.children,t=n.initialState,o=void 0===t?{}:t,i=j("ddt",o),c=Object(h.a)(i,2),u=c[0],l=c[1],s=Object(r.useState)(u),d=Object(h.a)(s,2),f=d[0],p=d[1];Object(r.useEffect)((function(){l(f)}),[f]);var m={getValue:function(n){return f[n]},setValue:function(n,e){p((function(t){return Object(b.a)({},t,Object(y.a)({},n,e))}))},resetCache:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p((function(){return Object(b.a)({},o,{},n)}))},state:f};return a.a.createElement(x.Provider,{value:m},e)}function O(){var n=Object(r.useContext)(x);if(void 0===n)throw new Error("useCache must be used within a CacheProvider");return n}var k=t(49);var w=function(n){var e=Object.create(null);return"string"!==typeof n?e:(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=t.shift(),a=t.length>0?t.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===e[r]?e[r]=a:Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]})),e):e},C=r.createContext();function S(n){var e=n.authUrl,t=n.children,a=O(),o=r.useState(a.getValue("currentUser")),i=Object(h.a)(o,2),c=i[0],u=i[1],l=r.useState(null),s=Object(h.a)(l,2),d=s[0],f=s[1],p=r.useState(a.getValue("accessToken")),b=Object(h.a)(p,2),g=b[0],y=b[1],j=r.useState(null),x=Object(h.a)(j,2),E=x[0],S=x[1],I=r.useState(null),P=Object(h.a)(I,2),D=P[0],T=P[1];r.useEffect((function(){var n=new k.Dropbox({accessToken:g,clientId:"ie394xarjsfdxr0"});T(n);var t=n.getAuthenticationUrl(e);t?S(t):f("Invalid Dropbox Id")}),[]),r.useEffect((function(){function n(){return(n=Object(v.a)(m.a.mark((function n(){var e;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.usersGetCurrentAccount();case 2:e=n.sent,u(e),a.setValue("currentUser",e);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}g&&!c&&D&&function(){n.apply(this,arguments)}()}),[g,D]);var A={accessToken:g,authHref:E,currentUser:c,dbx:D,error:d,isAuthenticated:null===D||void 0===D?void 0:D.accessToken,onLogout:function(){y(""),u(null),T(null),a.resetCache({clientId:"ie394xarjsfdxr0"})},parseAcessToken:function(n){var e=w(window.location.hash).access_token;T(new k.Dropbox({accessToken:e,clientId:"ie394xarjsfdxr0"})),a.setValue("accessToken",e),y(e)}};return r.createElement(C.Provider,{value:A},t)}function I(){var n=r.useContext(C);if(void 0===n)throw new Error("useCache must be used within a DropboxContext");return n}var P=function(){var n=O(),e=I(),t=e.dbx,a=e.isAuthenticated,o=Object(r.useState)(!1),i=Object(h.a)(o,2),c=i[0],u=i[1],l=Object(r.useState)(n.getValue("users")||{}),s=Object(h.a)(l,2),d=s[0],f=s[1];function p(){return(p=Object(v.a)(m.a.mark((function n(e){var r,o,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((r=e.filter((function(n){return!d[n]}))).length>0&&t&&a)){n.next=16;break}return u(!0),n.prev=3,n.next=6,t.usersGetAccountBatch({account_ids:r});case 6:return o=n.sent,g(i=o.reduce((function(n,e){return Object(b.a)({},n,Object(y.a)({},e.account_id,e))}),d)),u(!1),n.abrupt("return",i);case 13:n.prev=13,n.t0=n.catch(3),console.error(n.t0);case 16:return n.abrupt("return",d);case 17:case"end":return n.stop()}}),n,null,[[3,13]])})))).apply(this,arguments)}function g(e){f(e),n.setValue("users",e)}return{data:d,isLoading:c,fetchUsers:function(n){return p.apply(this,arguments)}}};function D(n){return n.meta.id}function T(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.substring(0,n.lastIndexOf("."))}function A(n,e,t,r){return n.map((function(n){return t(n)===e?r:n}))}function z(n,e,t){return _.apply(this,arguments)}function _(){return(_=Object(v.a)(m.a.mark((function n(e,t,r){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.filesUpload({autorename:!1,contents:JSON.stringify(t),mode:{".tag":"overwrite"},mute:!0,path:r});case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function L(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.split(".").pop()}function F(n){var e;return null===n||void 0===n?void 0:null===(e=n.sharing_info)||void 0===e?void 0:e.modified_by}function B(n){return Object(g.a)(new Set(n.map(F))).filter(Boolean)}function R(n){return["mp3","m4a","ovw","wav"].includes(L(n))}function U(n){return"folder"===n[".tag"]}function M(n){return U(n)||function(n){return"file"===n[".tag"]}(n)&&R(n.name)}function N(n){return Object(b.a)({},n,{isAudioFile:R(n.name),isFolder:"folder"===n[".tag"],isPlaylist:(e=n.name,"mix"===L(e)),path:n.path_display,type:n[".tag"],user:F(n)});var e}function H(n){return V.apply(this,arguments)}function V(){return(V=Object(v.a)(m.a.mark((function n(e){var t,r,a,o,i,c,u,l=arguments;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"",r=l.length>2?l[2]:void 0,n.next=4,e.filesListFolder({path:t});case 4:return a=n.sent,o=a.cursor,i=a.entries,c=a.hasMore,u={cursor:o,data:i.filter(r?M:U).map(N),hasMore:c,path:t},n.abrupt("return",u);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var J=function(n){var e=n.forceRefresh,t=O(),a=I(),o=a.dbx,i=a.isAuthenticated,c=Object(r.useState)(!1),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(t.getValue("playlists")||[]),f=Object(h.a)(d,2),p=f[0],y=f[1],j=P().fetchUsers;function x(){return(x=Object(v.a)(m.a.mark((function n(e,t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z(o,t,e);case 2:return r=n.sent,C({data:t,meta:r},!0),n.abrupt("return",r.id);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function E(){return(E=Object(v.a)(m.a.mark((function n(e){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0),n.next=3,o.filesDelete({path:e.meta.path_lower});case 3:r=p.filter((function(n){return n.meta.id!==e.meta.id})),y(r),t.setValue("playlists",r),s(!1);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(m.a.mark((function n(e){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return C(e),n.next=3,z(o,e.data,e.meta.path_lower);case 3:t=n.sent,C(Object(b.a)({},e,{meta:t}));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=n.sort((function(n,e){return n.data.title.localeCompare(e.data.title)}));y(e),t.setValue("playlists",e)}function C(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e?[].concat(Object(g.a)(p),[n]):A(p,D(n),D,n);w(t)}return Object(r.useEffect)((function(){if(i&&o&&!l&&(e||0===p.length)){var n=function(){var n=Object(v.a)(m.a.mark((function n(){var e,t,r,a,i,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.filesSearch({path:"",query:".mix"});case 2:return e=n.sent,t=e.matches,n.next=6,Promise.all(t.map((function(n){return o.filesDownload({path:n.metadata.path_display})})));case 6:return r=n.sent,n.next=9,Promise.all(r.map((function(n){return new Promise((function(e){var t=new FileReader;t.addEventListener("loadend",(function(t){var r=t.srcElement.result,a=JSON.parse(r);e({data:a,meta:n})})),t.readAsText(n.fileBlob)}))})));case 9:return a=n.sent,i=B(r),n.next=13,j(i);case 13:c=n.sent,w((a||[]).map((function(n){return Object(b.a)({},n,{meta:Object(b.a)({},n.meta,{user:c[F(n.meta)]})})}))),s(!1);case 17:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();s(!0),n()}}),[o,i]),{data:p,isLoading:l,onCreatePlaylist:function(n,e){return x.apply(this,arguments)},onDeletePlaylist:function(n){return E.apply(this,arguments)},onSavePlaylist:function(n){return k.apply(this,arguments)}}};var K=function(n){var e=n.playlistId,t=I(),a=t.dbx,o=t.isAuthenticated,i=J({dbx:a,isAuthenticated:o}),c=i.data,u=i.isLoading,l=i.onDeletePlaylist,s=i.onSavePlaylist,d=P().fetchUsers,f=Object(r.useState)({}),p=Object(h.a)(f,2),b=p[0],g=p[1],y=c.find((function(n){return n.meta.id===e}));function j(){return(j=Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!y){n.next=2;break}return n.abrupt("return",l(y));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var n;function e(){return(e=Object(v.a)(m.a.mark((function n(e){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(e);case 2:t=n.sent,g(t);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}if(null===y||void 0===y?void 0:null===(n=y.data)||void 0===n?void 0:n.tracks){var t=B(y.data.tracks);t.length>0&&function(n){e.apply(this,arguments)}(t)}}),[y]),{data:y,isLoading:u,onDelete:function(){return j.apply(this,arguments)},onSave:function(n){s(n)},users:b}},W=Object(r.createContext)(),G="loading",q="paused",$="playing",Q="stopped",X={duration:0,playlistId:null,position:0,trackId:null,state:Q};function Y(n,e){switch(e.type){case"duration":return Object(b.a)({},n,{},e.payload);case"loaded":return"loading"===n.state?Object(b.a)({},n,{position:0,state:$}):n;case"pause":return n.state===$?Object(b.a)({},n,{state:q}):n;case"play":return Object(b.a)({},n,{},e.payload,{state:G});case"position":return Object(b.a)({},n,{},e.payload);case"resume":return Object(b.a)({},n,{state:$});case"stop":return Object(b.a)({},n,{position:0,state:Q});case"tick":return Object(b.a)({},n,{position:n.position+1e3});default:throw new Error}}function Z(n){var e=n.children,t=n.initialState,o=void 0===t?{}:t,i=Object(r.useReducer)(Y,Object(b.a)({},X,{},o)),c=Object(h.a)(i,2),u=c[0],l=u.duration,s=u.playlistId,d=u.position,f=u.state,p=u.trackId,g=c[1],y=Object(r.useRef)(),j=I().dbx,x=K({playlistId:s}),E=Object(r.useMemo)((function(){var n,e,t=p?null===x||void 0===x?void 0:null===(n=x.data)||void 0===n?void 0:n.data.tracks.findIndex((function(n){return n.id===p})):(null===x||void 0===x?void 0:null===(e=x.data)||void 0===e?void 0:e.data)?0:-1,r=t>=0?x.data.data.tracks[t]:null;return{hasNext:!!r&&t<x.data.data.tracks.length-1,hasPrevious:!!r&&t>0,track:r,trackIndex:t}}),[p,s]),O=E.hasNext,k=E.hasPrevious,w=E.track,C=E.trackIndex;function S(){O&&g({type:"play",payload:{playlistId:s,trackId:x.data.data.tracks[C+1].id}})}function P(){f!==Q&&g({type:"stop"})}Object(r.useEffect)((function(){function n(){return(n=Object(v.a)(m.a.mark((function n(){var e,t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=y.current,!w||f!==G){n.next=9;break}return n.next=4,j.filesGetTemporaryLink({path:w.path_lower});case 4:t=n.sent,e.setAttribute("src",t.link),e.play(),n.next=10;break;case 9:w&&f===$?e.play():f===q?e.pause():f===Q&&(e.pause(),e.currentTime=0);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[f,p,s]),Object(r.useEffect)((function(){if("playing"===f){var n=setInterval((function(){g({type:"tick"})}),1e3);return function(){return clearInterval(n)}}}));var D={duration:l,hasNext:O,hasPrevious:k,onNext:S,onPause:function(){f!==q&&g({type:"pause"})},onPlay:function(n){var e=n.playlistId,t=n.trackId;g({type:"play",payload:{playlistId:e,trackId:t}})},onPrevious:function(){k&&g({type:"play",payload:{playlistId:s,trackId:x.data.data.tracks[C-1].id}})},onResume:function(){f===q&&g({type:"resume"})},onSeek:function(n){w&&(y.current.currentTime=n/1e3,console.log("onseek",n),g({type:"position",payload:{position:n}}))},onStop:P,playlist:x,position:d,state:f,track:w};return a.a.createElement(W.Provider,{value:D},e,a.a.createElement("audio",{onDurationChange:function(n){var e=y.current;e&&g({type:"duration",payload:{duration:1e3*e.duration}})},onEnded:function(n){O?S():P()},onPlay:function(n){g({type:"loaded"})},onProgress:function(n){var e=y.current;e&&g({type:"position",payload:{position:1e3*e.currentTime}})},ref:y}))}function nn(){var n=Object(r.useContext)(W);if(void 0===n)throw new Error("useAudio must be used within a AudioProvider");return n}var en="/dropbox-demo-tape-web",tn=t(3);function rn(){var n=Object(tn.a)(["\n      font-size: 14px;\n      font-weight: 400;\n    "]);return rn=function(){return n},n}function an(){var n=Object(tn.a)(["\n      font-size: 16px;\n    "]);return an=function(){return n},n}var on={background:"#242A31",backgroundLight:"#2D323C",disabled:"#656565",error:"#E7777F",inherit:"inherit",primary:"#D2D2D2",secondary:"#b3b3b3",success:"#A1CA7E",transparent:"transparent",white:"#FFFFFF"},cn={color:Object(b.a)({},on,{highlight:"#5EB1BF",bgHighlight:on.primary+"11"}),typography:{base:Object(u.b)(an()),sub:Object(u.b)(rn())},space:{small:5,medium:10,large:20},transition:"all 250ms ease-in"};function un(){var n=Object(tn.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  padding: 10px 20px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: ",";\n\n  :hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return un=function(){return n},n}var ln=u.c.a(un(),(function(n){return n.theme.color.background}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.white}),(function(n){return n.theme.transition}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.background}),(function(n){return n.disabled?"\n  color: ".concat(n.theme.color.disabled,";\n  cursor: unset;\n  border-color: ").concat(n.theme.color.disabled,";\n\n  :hover {\n    background-color: ").concat(n.theme.color.background,";\n    color: ").concat(n.theme.color.disabled,";\n  }\n"):""}));var sn=function(n){return a.a.createElement(ln,Object.assign({as:n.to?c.a:void 0},n))};function dn(){var n=Object(tn.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  justify-content: center;\n  padding: 40px;\n"]);return dn=function(){return n},n}var fn=u.c.div(dn());var pn=function(){var n=I(),e=n.authHref,t=n.isAuthenticated,o=n.parseAcessToken;return!t&&window.location.hash.includes("access_token")&&o(),t?a.a.createElement(c.b,{noThrow:!0,to:en}):a.a.createElement(fn,null,a.a.createElement("h1",null,"Welcome"),a.a.createElement(r.Fragment,null,a.a.createElement(sn,{href:e},"Authenticate With Dropbox")))};function mn(){var n=Object(tn.a)(["\n  background-color: ",";\n  border-radius: 10px;\n  border: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: 14px;\n  justify-content: center;\n  outline: none;\n  padding: 10px 20px;\n  text-transform: uppercase;\n\n  transition: ",";\n\n  :hover,\n  :focus {\n    background-color: ",";\n    color: ",";\n  }\n\n  ","\n"]);return mn=function(){return n},n}var vn=u.c.button(mn(),(function(n){return n.theme.color.background}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.white}),(function(n){return n.theme.transition}),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.background}),(function(n){return n.disabled?"\n    color: ".concat(n.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(n.theme.color.disabled,";\n\n    :hover, :focus {\n      background-color: ").concat(n.theme.color.background,";\n      color: ").concat(n.theme.color.disabled,";\n    }\n  "):""})),hn=t(59),bn=t.n(hn);function gn(){var n=Object(tn.a)(["\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 700;\n  padding: 10px;\n  outline: none;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return gn=function(){return n},n}var yn=u.c.button(gn(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.highlight})),jn=function(n){var e=n.name,t=void 0===e?"Home":e,r=n.onClick,o=n.path;return a.a.createElement(yn,{onClick:function(){return r(o)}},t)};function xn(){var n=Object(tn.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding-left: 10px;\n"]);return xn=function(){return n},n}var En=u.c.div(xn());var On=function(n){var e=n.onClick,t=(n.onSort,n.path),o=(void 0===t?"":t).split("/").map((function(n,t,o){var i=o.slice(0,t+1).join("/");return a.a.createElement(r.Fragment,{key:t},0!==t&&a.a.createElement("span",null,"/"),a.a.createElement(jn,{name:n||"Home",onClick:e,path:i}))}));return a.a.createElement(En,null,a.a.createElement(bn.a,null)," ",o)},kn=t(75),wn=t(62),Cn=t.n(wn),Sn=t(60),In=t.n(Sn),Pn=t(61),Dn=t.n(Pn);function Tn(){var n=Object(tn.a)(["\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  height: 61px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n  width: 100%;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return Tn=function(){return n},n}function An(){var n=Object(tn.a)(["\n  ","\n"]);return An=function(){return n},n}function zn(){var n=Object(tn.a)(["\n  ","\n"]);return zn=function(){return n},n}function _n(){var n=Object(tn.a)(["\n  align-items: center;\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n"]);return _n=function(){return n},n}var Ln=u.c.div(_n()),Fn=u.c.span(zn(),(function(n){return n.theme.typography.base})),Bn=u.c.span(An(),(function(n){return n.theme.typography.sub})),Rn=u.c.button(Tn(),(function(n){return n.theme.color[n.isSelected?"bgHighlight":"background"]}),(function(n){return n.theme.color.bgHighlight}),(function(n){return n.theme.color[n.isSelected?"highlight":"inherit"]}),(function(n){return n.theme.space.medium}),(function(n){return n.theme.space.large}),(function(n){return n.theme.color.primary}));var Un=function(n){var e,t,r=n.entry,o=n.onClick,i=n.isSelected,c=void 0!==i&&i,u=c?In.a:r.isFolder?Dn.a:Cn.a;return a.a.createElement(Rn,{isSelected:c,onClick:function(){return o(r)}},a.a.createElement(Ln,null,a.a.createElement(u,null),a.a.createElement(Fn,null,r.name),"file"===r.type&&a.a.createElement(Bn,null,Object(kn.a)(new Date(r.server_modified))," ago"),"file"===r.type&&a.a.createElement(Bn,null,null===(e=r.user)||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.display_name)))};function Mn(){var n=Object(tn.a)(["\n  liststyletype: none;\n  margin: 0;\n  marginblockend: 0;\n  marginblockstart: 0;\n  padding: 0;\n  paddinginlinestart: 0;\n  webkitmarginafter: 0;\n  webkitmarginbefore: 0;\n  webkitpaddingstart: 0;\n  ","\n"]);return Mn=function(){return n},n}function Nn(){var n=Object(tn.a)(["\n  ","\n  color: ",";\n  font-size: 18px;\n  padding: 20px;\n"]);return Nn=function(){return n},n}var Hn=function(n,e){return e},Vn=u.c.div(Nn(),(function(n){return n.theme.typography.base}),(function(n){return n.theme.color.secondary})),Jn=u.c.ul(Mn(),(function(n){return(e=n.gap)?"\n        display: grid;\n        grid-gap: ".concat(e,"px;\n      "):"";var e}));function Kn(n){var e=n.emptyMessage,t=n.isLoading,r=n.itemRenderer,o=n.items,i=n.gap,c=n.getKey,u=void 0===c?Hn:c;if(!t&&0===o.length&&e)return a.a.createElement(Vn,null,e);var l=o.map((function(n,e){return a.a.createElement("li",{key:u(n,e)},r(n,e))}));return a.a.createElement(Jn,{gap:i},l)}Kn.defaultProps={getKey:Hn};var Wn=Kn,Gn=t(121);function qn(){var n=Object(tn.a)(["\n  height: ",";\n  width: ",";\n"]);return qn=function(){return n},n}var $n=u.c.div(qn(),(function(n){return n.height}),(function(n){return n.width}));function Qn(){var n=Object(tn.a)(["\n  margin-bottom: -4px;\n"]);return Qn=function(){return n},n}var Xn=u.c.div(Qn());var Yn=function(n){var e=n.isLoading;return a.a.createElement(Xn,null,e?a.a.createElement(Gn.a,null):a.a.createElement($n,{height:"4px"}))},Zn=t(64),ne=t.n(Zn),ee=t(63),te=t.n(ee);function re(){var n=Object(tn.a)(["\n  align-items: center;\n  background-color: transparent;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: 700;\n  line-height: 27px;\n  margin: 0;\n  outline: none;\n  padding: 0;\n\n  :hover,\n  :focus {\n    color: ",";\n  }\n"]);return re=function(){return n},n}var ae=u.c.button(re(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.highlight}));var oe=function(n){var e=n.children,t=n.onClick,r=n.sortDir,o="asc"===r?te.a:"desc"===r?ne.a:null;return a.a.createElement(ae,{onClick:t},a.a.createElement("span",null,e),o&&a.a.createElement(o,null))};var ie=function(n){var e=n.folder,t=void 0===e?"":e,a=n.showFiles,o=void 0!==a&&a,i=n.sortBy,c=void 0===i?"":i,u=n.sortDir,l=void 0===u?"":u,s=I().dbx,d=Object(r.useState)({}),f=Object(h.a)(d,2),p=f[0],g=f[1],j=Object(r.useState)(!1),x=Object(h.a)(j,2),E=x[0],O=x[1],k=P().fetchUsers;Object(r.useEffect)((function(){function n(){return(n=Object(v.a)(m.a.mark((function n(){var e,r,a,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return O(!0),n.next=3,H(s,t,o);case 3:return e=n.sent,r=B(e.data),n.next=7,k(r);case 7:a=n.sent,i=Object(b.a)({},e,{data:e.data.map((function(n){return Object(b.a)({},n,{user:a[F(n)]})}))}),g(Object(y.a)({},t,i)),O(!1);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}s&&function(){n.apply(this,arguments)}()}),[s,t]);var w=p[t]||{},C=w.cursor,S=w.data,D=void 0===S?[]:S,T=w.hasMore,A=D;return c&&l&&("name"===c?A=D.sort(function(n){var e="asc"===n?-1:1;return function(n,t){return(n.type===t.type||"folder"!==n.type&&"folder"!==t.type?n.name.localeCompare(t.name):"folder"===t.type?1:-1)*e}}(l)):"modified"===c?A=D.sort(function(n){var e="asc"===n?-1:1;return function(n,t){return(n.type===t.type||"folder"!==n.type&&"folder"!==t.type?new Date(t.server_modified)-new Date(n.server_modified):"folder"===t.type?1:-1)*e}}(l)):"modifiedBy"===c&&(A=D.sort(function(n){var e="asc"===n?-1:1;return function(n,t){var r,a,o,i;return(n.type===t.type||"folder"!==n.type&&"folder"!==t.type?null===(r=n.user)||void 0===r?void 0:null===(a=r.name)||void 0===a?void 0:a.display_name.localeCompare(null===(o=t.user)||void 0===o?void 0:null===(i=o.name)||void 0===i?void 0:i.display_name):"folder"===t.type?1:-1)*e}}(l)))),{cursor:C,files:A,folder:t,hasMore:T,isLoading:E}};function ce(){var n=Object(tn.a)(["\n  display: grid;\n"]);return ce=function(){return n},n}function ue(){var n=Object(tn.a)(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 20px 1fr 0.5fr 0.5fr;\n  padding: 0 20px;\n"]);return ue=function(){return n},n}var le=u.c.div(ue()),se=u.c.div(ce());var de=function(n){var e=n.onPathChange,t=n.onSelectionChange,o=n.selectedEntries,i=void 0===o?[]:o,c=n.showFiles,u=void 0!==c&&c,l=Object(r.useState)(""),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(""),m=Object(h.a)(p,2),v=m[0],b=m[1],y=Object(r.useState)(""),j=Object(h.a)(y,2),x=j[0],E=j[1],O=ie({folder:d,showFiles:u,sortBy:v,sortDir:x}),k=O.files,w=O.isLoading;function C(n){"folder"===n.type?(f(n.path),e&&e(n.path)):u&&(i.some((function(e){return e.id===n.id}))?t(i.filter((function(e){return e.id!==n.id}))):t([].concat(Object(g.a)(i),[n])))}function S(n){n!==v?(b(n),E("desc")):"desc"===x?E("asc"):(E(""),b(""))}return a.a.createElement(se,null,a.a.createElement(On,{onClick:f,path:d}),a.a.createElement($n,{height:"10px"}),a.a.createElement(le,null,a.a.createElement("span",null),a.a.createElement(oe,{onClick:function(){return S("name")},sortDir:"name"===v?x:null},"Name"),a.a.createElement(oe,{onClick:function(){return S("modified")},sortDir:"modified"===v?x:null},"Modified"),a.a.createElement(oe,{onClick:function(){return S("modifiedBy")},sortDir:"modifiedBy"===v?x:null},"Modified By")),a.a.createElement(Yn,{isLoading:w}),a.a.createElement(Wn,{emptyMessage:"There are no files here",isLoading:w,items:k,itemRenderer:function(n){return a.a.createElement(Un,{entry:n,isSelected:i.some((function(e){return e.path_lower===n.path_lower})),onClick:C})}}))},fe=t(46);function pe(){var n=Object(tn.a)(["\n  color: ",";\n  position: relative;\n\n  :focus-within {\n    color: ",";\n  }\n\n  ","\n"]);return pe=function(){return n},n}function me(){var n=Object(tn.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return me=function(){return n},n}function ve(){var n=Object(tn.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 10px;\n  color: inherit;\n  font-size: 16px;\n  line-height: 37px;\n  outline: none;\n  padding: 2px 15px;\n  width: 100%;\n"]);return ve=function(){return n},n}function he(){var n=Object(tn.a)(["\n  ","\n  font-size: 14px;\n  font-weight: 700;\n"]);return he=function(){return n},n}function be(){var n=Object(tn.a)(["\n  border-color: ",";\n  color: ",";\n"]);return be=function(){return n},n}var ge=Object(u.b)(be(),(function(n){return n.theme.color.error}),(function(n){return n.theme.color.error})),ye=u.c.span(he(),ge),je=u.c.input(ve(),(function(n){return n.theme.color.background}),(function(n){return n.theme.color.primary})),xe=u.c.div(me(),(function(n){return n.theme.color.background})),Ee=u.c.label(pe(),(function(n){return n.theme.color.secondary}),(function(n){return n.theme.color.white}),(function(n){return n.hasError?ge:""}));var Oe=function(n){var e=n.error,t=n.hasError,r=n.onChange,o=n.title,i=n.value,c=Object(fe.a)(n,["error","hasError","onChange","title","value"]);return a.a.createElement(Ee,{hasError:t},a.a.createElement(je,Object.assign({},c,{hasError:t,onChange:function(n){return r(n.target.value)},type:"text",value:i})),a.a.createElement(xe,null,o),e&&a.a.createElement(ye,null,e))};function ke(){var n=Object(tn.a)(["\n  display: grid;\n  grid-gap: 20px;\n  padding: 20px;\n"]);return ke=function(){return n},n}function we(){var n=Object(tn.a)([""]);return we=function(){return n},n}function Ce(){var n=Object(tn.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n"]);return Ce=function(){return n},n}function Se(){var n=Object(tn.a)(["\n  border: 1px solid ",";\n  border-radius: 10px;\n  max-height: 480px;\n  padding: 5px;\n  position: relative;\n"]);return Se=function(){return n},n}function Ie(){var n=Object(tn.a)(["\n  background-color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  left: 10px;\n  padding: 0 5px;\n  position: absolute;\n  top: -6px;\n"]);return Ie=function(){return n},n}function Pe(){var n=Object(tn.a)(["\n  overflow-y: scroll;\n  height: 470px;\n"]);return Pe=function(){return n},n}var De=u.c.div(Pe()),Te=u.c.div(Ie(),(function(n){return n.theme.color.background})),Ae=u.c.div(Se(),(function(n){return n.theme.color.primary})),ze=u.c.div(Ce()),_e=u.c.h2(we()),Le=u.c.form(ke());var Fe=function(n){var e=n.navigate,t=Object(r.useState)(""),o=Object(h.a)(t,2),i=o[0],c=o[1],u=Object(r.useState)(""),l=Object(h.a)(u,2),s=l[0],d=l[1],f=Object(r.useState)("/"),p=Object(h.a)(f,2),b=p[0],g=p[1],y=J({}).onCreatePlaylist,j=!!i&&!!s&&!!b;function x(){return(x=Object(v.a)(m.a.mark((function n(t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,y("".concat(b,"/").concat(s,".mix"),{artist:i,title:s,tracks:[]});case 3:return r=n.sent,e("/playlist/".concat(r)),n.abrupt("return",!1);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return a.a.createElement(Le,{onSubmit:j?function(n){return x.apply(this,arguments)}:void 0},a.a.createElement(ze,null,a.a.createElement(_e,null,"Add Playlist"),a.a.createElement(vn,{disabled:!j,type:"submit"},"Save"),a.a.createElement(sn,{to:en},"Cancel")),a.a.createElement(Oe,{onChange:d,title:"Title",value:s}),a.a.createElement(Oe,{onChange:c,title:"Artist",value:i}),a.a.createElement(Ae,null,a.a.createElement(De,null,a.a.createElement(de,{onPathChange:g})),a.a.createElement(Te,null,"Location")))},Be=t(44);function Re(){var n=Object(tn.a)(["\n  color: ",";\n  cursor: pointer;\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n  }\n"]);return Re=function(){return n},n}var Ue=Object(u.c)(c.a)(Re(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.highlight}));function Me(){var n=Object(tn.a)(["\n  display: grid;\n"]);return Me=function(){return n},n}function Ne(){var n=Object(tn.a)(["\n  ","\n  align-items: center;\n  background-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  line-height: 30px;\n  outline: none;\n  padding: ","px ","px;\n  text-align: left;\n\n  :hover {\n    background-color: ","11;\n  }\n"]);return Ne=function(){return n},n}function He(){var n=Object(tn.a)(["\n  ","\n  color: ",";\n"]);return He=function(){return n},n}function Ve(){var n=Object(tn.a)(["\n  ","\n  text-align: right;\n"]);return Ve=function(){return n},n}function Je(){var n=Object(tn.a)(["\n  color: ",";\n"]);return Je=function(){return n},n}function Ke(){var n=Object(tn.a)([""]);return Ke=function(){return n},n}function We(){var n=Object(tn.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px;\n"]);return We=function(){return n},n}var Ge=u.c.div(We()),qe=u.c.h2(Ke()),$e=u.c.div(Je(),(function(n){return n.theme.color.disabled})),Qe=u.c.span(Ve(),(function(n){return n.theme.typography.sub})),Xe=u.c.span(He(),(function(n){return n.theme.typography.sub}),(function(n){return n.theme.color.secondary})),Ye=u.c.div(Ne(),(function(n){return n.theme.typography.base}),(function(n){return n.theme.color[n.isPlaying?"bgHighlight":"background"]}),(function(n){return n.theme.color.bgHighlight}),(function(n){return n.theme.color[n.isPlaying?"highlight":"inherit"]}),(function(n){return n.theme.space.medium}),(function(n){return n.theme.space.large}),(function(n){return n.theme.color.primary})),Ze=u.c.div(Me());var nt=function(){var n=J({forceRefresh:!0});return a.a.createElement("div",null,a.a.createElement(Ge,null,a.a.createElement(sn,{to:"new"},"Add")),a.a.createElement(Yn,{isLoading:n.isLoading}),a.a.createElement(Wn,{getKey:function(n){return n.meta.id},items:n.data,itemRenderer:function(n){var e,t,r=null===(e=n.meta.user)||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.display_name;return a.a.createElement(Ue,{to:"playlist/".concat(n.meta.id)},a.a.createElement(Ye,null,a.a.createElement(Ze,null,a.a.createElement(qe,null,n.data.title),a.a.createElement(Xe,null,n.data.artist||n.meta.path_display)),a.a.createElement(Qe,null,"Updated"," ",Object(Be.a)(new Date(n.meta.server_modified),new Date),a.a.createElement($e,null,Boolean(r)?"by ":"",r))))}}))};var et=function(){return a.a.createElement(nt,null)},tt=t(65),rt=t.n(tt),at=t(123),ot=t(124);function it(){var n=Object(tn.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  height: ","px;\n  width: ","px;\n"]);return it=function(){return n},n}function ct(){var n=Object(tn.a)(["\n  font-size: 16px;\n"]);return ct=function(){return n},n}function ut(){var n=Object(tn.a)([""]);return ut=function(){return n},n}var lt=u.c.img(ut()),st=u.c.span(ct()),dt=u.c.div(it(),(function(n){return n.theme.color.primary}),(function(n){return n.theme.color.background}),(function(n){return n.size}),(function(n){return n.size}));var ft=function(n){var e=n.initials,t=n.name,o=n.size,i=void 0===o?36:o,c=n.url,u=Object(r.useState)(!1),l=Object(h.a)(u,2),s=l[0],d=l[1];return Object(r.useEffect)((function(){c&&s&&d(!1)}),[c]),a.a.createElement(dt,{size:i},c&&!s?a.a.createElement(lt,{alt:t||e,onError:function(){return d(!0)},src:c}):a.a.createElement(st,null,e))};function pt(){var n=Object(tn.a)(["\n  align-items: center;\n  background-color: ",";\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 20px;\n"]);return pt=function(){return n},n}function mt(){var n=Object(tn.a)(["\n  background: transparent;\n  border: none;\n  margin: 0;\n  outline: none;\n  padding: 0;\n"]);return mt=function(){return n},n}function vt(){var n=Object(tn.a)(["\n  padding-left: 10px;\n"]);return vt=function(){return n},n}function ht(){var n=Object(tn.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n"]);return ht=function(){return n},n}var bt=u.c.div(ht()),gt=u.c.h1(vt()),yt=u.c.button(mt()),jt=u.c.div(pt(),(function(n){return n.theme.color.backgroundLight}));var xt=function(n){n.location;var e=Object(r.useState)(null),t=Object(h.a)(e,2),o=t[0],i=t[1],c=I(),u=c.currentUser,l=c.onLogout;return a.a.createElement(jt,null,a.a.createElement(Ue,{to:en},a.a.createElement(bt,null,a.a.createElement(rt.a,{fontSize:"large"}),a.a.createElement(gt,null,"Demo Tape"))),a.a.createElement("span",null),u&&a.a.createElement(r.Fragment,null,a.a.createElement(yt,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(n){i(n.currentTarget)}},a.a.createElement(ft,{initials:null===u||void 0===u?void 0:u.name.abbreviated_name,name:null===u||void 0===u?void 0:u.name.display_name,url:null===u||void 0===u?void 0:u.profile_photo_url})),a.a.createElement(at.a,{elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},id:"user-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){i(null)}},a.a.createElement(ot.a,{onClick:function(){l()}},"Logout"))))},Et=t(67),Ot=t.n(Et),kt=t(43),wt=t.n(kt),Ct=t(68),St=t.n(Ct),It=t(66),Pt=t.n(It);function Dt(){var n=Object(tn.a)(["\n  background-color: ",";\n  border: ",";\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  transition: ",";\n  width: ","px;\n\n  :hover,\n  :focus {\n    background-color: white;\n    color: ",";\n  }\n\n  ","\n"]);return Dt=function(){return n},n}var Tt=u.c.button(Dt(),(function(n){return n.theme.color.background}),(function(n){return n.hideBorder?"none":"1px solid white"}),(function(n){return n.size||30}),(function(n){return n.theme.transition}),(function(n){return n.size||30}),(function(n){return n.theme.color.background}),(function(n){return n.disabled?"\n    color: ".concat(n.theme.color.disabled,";\n    cursor: unset;\n    border-color: ").concat(n.theme.color.transparent,";\n\n    :hover, :focus {\n      background-color: ").concat(n.theme.color.background,";\n      color: ").concat(n.theme.color.disabled,";\n    }\n  "):""}));function At(n){var e=n/1e3,t=Math.floor(e%60);return zt(Math.floor(e/60))+":"+zt(t)}function zt(n){var e=n.toString();return n<10?"0"+e:e}function _t(){var n=Object(tn.a)(["\n  align-items: center;\n  color: ",";\n  display: grid;\n  grid-template-columns: 80px 1fr 80px;\n  grid-gap: 5px;\n"]);return _t=function(){return n},n}function Lt(){var n=Object(tn.a)(["\n  text-align: right;\n"]);return Lt=function(){return n},n}var Ft=u.c.span(Lt()),Bt=u.c.div(_t(),(function(n){return n.theme.color[n.isDisabled?"disabled":"primary"]}));var Rt=function(){var n=nn(),e=Object(r.useState)(0),t=Object(h.a)(e,2),o=t[0],i=t[1],c=Object(r.useState)(!1),u=Object(h.a)(c,2),l=u[0],s=u[1],d=Object(r.useRef)(),f=l?o:n.position;return a.a.createElement(Bt,{isDisabled:!n.track},a.a.createElement(Ft,null,At(f)),a.a.createElement("input",{type:"range",disabled:!n.track,min:0,max:n.duration,onChange:function(n){i(d.current.value)},onMouseDown:function(n){s(!0)},onMouseUp:function(e){!function(e){s(!1);var t=parseInt(d.current.value);isNaN(t)||n.onSeek(t)}()},ref:d,value:f}),a.a.createElement("span",null,At(n.duration)))};function Ut(){var n=Object(tn.a)(["\n  display: grid;\n  grid-gap: 2px;\n"]);return Ut=function(){return n},n}function Mt(){var n=Object(tn.a)(["\n  ","\n  font-weight: 500;\n"]);return Mt=function(){return n},n}function Nt(){var n=Object(tn.a)(["\n  ","\n  color: ",";\n"]);return Nt=function(){return n},n}var Ht=u.c.div(Nt(),(function(n){return n.theme.typography.sub}),(function(n){return n.theme.color.disabled})),Vt=u.c.div(Mt(),(function(n){return n.theme.typography.base})),Jt=u.c.div(Ut());var Kt=function(n){var e,t,r,o,i=n.playlist,c=n.track;return a.a.createElement(Jt,null,a.a.createElement(Vt,null,T(null===c||void 0===c?void 0:c.name)),a.a.createElement(Ht,null,(null===i||void 0===i?void 0:null===(e=i.data)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.author)||(null===i||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.title)))};function Wt(){var n=Object(tn.a)(["\n  align-items: center;\n  background-color: ",";\n  bottom: 0;\n  display: grid;\n  grid-template-columns: minmax(200px, 0.5fr) 1fr;\n  padding: 10px 20px;\n  position: absolute;\n  width: 100%;\n"]);return Wt=function(){return n},n}function Gt(){var n=Object(tn.a)(["\n  display: grid;\n  flex: 1;\n  grid-gap: 5px;\n  max-width: 700px;\n"]);return Gt=function(){return n},n}function qt(){var n=Object(tn.a)(["\n  display: flex;\n  justify-content: center;\n"]);return qt=function(){return n},n}function $t(){var n=Object(tn.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n  justify-content: center;\n"]);return $t=function(){return n},n}var Qt=u.c.div($t()),Xt=u.c.div(qt()),Yt=u.c.div(Gt()),Zt=u.c.div(Wt(),(function(n){return n.theme.color.backgroundLight}));var nr=function(){var n=nn(),e=!!n.track,t=n.state===$,r=n.state===G;return a.a.createElement(Zt,null,a.a.createElement(Kt,{playlist:n.playlist,track:n.track}),a.a.createElement(Xt,null,a.a.createElement(Yt,null,a.a.createElement(Qt,null,a.a.createElement(Tt,{"aria-label":"Previous",disabled:!n.hasPrevious,hideBorder:!0,onClick:n.onPrevious},a.a.createElement(Pt.a,{fontSize:"small"})),t?a.a.createElement(Tt,{"aria-label":"Pause",onClick:n.onPause,size:40},a.a.createElement(Ot.a,null)):a.a.createElement(Tt,{"aria-label":"Play",disabled:r||!e,onClick:function(){return n.onResume()},size:40},a.a.createElement(wt.a,null)),a.a.createElement(Tt,{"aria-label":"Next",disabled:!n.hasNext,hideBorder:!0,onClick:n.onNext},a.a.createElement(St.a,{fontSize:"small"}))),a.a.createElement(Rt,null))))};function er(){var n=Object(tn.a)(["\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  height: 100vh;\n  overflow: hidden;\n"]);return er=function(){return n},n}function tr(){var n=Object(tn.a)(["\n  background-color: ",";\n  overflow-y: scroll;\n  padding-bottom: 113px;\n"]);return tr=function(){return n},n}var rr=u.c.main(tr(),(function(n){return n.theme.color.background})),ar=u.c.div(er());var or=function(n){var e=n.children,t=n.location;return I().isAuthenticated||t.pathname.includes("/auth")?a.a.createElement(ar,null,a.a.createElement(xt,{location:t}),a.a.createElement(rr,null,e),a.a.createElement(nr,null)):a.a.createElement(c.b,{noThrow:!0,to:"auth"})};var ir=function(n){var e=n.message,t=n.onClick,o=Object(fe.a)(n,["message","onClick"]),i=Object(r.useState)(!1),c=Object(h.a)(i,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){l(!1)}),2e3);return function(){clearTimeout(n)}}),[u]),u?a.a.createElement(vn,{onBlur:function(){return l(!1)},onClick:t},e||"Are you sure?"):a.a.createElement(vn,Object.assign({onClick:function(){l(!0)}},o))};function cr(){var n=Object(tn.a)(["\n  color: ",";\n"]);return cr=function(){return n},n}function ur(){var n=Object(tn.a)(["\n  display: grid;\n"]);return ur=function(){return n},n}function lr(){var n=Object(tn.a)(["\n  ","\n  color: ",";\n"]);return lr=function(){return n},n}var sr=u.c.div(lr(),(function(n){return n.theme.typography.sub}),(function(n){return n.theme.color.disabled})),dr=u.c.div(ur()),fr=u.c.span(cr(),(function(n){return n.theme.color.primary}));var pr=function(n){var e=n.playlist;return a.a.createElement(dr,null,a.a.createElement("h1",null,e.data.title),e.data.artist&&a.a.createElement(sr,null,"By ",a.a.createElement(fr,null,e.data.artist)))},mr=t(47),vr=t(72),hr=t.n(vr),br=t(69),gr=t.n(br),yr=t(70),jr=t.n(yr);function xr(){var n=Object(tn.a)(["\n","\nbackground-color: ",";\n  border: none;\n  border-top: 1px solid ",";\n  color: ",";\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  width: 100%;\n  \n  :hover {\n    background-color: ","11;\n    \n    #play {\n      border-color: white;\n      color: white;\n    }\n  }\n"]);return xr=function(){return n},n}function Er(){var n=Object(tn.a)(["\n  color: ",";\n"]);return Er=function(){return n},n}function Or(){var n=Object(tn.a)(["\n  color: ",";\n  display: grid;\n  font-size: 11px;\n  line-height: 15px;\n  text-align: right;\n"]);return Or=function(){return n},n}function kr(){var n=Object(tn.a)(["\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 50%;\n  color: ",";\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  line-height: 30px;\n  width: 30px;\n"]);return kr=function(){return n},n}function wr(){var n=Object(tn.a)(["\n  align-items: center;\n  display: grid;\n  line-height: 30px;\n  grid-gap: 5px;\n  grid-template-columns: 40px 20px 1fr auto;\n  padding: ","px;\n"]);return wr=function(){return n},n}var Cr=u.c.div(wr(),(function(n){return n.theme.space.medium})),Sr=u.c.span(kr(),(function(n){return n.isPlaying?"white":"transparent"})),Ir=u.c.span(Or(),(function(n){return n.theme.color.secondary})),Pr=u.c.span(Er(),(function(n){return n.theme.color.disabled})),Dr=u.c.button(xr(),(function(n){return n.theme.typography.base}),(function(n){return n.theme.color[n.isPlaying?"bgHighlight":"background"]}),(function(n){return n.theme.color.bgHighlight}),(function(n){return n.theme.color[n.isPlaying?"highlight":"inherit"]}),(function(n){return n.theme.color.primary}));var Tr=function(n){var e=n.index,t=n.isEditable,r=n.isPlaying,o=n.onClick,i=n.onDelete,c=n.track,u=n.user;return a.a.createElement(Dr,{isPlaying:r,onClick:t?void 0:function(){return o(c)}},a.a.createElement(Cr,null,t?a.a.createElement(Tt,{onClick:function(){return i(c)}},a.a.createElement(gr.a,{fontSize:"small"})):a.a.createElement(Sr,{id:"play",isPlaying:r},r?a.a.createElement(jr.a,{fontSize:"small"}):a.a.createElement(wt.a,{fontSize:"small"})),a.a.createElement("span",null,e,"."),a.a.createElement("span",null,T(c.name)),t?a.a.createElement("div",null):a.a.createElement(Ir,null,a.a.createElement("span",null,"Updated"," ",Object(Be.a)(new Date(c.server_modified),new Date)),u&&a.a.createElement(Pr,null,"by ",u.name.display_name))))};function Ar(){var n=Object(tn.a)(["\n  position: relative;\n"]);return Ar=function(){return n},n}function zr(){var n=Object(tn.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  right: 10px;\n  top: 0;\n"]);return zr=function(){return n},n}var _r=u.c.div(zr(),(function(n){return n.theme.color.primary})),Lr=u.c.div(Ar());var Fr=a.a.memo((function(n){var e=n.onTrackClick,t=n.onTrackDelete,r=n.playingId,o=n.tracks;return a.a.createElement(Wn,{getKey:function(n){return n.id},items:o,itemRenderer:function(n,o){return a.a.createElement(mr.b,{draggableId:n.id,index:o},(function(i){return a.a.createElement(Lr,Object.assign({ref:i.innerRef},i.draggableProps),a.a.createElement(Tr,{index:o+1,isEditable:!0,isPlaying:r===n.id,onClick:e,onDelete:t,track:n}),a.a.createElement(_r,i.dragHandleProps,a.a.createElement(hr.a,null)))}))}})}),(function(n,e){return n.playingId===e.playingId&&n.tracks.map((function(n){return n.id})).join()===e.tracks.map((function(n){return n.id})).join()}));var Br=function(n){var e=n.isEditing,t=n.onTrackChange,r=n.onTrackClick,o=(n.onTrackDelete,n.playingId),i=n.tracks,c=n.users;function u(n){t(i.filter((function(e){return e.id!==n.id})))}return e?a.a.createElement(mr.a,{onDragEnd:function(n){if(n.destination&&n.destination.index!==n.source.index){var e=function(n,e,t){var r=Array.from(n),a=r.splice(e,1),o=Object(h.a)(a,1)[0];return r.splice(t,0,o),r}(i,n.source.index,n.destination.index);t(e)}}},a.a.createElement(mr.c,{droppableId:"tracks"},(function(n){return a.a.createElement("div",Object.assign({ref:n.innerRef},n.droppableProps),a.a.createElement(Fr,{onTrackClick:r,onTrackDelete:u,playingId:o,tracks:i}),n.placeholder)}))):a.a.createElement(Wn,{getKey:function(n){return n.id},items:i,itemRenderer:function(n,e){return a.a.createElement(Tr,{index:e+1,isPlaying:o===n.id,onClick:r,track:n,user:c[F(n)]})}})};function Rr(){var n=Object(tn.a)(["\n  display: grid;\n  grid-gap: 20px;\n"]);return Rr=function(){return n},n}function Ur(){var n=Object(tn.a)(["\n  align-items: ",";\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: ","px;\n  grid-template-columns: 1fr auto;\n  padding: 20px;\n"]);return Ur=function(){return n},n}function Mr(){var n=Object(tn.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 110px auto;\n  justify-content: flex-start;\n  padding: 20px;\n"]);return Mr=function(){return n},n}function Nr(){var n=Object(tn.a)(["\n  align-items: center;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 20px;\n"]);return Nr=function(){return n},n}var Hr=u.c.div(Nr()),Vr=u.c.div(Mr()),Jr=u.c.div(Ur(),(function(n){return n.isEditing?"flex-start":"center"}),(function(n){return n.isEditing?40:20})),Kr=u.c.div(Rr());var Wr=function(n){var e,t=n.navigate,o=n.playlistId,i=K({playlistId:o}),c=i.data,u=i.isLoading,l=i.onDelete,s=i.onSave,d=i.users,f=Object(r.useState)(!1),p=Object(h.a)(f,2),g=p[0],y=p[1],j=Object(r.useState)(!1),x=Object(h.a)(j,2),E=x[0],O=x[1],k=Object(r.useState)(c),w=Object(h.a)(k,2),C=w[0],S=w[1],I=nn();function P(){return(P=Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(C);case 2:t(en);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function D(){E?(g&&s(C),y(!1),O(!1)):(O(!0),S(c))}return a.a.createElement("div",null,E?a.a.createElement(Jr,{isEditing:E},a.a.createElement(Kr,null,a.a.createElement(Oe,{onChange:function(n){S(Object(b.a)({},C,{data:Object(b.a)({},C.data,{title:n})})),y(!0)},title:"Title",value:C.data.title}),a.a.createElement(Oe,{onChange:function(n){S(Object(b.a)({},C,{data:Object(b.a)({},C.data,{artist:n})})),y(!0)},title:"Artist",value:C.data.artist||""})),a.a.createElement(Hr,null,a.a.createElement(r.Fragment,null,a.a.createElement(vn,{disabled:!g,onClick:D},"Save"),a.a.createElement(vn,{onClick:function(){y(!1),O(!1),S(c)}},"Cancel")))):a.a.createElement(Jr,{isEditing:E},a.a.createElement(pr,{playlist:C}),a.a.createElement(Hr,null,a.a.createElement(vn,{onClick:D},"Edit"),a.a.createElement(ir,{message:"Really Delete?",onClick:function(){return P.apply(this,arguments)}},"Delete"))),E&&a.a.createElement(Vr,null,a.a.createElement("h2",null,"Tracks"),a.a.createElement(sn,{to:"tracks"},"Add Tracks")),a.a.createElement(Yn,{isLoading:u}),a.a.createElement(Br,{isEditing:E,onTrackChange:function(n){S(Object(b.a)({},C,{data:Object(b.a)({},C.data,{tracks:n})})),y(!0)},onTrackClick:function(n){I.onPlay({playlistId:o,trackId:n.id})},playingId:null===(e=I.track)||void 0===e?void 0:e.id,tracks:C.data.tracks,users:d}))};function Gr(){var n=Object(tn.a)(["\n  display: grid;\n  flex-direction: row;\n  grid-gap: 20px;\n  grid-template-columns: 1fr auto auto;\n  padding: 20px;\n"]);return Gr=function(){return n},n}var qr=u.c.div(Gr());var $r=function(n){var e=n.playlistId,t=K({playlistId:e}),o=t.data,i=t.isLoading,u=t.onSave,l=Object(r.useState)([]),s=Object(h.a)(l,2),d=s[0],f=s[1],p=Object(r.useState)(!1),m=Object(h.a)(p,2),v=m[0],g=m[1],y=Object(c.d)(),j="/playlist/".concat(e);return Object(r.useEffect)((function(){var n;f((null===o||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.tracks)||[])}),[i,o]),a.a.createElement("div",null,a.a.createElement(qr,null,a.a.createElement(pr,{playlist:o}),a.a.createElement(vn,{disabled:!v,onClick:function(){u(Object(b.a)({},o,{data:Object(b.a)({},o.data,{tracks:d})})),y(j)}},"Save"),a.a.createElement(sn,{to:j},"Cancel")),a.a.createElement(de,{onSelectionChange:function(n){f(n),v||g(!0)},selectedEntries:d,showFiles:!0}))},Qr=Object(l.a)({palette:{primary:f.a}});var Xr=function(){return a.a.createElement(s.a,{theme:Qr},a.a.createElement(u.a,{theme:cn},a.a.createElement(E,null,a.a.createElement(S,{authUrl:"".concat(window.location.href,"/auth")},a.a.createElement(Z,null,a.a.createElement(c.c,{basepath:en},a.a.createElement(or,{path:"/"},a.a.createElement(pn,{path:"auth"}),a.a.createElement(Fe,{path:"new"}),a.a.createElement(Wr,{path:"playlist/:playlistId"}),a.a.createElement($r,{path:"playlist/:playlistId/tracks"}),a.a.createElement(et,{path:"/"}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(Xr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.eee89502.chunk.js.map